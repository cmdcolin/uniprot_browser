import{o as f,bw as j,j as e,a as r,c as S,d as v,m as b,u as m,B as C,bx as E}from"./index-B3kPj2Rj.js";import{M as k}from"./MenuItem-D9_xBR9N.js";import{S as N,a as M,b as W,c as y}from"./Stepper-Lv0J7qnw.js";import"./dividerClasses-B-wJULXt.js";import"./Collapse-B0k2w5md.js";const B=f(function({connectionType:s,model:t,session:o}){const i=s.configEditorComponent||j;return e.jsx(r.Suspense,{fallback:e.jsx(S.LoadingEllipses,{}),children:e.jsx(i,{model:{target:t},session:o})})}),L=f(function({connectionTypeChoices:t,connectionType:o,setConnectionType:i}){const u=t[0];return r.useEffect(()=>{o||i(u)},[o,u,i]),e.jsx("form",{autoComplete:"off",children:o?e.jsx(v,{value:o.name,label:"connectionType",helperText:o.description?e.jsxs(e.Fragment,{children:[o.description,o.url?e.jsx(S.ExternalLink,{href:o.url}):null]}):null,select:!0,fullWidth:!0,onChange:n=>{i(t.find(p=>p.name===n.target.value))},variant:"outlined",children:t.map(n=>e.jsx(k,{value:n.name,children:n.displayName||n.name},n.name))}):null})}),I=b()(s=>({root:{marginTop:s.spacing(1)},stepper:{backgroundColor:s.palette.background.default},button:{marginTop:s.spacing(1),marginRight:s.spacing(1)},actionsContainer:{marginBottom:s.spacing(2)}})),g=["Select a Connection Type","Configure Connection"],$=f(function({model:s}){const[t,o]=r.useState(),[i,u]=r.useState(),[n,p]=r.useState(0),{classes:c}=I(),a=m.getSession(s),{pluginManager:h}=m.getEnv(a),l=r.useMemo(()=>t?.configSchema.create({connectionId:i},m.getEnv(s)),[i,t,s]);return e.jsx("div",{className:c.root,children:e.jsx(N,{className:c.stepper,activeStep:n,orientation:"vertical",children:g.map(x=>e.jsxs(M,{children:[e.jsx(W,{children:x}),e.jsxs(y,{children:[n===0?e.jsx(L,{connectionTypeChoices:h.getConnectionElements(),connectionType:t,setConnectionType:d=>{o(d),d&&u(`${d.name}-${Date.now()}`)}}):t&&l?e.jsx(B,{connectionType:t,model:l,session:a}):null,e.jsxs("div",{className:c.actionsContainer,children:[e.jsx(C,{disabled:n===0,onClick:()=>{p(n-1)},className:c.button,children:"Back"}),e.jsx(C,{disabled:!(n===0&&t||n===1&&l),variant:"contained",color:"primary",onClick:()=>{if(n===g.length-1){if(l&&E(a)){const d=a.addConnectionConf(l);a.makeConnection(d)}else a.notify("No config model to add");m.isSessionModelWithWidgets(a)&&a.hideWidget(s)}else p(n+1)},className:c.button,"data-testid":"addConnectionNext",children:n===g.length-1?"Connect":"Next"})]})]})]},x))})})});export{$ as default};
//# sourceMappingURL=AddConnectionWidget-C_ajgZxu.js.map
