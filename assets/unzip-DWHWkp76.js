import{a as I}from"./index-BwUmrpDq.js";function v(r){let e=0;for(const n of r)e+=n.length;return e}function y(r){const e=new Uint8Array(v(r));let n=0;for(const t of r)e.set(t,n),n+=t.length;return e}const{Z_SYNC_FLUSH:P,Inflate:x}=I;function z(r,e){const n=e.subarray(0,Math.min(32,e.length));let t=0;const o=n.length;for(let s=0;s<o;s++)t=(t<<5)-t+n[s]&4294967295;return`${r}_${t}`}async function E(r){try{let e,n=0,t;const o=[];do{const s=r.subarray(n);if(t=new x,{strm:e}=t,t.push(s,P),t.err)throw new Error(t.msg);n+=e.next_in,o.push(t.result)}while(e.avail_in);return y(o)}catch(e){throw/incorrect header check/.exec(`${e}`)?new Error("problem decompressing block: incorrect gzip header check"):e}}async function $(r,e,n){try{let t;const{minv:o,maxv:s}=e;let c=o.blockPosition,f=o.dataPosition;const i=[],u=[],p=[];let g=0,b=!1;do{const d=r.subarray(c-o.blockPosition),k=z(c,d);let a,h;const m=n?.get(k);if(m)a=m.buffer,h=m.nextIn,b=!0;else{const l=new x;if({strm:t}=l,l.push(d,P),l.err)throw new Error(l.msg);a=l.result,h=t.next_in,b=!1,n?.set(k,{buffer:a,nextIn:h})}i.push(a);let w=a.length;u.push(c),p.push(f),i.length===1&&o.dataPosition&&(i[0]=i[0].subarray(o.dataPosition),w=i[0].length);const _=c;if(c+=h,f+=w,_>=s.blockPosition){i[g]=i[g].subarray(0,s.blockPosition===o.blockPosition?s.dataPosition-o.dataPosition+1:s.dataPosition+1),u.push(c),p.push(f);break}g++}while(b?c<r.length+o.blockPosition:t.avail_in);return{buffer:y(i),cpositions:u,dpositions:p}}catch(t){throw/incorrect header check/.exec(`${t}`)?new Error("problem decompressing block: incorrect gzip header check"):t}}export{$ as a,y as c,E as u};
//# sourceMappingURL=unzip-DWHWkp76.js.map
