{"version":3,"file":"ClusterDialog-CrfFo_Fl.js","sources":["../../node_modules/@jbrowse/plugin-variants/esm/shared/components/MultiVariantClusterDialog/ClusterDialogAuto.js","../../node_modules/@jbrowse/plugin-variants/esm/shared/components/MultiVariantClusterDialog/ClusterDialogManual.js","../../node_modules/@jbrowse/plugin-variants/esm/shared/components/MultiVariantClusterDialog/ClusterDialog.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { ErrorMessage } from '@jbrowse/core/ui';\nimport { getContainingView, getSession, isAbortException, } from '@jbrowse/core/util';\nimport { createStopToken, stopStopToken } from '@jbrowse/core/util/stopToken';\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks';\nimport { Button, DialogActions, DialogContent } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { isAlive } from 'mobx-state-tree';\nconst ClusterDialogAuto = observer(function ({ model, children, handleClose, }) {\n    const [progress, setProgress] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState();\n    const [stopToken, setStopToken] = useState('');\n    return (_jsxs(_Fragment, { children: [_jsxs(DialogContent, { children: [children, _jsxs(\"div\", { children: [loading ? (_jsxs(\"div\", { style: { padding: 50 }, children: [_jsx(\"span\", { children: progress || 'Loading...' }), _jsx(Button, { onClick: () => {\n                                            stopStopToken(stopToken);\n                                        }, children: \"Stop\" })] })) : null, error ? _jsx(ErrorMessage, { error: error }) : null] })] }), _jsxs(DialogActions, { children: [_jsx(Button, { variant: \"contained\", disabled: loading, onClick: async () => {\n                            try {\n                                setError(undefined);\n                                setProgress('Initializing');\n                                setLoading(true);\n                                const view = getContainingView(model);\n                                if (!view.initialized) {\n                                    return;\n                                }\n                                const { rpcManager } = getSession(model);\n                                const { sourcesWithoutLayout, minorAlleleFrequencyFilter, lengthCutoffFilter, adapterConfig, } = model;\n                                if (sourcesWithoutLayout) {\n                                    const sessionId = getRpcSessionId(model);\n                                    const stopToken = createStopToken();\n                                    setStopToken(stopToken);\n                                    const ret = (await rpcManager.call(sessionId, 'MultiVariantClusterGenotypeMatrix', {\n                                        regions: view.dynamicBlocks.contentBlocks,\n                                        sources: sourcesWithoutLayout,\n                                        minorAlleleFrequencyFilter,\n                                        lengthCutoffFilter,\n                                        sessionId,\n                                        adapterConfig,\n                                        stopToken,\n                                        statusCallback: (arg) => {\n                                            setProgress(arg);\n                                        },\n                                    }));\n                                    model.setLayout(ret.order.map(idx => {\n                                        const ret = sourcesWithoutLayout[idx];\n                                        if (!ret) {\n                                            throw new Error(`out of bounds at ${idx}`);\n                                        }\n                                        return ret;\n                                    }));\n                                }\n                                handleClose();\n                            }\n                            catch (e) {\n                                if (!isAbortException(e) && isAlive(model)) {\n                                    console.error(e);\n                                    setError(e);\n                                }\n                            }\n                            finally {\n                                setLoading(false);\n                                setProgress('');\n                                setStopToken('');\n                            }\n                        }, children: \"Run clustering\" }), _jsx(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                            handleClose();\n                            if (stopToken) {\n                                stopStopToken(stopToken);\n                            }\n                        }, children: \"Cancel\" })] })] }));\n});\nexport default ClusterDialogAuto;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { ErrorMessage, LoadingEllipses } from '@jbrowse/core/ui';\nimport { getContainingView, getSession, isAbortException, useLocalStorage, } from '@jbrowse/core/util';\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks';\nimport { Button, DialogActions, DialogContent, FormControlLabel, Paper, Radio, RadioGroup, TextField, Typography, } from '@mui/material';\nimport copy from 'copy-to-clipboard';\nimport { saveAs } from 'file-saver';\nimport { observer } from 'mobx-react';\nimport { isAlive } from 'mobx-state-tree';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => ({\n    textAreaFont: {\n        fontFamily: 'Courier New',\n    },\n    mgap: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: theme.spacing(4),\n    },\n}));\nconst ClusterDialogManuals = observer(function ({ model, handleClose, children, }) {\n    const { classes } = useStyles();\n    const [paste, setPaste] = useState('');\n    const [ret, setRet] = useState();\n    const [error, setError] = useState();\n    const [loading, setLoading] = useState(false);\n    const [showAdvanced, setShowAdvanced] = useLocalStorage('cluster-showAdvanced', false);\n    const [clusterMethod, setClusterMethod] = useState('single');\n    useEffect(() => {\n        ;\n        (async () => {\n            try {\n                setError(undefined);\n                setRet(undefined);\n                setLoading(true);\n                const view = getContainingView(model);\n                if (!view.initialized) {\n                    return;\n                }\n                const { rpcManager } = getSession(model);\n                const { sourcesWithoutLayout, minorAlleleFrequencyFilter, lengthCutoffFilter, adapterConfig, } = model;\n                const sessionId = getRpcSessionId(model);\n                const ret = (await rpcManager.call(sessionId, 'MultiVariantGetGenotypeMatrix', {\n                    regions: view.dynamicBlocks.contentBlocks,\n                    sources: sourcesWithoutLayout,\n                    minorAlleleFrequencyFilter,\n                    lengthCutoffFilter,\n                    sessionId,\n                    adapterConfig,\n                }));\n                setRet(ret);\n            }\n            catch (e) {\n                if (!isAbortException(e) && isAlive(model)) {\n                    console.error(e);\n                    setError(e);\n                }\n            }\n            finally {\n                setLoading(false);\n            }\n        })();\n    }, [model]);\n    const results = ret\n        ? `inputMatrix<-matrix(c(${Object.values(ret)\n            .map(val => val.join(','))\n            .join(',\\n')}\n),nrow=${Object.values(ret).length},byrow=TRUE)\nrownames(inputMatrix)<-c(${Object.keys(ret)\n            .map(key => `'${key}'`)\n            .join(',')})\nresultClusters<-hclust(dist(inputMatrix), method='${clusterMethod}')\ncat(resultClusters$order,sep='\\\\n')`\n        : undefined;\n    const resultsTsv = ret\n        ? Object.entries(ret)\n            .map(([key, val]) => [key, ...val].join('\\t'))\n            .join('\\n')\n        : undefined;\n    return (_jsxs(_Fragment, { children: [_jsxs(DialogContent, { children: [children, _jsxs(Paper, { style: { padding: 16 }, children: [_jsxs(\"div\", { children: [_jsxs(\"div\", { style: {\n                                            display: 'flex',\n                                            gap: '8px',\n                                            flexWrap: 'wrap',\n                                            marginBottom: '16px',\n                                        }, children: [_jsx(Button, { variant: \"contained\", onClick: () => {\n                                                    saveAs(new Blob([results || ''], {\n                                                        type: 'text/plain;charset=utf-8',\n                                                    }), 'cluster.R');\n                                                }, children: \"Download Rscript\" }), ' ', \"or\", ' ', _jsx(Button, { variant: \"contained\", onClick: () => {\n                                                    copy(results || '');\n                                                }, children: \"Copy Rscript to clipboard\" }), ' ', \"or\", ' ', _jsx(Button, { variant: \"contained\", onClick: () => {\n                                                    saveAs(new Blob([resultsTsv || ''], {\n                                                        type: 'text/plain;charset=utf-8',\n                                                    }), 'genotypes.tsv');\n                                                }, children: \"Download TSV\" }), _jsx(\"div\", { children: _jsx(Button, { variant: \"contained\", onClick: () => {\n                                                        setShowAdvanced(!showAdvanced);\n                                                    }, children: showAdvanced\n                                                        ? 'Hide advanced options'\n                                                        : 'Show advanced options' }) })] }), showAdvanced ? (_jsxs(\"div\", { children: [_jsx(Typography, { variant: \"h6\", children: \"Advanced options\" }), _jsx(RadioGroup, { children: Object.entries({\n                                                    single: 'Single',\n                                                    complete: 'Complete',\n                                                }).map(([key, val]) => (_jsx(FormControlLabel, { control: _jsx(Radio, { checked: clusterMethod === key, onChange: () => {\n                                                            setClusterMethod(key);\n                                                        } }), label: val }, key))) })] })) : null, results ? (_jsx(\"div\", {})) : loading ? (_jsx(LoadingEllipses, { variant: \"h6\", title: \"Generating genotype matrix\" })) : error ? (_jsx(ErrorMessage, { error: error })) : null] }), _jsxs(\"div\", { children: [_jsx(Typography, { variant: \"subtitle2\", gutterBottom: true, style: { marginTop: '16px' }, children: \"Clustering Results:\" }), _jsx(TextField, { multiline: true, fullWidth: true, variant: \"outlined\", placeholder: \"Paste results from Rscript here (sequence of numbers, one per line, specifying the new ordering)\", rows: 10, value: paste, onChange: event => {\n                                            setPaste(event.target.value);\n                                        }, slotProps: {\n                                            input: {\n                                                classes: {\n                                                    input: classes.textAreaFont,\n                                                },\n                                            },\n                                        } })] })] })] }), _jsxs(DialogActions, { children: [_jsx(Button, { variant: \"contained\", onClick: () => {\n                            const { sourcesWithoutLayout } = model;\n                            if (sourcesWithoutLayout) {\n                                try {\n                                    model.setLayout(paste\n                                        .split('\\n')\n                                        .map(t => t.trim())\n                                        .filter(f => !!f)\n                                        .map(r => +r)\n                                        .map(idx => {\n                                        const ret = sourcesWithoutLayout[idx - 1];\n                                        if (!ret) {\n                                            throw new Error(`out of bounds at ${idx}`);\n                                        }\n                                        return ret;\n                                    }));\n                                }\n                                catch (e) {\n                                    console.error(e);\n                                    getSession(model).notifyError(`${e}`, e);\n                                }\n                            }\n                            handleClose();\n                        }, children: \"Apply clustering\" }), _jsx(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                            handleClose();\n                        }, children: \"Cancel\" })] })] }));\n});\nexport default ClusterDialogManuals;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { Dialog } from '@jbrowse/core/ui';\nimport { FormControlLabel, Radio, RadioGroup, Typography } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport ClusterDialogAuto from './ClusterDialogAuto';\nimport ClusterDialogManual from './ClusterDialogManual';\nfunction Header({ activeMode, setActiveMode, }) {\n    return (_jsxs(\"div\", { children: [_jsx(Typography, { style: { marginBottom: 30 }, children: \"This procedure will cluster the visible genotype data using hierarchical clustering\" }), _jsx(RadioGroup, { children: Object.entries({\n                    auto: (_jsx(\"div\", { children: \"Run in-app clustering (slower, particularly for large numbers of samples, uses JS implementation of hclust)\" })),\n                    manual: (_jsx(\"div\", { children: \"Download R script to run clustering (faster, uses R implementation of hclust)\" })),\n                }).map(([key, val]) => (_jsx(FormControlLabel, { control: _jsx(Radio, { checked: activeMode === key, onChange: () => {\n                            setActiveMode(key);\n                        } }), label: val }, key))) })] }));\n}\nconst ClusterDialog = observer(function ({ model, handleClose, }) {\n    const [activeMode, setActiveMode] = useState('auto');\n    return (_jsx(Dialog, { open: true, title: \"Cluster by genotype\", onClose: (_, reason) => {\n            if (reason !== 'backdropClick') {\n                handleClose();\n            }\n        }, children: activeMode === 'auto' ? (_jsx(ClusterDialogAuto, { model: model, handleClose: handleClose, children: _jsx(Header, { activeMode: activeMode, setActiveMode: setActiveMode }) })) : (_jsx(ClusterDialogManual, { model: model, handleClose: handleClose, children: _jsx(Header, { activeMode: activeMode, setActiveMode: setActiveMode }) })) }));\n});\nexport default ClusterDialog;\n"],"names":["ClusterDialogAuto","observer","model","children","handleClose","progress","setProgress","useState","loading","setLoading","error","setError","stopToken","setStopToken","_jsxs","_Fragment","DialogContent","_jsx","Button","stopStopToken","ErrorMessage","DialogActions","view","getContainingView","rpcManager","getSession","sourcesWithoutLayout","minorAlleleFrequencyFilter","lengthCutoffFilter","adapterConfig","sessionId","getRpcSessionId","createStopToken","ret","arg","idx","e","isAbortException","isAlive","useStyles","makeStyles","theme","ClusterDialogManuals","classes","paste","setPaste","setRet","showAdvanced","setShowAdvanced","useLocalStorage","clusterMethod","setClusterMethod","useEffect","results","val","key","resultsTsv","Paper","saveAs","copy","Typography","RadioGroup","FormControlLabel","Radio","LoadingEllipses","TextField","event","t","f","r","Header","activeMode","setActiveMode","ClusterDialog","Dialog","_","reason","ClusterDialogManual"],"mappings":"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","x_google_ignoreList":[0,1,2]}