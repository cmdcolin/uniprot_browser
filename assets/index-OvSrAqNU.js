import{o as d,a as r,j as e,D as b,d as A,e as g,B as x,c,aM as T,m as k,bw as D,aa as N,an as C,ce as E,y as h,cf as M}from"./index-B3kPj2Rj.js";import{M as O}from"./MenuItem-D9_xBR9N.js";import{D as U}from"./DataGridFlexContainer-B2hBWGBJ.js";import{D as H}from"./DataGrid-Dgd1aEF_.js";import"./dividerClasses-B-wJULXt.js";import"./index-DqkJqhbV.js";import"./utils-BwPRrx3T.js";import"./getThemeProps-BbKRYxDH.js";import"./Divider-DCzRIyLN.js";import"./Badge-CuqxGOPa.js";import"./TableCell-AIVdwsWn.js";const G=d(function({adapterSelection:n,setAdapterSelection:o,adapterTypes:s}){return e.jsx(A,{value:n,variant:"outlined",select:!0,helperText:"Type of adapter to use",fullWidth:!0,onChange:t=>{o(t.target.value)},children:s.map(t=>e.jsx(O,{value:t,children:t},t))})}),$=d(function({fastaLocation:n,setFastaLocation:o}){return e.jsxs(e.Fragment,{children:[e.jsx(T,{severity:"warning",style:{margin:30},children:"Note: use only relatively small files for this type, it is loaded into memory"}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:s=>{o(s)}})})]})}),q=d(function({fastaLocation:n,faiLocation:o,setFaiLocation:s,setFastaLocation:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:a=>{t(a)}})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"faiLocation",location:o,setLocation:a=>{s(a)}})})]})}),P=d(function({fastaLocation:n,faiLocation:o,gziLocation:s,setFaiLocation:t,setGziLocation:a,setFastaLocation:l}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:i=>{l(i)}})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"faiLocation",location:o,setLocation:i=>{t(i)}})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"gziLocation",location:s,setLocation:i=>{a(i)}})})]})}),R=d(function({twoBitLocation:n,chromSizesLocation:o,setTwoBitLocation:s,setChromSizesLocation:t}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"twoBitLocation",location:n,setLocation:a=>{s(a)}})}),e.jsx("div",{children:e.jsx(c.FileSelector,{inline:!0,name:"chromSizesLocation (optional, can be added to speed up loading 2bit files with many contigs)",location:o,setLocation:a=>{t(a)}})})]})}),u={uri:""},I=["IndexedFastaAdapter","BgzipFastaAdapter","UnindexedFastaAdapter","TwoBitAdapter"],V=d(function({session:n,onClose:o}){const[s,t]=r.useState(""),[a,l]=r.useState(""),[i,p]=r.useState(I[0]),[m,y]=r.useState(u),[j,L]=r.useState(u),[F,w]=r.useState(u),[v,z]=r.useState(u),[S,B]=r.useState(u);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsx(A,{id:"assembly-name",label:"Assembly name",helperText:"The assembly name e.g. hg38",variant:"outlined",value:s,onChange:f=>{t(f.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-name"}}}),e.jsx(A,{id:"assembly-name",label:"Assembly display name",helperText:'(optional) A human readable display name for the assembly e.g. "Homo sapiens (hg38)"',variant:"outlined",value:a,onChange:f=>{l(f.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-display-name"}}}),e.jsx(G,{adapterSelection:i,adapterTypes:I,setAdapterSelection:p}),i==="IndexedFastaAdapter"?e.jsx(q,{fastaLocation:m,faiLocation:j,setFaiLocation:L,setFastaLocation:y}):i==="UnindexedFastaAdapter"?e.jsx($,{fastaLocation:m,setFastaLocation:y}):i==="TwoBitAdapter"?e.jsx(R,{twoBitLocation:v,chromSizesLocation:S,setTwoBitLocation:z,setChromSizesLocation:B}):e.jsx(P,{fastaLocation:m,gziLocation:F,faiLocation:j,setFaiLocation:L,setGziLocation:w,setFastaLocation:y})]}),e.jsxs(g,{children:[e.jsx(x,{variant:"contained",color:"primary",onClick:()=>{s===""?n.notify("Can't create an assembly without a name"):(o(),n.addAssembly({name:s,displayName:a,sequence:{type:"ReferenceSequenceTrack",trackId:`${s}-${performance.now()}`,adapter:i==="IndexedFastaAdapter"?{type:"IndexedFastaAdapter",fastaLocation:m,faiLocation:j}:i==="BgzipFastaAdapter"?{type:"BgzipFastaAdapter",fastaLocation:m,faiLocation:j,gziLocation:F}:i==="UnindexedFastaAdapter"?{type:"UnindexedFastaAdapter",fastaLocation:m}:{type:"TwoBitAdapter",twoBitLocation:v,chromSizesLocation:S}}}),n.notify(`Added "${s}"`,"success"))},children:"Submit"}),e.jsx(x,{variant:"contained",color:"secondary",onClick:()=>{o()},children:"Cancel"})]})]})}),W=k()({container:{overflow:"auto",maxHeight:600}}),J=d(function({assembly:n,onClose:o}){const{classes:s}=W();return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx("div",{className:s.container,children:n?e.jsx(D,{model:{target:n}}):e.jsx("div",{children:"No assembly"})})}),e.jsx(g,{children:e.jsx(x,{variant:"contained",onClick:()=>{o()},children:"Back"})})]})}),K=N(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),Q=d(function({onEditAssembly:n,onAddAssembly:o,onClose:s,session:t}){return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx(U,{children:e.jsx(H,{rowHeight:25,columnHeaderHeight:35,hideFooter:t.assemblies.length<25,rows:t.assemblies.map(a=>({id:h.readConfObject(a,"name"),name:h.readConfObject(a,"name"),displayName:h.readConfObject(a,"displayName"),aliases:h.readConfObject(a,"aliases"),assembly:a})),columns:[{field:"name"},{field:"displayName"},{field:"aliases"},{field:"actions",renderCell:({row:a})=>{const{assembly:l,name:i}=a,p=t.sessionAssemblies.includes(l)?!0:t.adminMode;return e.jsxs(e.Fragment,{children:[e.jsx(C,{disabled:!p,onClick:()=>{n(l)},children:e.jsx(K,{})}),e.jsx(C,{"data-testid":`${i}-delete`,disabled:!p,onClick:()=>{p&&(t.removeAssembly?t.removeAssembly(i):t.notify("Unable to find removeAssembly function"))},children:e.jsx(E,{})})]})}}]})})}),e.jsxs(g,{children:[e.jsx(x,{color:"secondary",variant:"contained",onClick:()=>{s()},children:"Close"}),e.jsx(x,{variant:"contained",startIcon:e.jsx(M,{}),onClick:()=>{o()},children:"Add new assembly"})]})]})}),re=d(function({session:n,onClose:o}){const[s,t]=r.useState(!1),[a,l]=r.useState();return e.jsx(c.Dialog,{open:!0,title:"Assembly manager",onClose:()=>{o()},children:a?e.jsx(J,{assembly:a,onClose:()=>{l(void 0)}}):s?e.jsx(V,{session:n,onClose:()=>{t(!1)}}):e.jsx(Q,{session:n,onClose:()=>{o()},onAddAssembly:()=>{t(!0)},onEditAssembly:i=>{l(i)}})})});export{re as default};
//# sourceMappingURL=index-OvSrAqNU.js.map
