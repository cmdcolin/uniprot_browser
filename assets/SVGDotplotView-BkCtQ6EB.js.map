{"version":3,"file":"SVGDotplotView-BkCtQ6EB.js","sources":["../../node_modules/@jbrowse/plugin-dotplot-view/esm/DotplotView/svgcomponents/SVGBackground.js","../../node_modules/@jbrowse/plugin-dotplot-view/esm/DotplotView/svgcomponents/SVGDotplotView.js"],"sourcesContent":["import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { stripAlpha } from '@jbrowse/core/util';\nimport { useTheme } from '@mui/material';\nexport default function SVGBackground({ width, height, }) {\n    const theme = useTheme();\n    return (_jsx(\"rect\", { x: 0, y: 0, width: width, height: height, fill: stripAlpha(theme.palette.background.default) }));\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { createJBrowseTheme } from '@jbrowse/core/ui';\nimport { getSession, renderToStaticMarkup } from '@jbrowse/core/util';\nimport { ThemeProvider } from '@mui/material';\nimport { when } from 'mobx';\nimport SVGBackground from './SVGBackground';\nimport { HorizontalAxisRaw, VerticalAxisRaw } from '../components/Axes';\nimport { GridRaw } from '../components/Grid';\nexport async function renderToSvg(model, opts) {\n    var _a;\n    await when(() => model.initialized);\n    const { themeName = 'default', Wrapper = ({ children }) => children } = opts;\n    const session = getSession(model);\n    const theme = (_a = session.allThemes) === null || _a === void 0 ? void 0 : _a.call(session)[themeName];\n    const { width, borderX, viewWidth, viewHeight, tracks, height } = model;\n    const shift = 50;\n    const displayResults = await Promise.all(tracks.map(async (track) => {\n        const display = track.displays[0];\n        await when(() => (display.ready !== undefined ? display.ready : true));\n        return { track, result: await display.renderSvg({ ...opts, theme }) };\n    }));\n    const w = width + shift * 2;\n    return renderToStaticMarkup(_jsx(ThemeProvider, { theme: createJBrowseTheme(theme), children: _jsx(Wrapper, { children: _jsxs(\"svg\", { width: width, height: height, xmlns: \"http://www.w3.org/2000/svg\", xmlnsXlink: \"http://www.w3.org/1999/xlink\", viewBox: [0, 0, w, height].toString(), children: [_jsx(SVGBackground, { width: w, height: height }), _jsx(VerticalAxisRaw, { model: model }), _jsxs(\"g\", { transform: `translate(${borderX} 0)`, children: [_jsx(GridRaw, { model: model }), _jsx(\"defs\", { children: _jsx(\"clipPath\", { id: \"clip-ruler\", children: _jsx(\"rect\", { x: 0, y: 0, width: viewWidth, height: viewHeight }) }) }), _jsx(\"g\", { clipPath: \"url(#clip-ruler)\", children: displayResults.map(({ result }, i) => (_jsx(\"g\", { children: result }, i))) })] }), _jsx(\"g\", { transform: `translate(${borderX} ${viewHeight})`, children: _jsx(HorizontalAxisRaw, { model: model }) })] }) }) }));\n}\n"],"names":["SVGBackground","width","height","theme","useTheme","_jsx","stripAlpha","renderToSvg","model","opts","_a","when","themeName","Wrapper","children","session","getSession","borderX","viewWidth","viewHeight","tracks","shift","displayResults","track","display","renderToStaticMarkup","ThemeProvider","createJBrowseTheme","_jsxs","VerticalAxisRaw","GridRaw","result","i","HorizontalAxisRaw"],"mappings":"kIAGe,SAASA,EAAc,CAAE,MAAAC,EAAO,OAAAC,GAAW,CACtD,MAAMC,EAAQC,EAAQ,EACtB,OAAQC,EAAAA,IAAK,OAAQ,CAAE,EAAG,EAAG,EAAG,EAAG,MAAOJ,EAAO,OAAQC,EAAQ,KAAMI,aAAWH,EAAM,QAAQ,WAAW,OAAO,EAAG,CACzH,CCEO,eAAeI,EAAYC,EAAOC,EAAM,CAC3C,IAAIC,EACJ,MAAMC,EAAK,IAAMH,EAAM,WAAW,EAClC,KAAM,CAAE,UAAAI,EAAY,UAAW,QAAAC,EAAU,CAAC,CAAE,SAAAC,CAAQ,IAAOA,CAAQ,EAAKL,EAClEM,EAAUC,EAAAA,WAAWR,CAAK,EAC1BL,GAASO,EAAKK,EAAQ,aAAe,MAAQL,IAAO,OAAS,OAASA,EAAG,KAAKK,CAAO,EAAEH,CAAS,EAChG,CAAE,MAAAX,EAAO,QAAAgB,EAAS,UAAAC,EAAW,WAAAC,EAAY,OAAAC,EAAQ,OAAAlB,CAAM,EAAKM,EAC5Da,EAAQ,GACRC,EAAiB,MAAM,QAAQ,IAAIF,EAAO,IAAI,MAAOG,GAAU,CACjE,MAAMC,EAAUD,EAAM,SAAS,CAAC,EAChC,aAAMZ,EAAK,IAAOa,EAAQ,QAAU,OAAYA,EAAQ,MAAQ,EAAK,EAC9D,CAAE,MAAAD,EAAO,OAAQ,MAAMC,EAAQ,UAAU,CAAE,GAAGf,EAAM,MAAAN,CAAK,CAAE,CAAC,CACvE,CAAC,CAAC,EACI,EAAIF,EAAQoB,EAAQ,EAC1B,OAAOI,EAAAA,qBAAqBpB,EAAAA,IAAKqB,EAAe,CAAE,MAAOC,EAAAA,mBAAmBxB,CAAK,EAAG,SAAUE,EAAAA,IAAKQ,EAAS,CAAE,SAAUe,EAAAA,KAAM,MAAO,CAAE,MAAO3B,EAAO,OAAQC,EAAQ,MAAO,6BAA8B,WAAY,+BAAgC,QAAS,CAAC,EAAG,EAAG,EAAGA,CAAM,EAAE,SAAQ,EAAI,SAAU,CAACG,EAAAA,IAAKL,EAAe,CAAE,MAAO,EAAG,OAAQE,CAAM,CAAE,EAAGG,EAAAA,IAAKwB,EAAiB,CAAE,MAAOrB,CAAK,CAAE,EAAGoB,EAAAA,KAAM,IAAK,CAAE,UAAW,aAAaX,CAAO,MAAO,SAAU,CAACZ,EAAAA,IAAKyB,EAAS,CAAE,MAAOtB,CAAK,CAAE,EAAGH,EAAAA,IAAK,OAAQ,CAAE,SAAUA,EAAAA,IAAK,WAAY,CAAE,GAAI,aAAc,SAAUA,EAAAA,IAAK,OAAQ,CAAE,EAAG,EAAG,EAAG,EAAG,MAAOa,EAAW,OAAQC,CAAU,CAAE,CAAC,CAAE,CAAC,CAAE,EAAGd,EAAAA,IAAK,IAAK,CAAE,SAAU,mBAAoB,SAAUiB,EAAe,IAAI,CAAC,CAAE,OAAAS,CAAM,EAAIC,IAAO3B,EAAAA,IAAK,IAAK,CAAE,SAAU0B,CAAM,EAAIC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAC,CAAE,EAAG3B,EAAAA,IAAK,IAAK,CAAE,UAAW,aAAaY,CAAO,IAAIE,CAAU,IAAK,SAAUd,EAAAA,IAAK4B,EAAmB,CAAE,MAAOzB,CAAK,CAAE,CAAC,CAAE,CAAC,CAAC,CAAE,CAAC,CAAE,CAAC,CAAE,CAAC,CAC/3B","x_google_ignoreList":[0,1]}