import{aa as m,j as o,o as d,m as j,a as C,an as c,cx as b,cy as y,co as S,ap as w,cz as z,u as f,c as h,B as I}from"./index-B3kPj2Rj.js";import{J as B}from"./Menu-Du5emnDs.js";import{L as E}from"./Lock-B5eXzoZz.js";import M from"./ExportSvgDialog-8sixlDZC.js";import{C as R}from"./Container-Dz_A6leC.js";import{G as k}from"./Grid-Gln3XP22.js";import{R as F}from"./Ruler-XFz0F8bK.js";import"./MenuItem-D9_xBR9N.js";import"./dividerClasses-B-wJULXt.js";import"./getThemeProps-BbKRYxDH.js";import"./useThemeProps-B1T1idtA.js";const V=m(o.jsx("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"})),T=m(o.jsx("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"})),H=m(o.jsx("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"})),L=j()(t=>({controls:{position:"absolute",borderRight:`1px solid ${t.palette.divider}`,borderBottom:`1px solid ${t.palette.divider}`,left:0,top:0}})),W=d(function({model:t}){const{classes:e}=L(),[s,n]=C.useState(null);return o.jsxs("div",{className:e.controls,children:[o.jsx(c,{onClick:t.zoomOutButton,title:t.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:t.atMaxBpPerPx||t.lockedFitToWindow,children:o.jsx(b,{})}),o.jsx(c,{onClick:t.zoomInButton,disabled:t.atMinBpPerPx,title:"zoom in",children:o.jsx(y,{})}),o.jsx(c,{onClick:t.rotateCounterClockwiseButton,title:"rotate counter-clockwise",children:o.jsx(T,{})}),o.jsx(c,{onClick:t.rotateClockwiseButton,title:"rotate clockwise",children:o.jsx(H,{})}),o.jsx(c,{onClick:t.toggleFitToWindowLock,title:t.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:t.tooSmallToLock,children:t.lockedFitToWindow?o.jsx(E,{}):o.jsx(V,{})}),o.jsx(c,{onClick:r=>{n(r.currentTarget)},children:o.jsx(S,{})}),t.hideTrackSelectorButton?null:o.jsx(c,{onClick:t.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",children:o.jsx(w.TrackSelector,{})}),s?o.jsx(B,{anchorEl:s,menuItems:[{label:"Export SVG",icon:z,onClick:()=>{f.getSession(t).queueDialog(r=>[M,{model:t,handleClose:r}])}}],onMenuItemClick:(r,a)=>{a(),n(null)},open:!!s,onClose:()=>{n(null)}}):null]})}),$=j()(t=>({importFormContainer:{padding:t.spacing(6)}})),N=d(function({model:t}){const{classes:e}=$(),s=f.getSession(t),{error:n}=t,{assemblyNames:r,assemblyManager:a}=s,[u,g]=C.useState(r[0]),i=a.get(u),p=r.length?i?.error:"No configured assemblies",l=i?.regions||[],x=p||n;return o.jsxs(R,{className:e.importFormContainer,children:[x?o.jsx(k,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:o.jsx(h.ErrorMessage,{error:x})}):null,o.jsxs(k,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[o.jsx(h.AssemblySelector,{onChange:v=>{t.setError(void 0),g(v)},session:s,selected:u}),o.jsx(I,{disabled:!l.length,onClick:()=>{t.setError(void 0),t.setDisplayedRegions(l)},variant:"contained",color:"primary",children:l.length||x?"Open":"Loading..."})]})]})}),O=3,P=j()(t=>({root:{position:"relative",marginBottom:t.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}})),A=d(({model:t})=>o.jsxs(o.Fragment,{children:[t.staticSlices.map(e=>o.jsx(F,{model:t,slice:e},f.assembleLocString(e.region.elided?e.region.regions[0]:e.region))),t.tracks.map(e=>{const s=e.displays[0];return o.jsx(s.RenderingComponent,{display:s,view:t},s.id)})]})),ot=d(({model:t})=>{const e=!!t.displayedRegions.length&&!!t.figureWidth&&!!t.figureHeight&&t.initialized,s=!e&&!t.disableImportForm,n=e&&!s;return s||t.error?o.jsx(N,{model:t}):n?o.jsx(D,{model:t}):null}),D=d(function({model:t}){const{width:e,height:s,id:n,offsetRadians:r,centerXY:a,figureWidth:u,figureHeight:g,hideVerticalResizeHandle:i}=t,{classes:p}=P();return o.jsxs("div",{className:p.root,style:{width:e,height:s},"data-testid":n,children:[o.jsx("div",{className:p.scroller,style:{width:e,height:s},children:o.jsx("svg",{style:{transform:`rotate(${r}rad)`,transition:"transform 0.5s",transformOrigin:a.map(l=>`${l}px`).join(" "),position:"absolute",left:0,top:0},width:u,height:g,children:o.jsx("g",{transform:`translate(${a})`,children:o.jsx(A,{model:t})})})}),o.jsx(W,{model:t}),i?null:o.jsx(h.ResizeHandle,{onDrag:t.resizeHeight,style:{height:O,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}})]})});export{ot as default};
//# sourceMappingURL=CircularView-CUYFFQJb.js.map
