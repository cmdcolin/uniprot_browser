{"version":3,"file":"Highlight-DuIwNv60.js","sources":["../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/components/Highlight.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useRef, useState } from 'react';\nimport { Menu } from '@jbrowse/core/ui';\nimport { getSession } from '@jbrowse/core/util';\nimport { colord } from '@jbrowse/core/util/colord';\nimport BookmarkIcon from '@mui/icons-material/Bookmark';\nimport CloseIcon from '@mui/icons-material/Close';\nimport LinkIcon from '@mui/icons-material/Link';\nimport { IconButton, Tooltip } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => ({\n    highlight: {\n        height: '100%',\n        position: 'absolute',\n        overflow: 'hidden',\n        background: colord(theme.palette.highlight.main).alpha(0.35).toRgbString(),\n    },\n    linkIcon: {\n        color: colord(theme.palette.highlight.main).darken(0.2).toRgbString(),\n    },\n    z3: {\n        zIndex: 3,\n    },\n}));\nconst Highlight = observer(function ({ model, highlight, }) {\n    var _a;\n    const { classes } = useStyles();\n    const [open, setOpen] = useState(false);\n    const anchorEl = useRef(null);\n    const session = getSession(model);\n    const { assemblyManager } = session;\n    const dismissHighlight = () => {\n        model.removeHighlight(highlight);\n    };\n    function handleClose() {\n        setOpen(false);\n    }\n    const mapCoords = (r) => {\n        const s = model.bpToPx({\n            refName: r.refName,\n            coord: r.start,\n        });\n        const e = model.bpToPx({\n            refName: r.refName,\n            coord: r.end,\n        });\n        return s && e\n            ? {\n                width: Math.max(Math.abs(e.offsetPx - s.offsetPx), 3),\n                left: Math.min(s.offsetPx, e.offsetPx) - model.offsetPx,\n            }\n            : undefined;\n    };\n    const asm = assemblyManager.get(highlight.assemblyName);\n    const h = mapCoords({\n        ...highlight,\n        refName: (_a = asm === null || asm === void 0 ? void 0 : asm.getCanonicalRefName(highlight.refName)) !== null && _a !== void 0 ? _a : highlight.refName,\n    });\n    return h ? (_jsxs(\"div\", { className: classes.highlight, style: {\n            left: h.left,\n            width: h.width,\n        }, children: [_jsx(Tooltip, { title: \"Highlighted from URL parameter\", arrow: true, children: _jsx(IconButton, { ref: anchorEl, className: classes.z3, onClick: () => {\n                        setOpen(true);\n                    }, children: _jsx(LinkIcon, { fontSize: \"small\", className: classes.linkIcon }) }) }), _jsx(Menu, { anchorEl: anchorEl.current, onMenuItemClick: (_event, callback) => {\n                    callback(session);\n                    handleClose();\n                }, open: open, onClose: handleClose, menuItems: [\n                    {\n                        label: 'Dismiss highlight',\n                        icon: CloseIcon,\n                        onClick: () => {\n                            dismissHighlight();\n                        },\n                    },\n                    {\n                        label: 'Bookmark highlighted region',\n                        icon: BookmarkIcon,\n                        onClick: () => {\n                            let bookmarkWidget = session.widgets.get('GridBookmark');\n                            if (!bookmarkWidget) {\n                                bookmarkWidget = session.addWidget('GridBookmarkWidget', 'GridBookmark');\n                            }\n                            bookmarkWidget.addBookmark(highlight);\n                            dismissHighlight();\n                        },\n                    },\n                ] })] })) : null;\n});\nexport default Highlight;\n"],"names":["useStyles","makeStyles","theme","colord","Highlight","observer","model","highlight","_a","classes","open","setOpen","useState","anchorEl","useRef","session","getSession","assemblyManager","dismissHighlight","handleClose","mapCoords","r","s","e","asm","h","_jsxs","_jsx","Tooltip","IconButton","LinkIcon","Menu","_event","callback","CloseIcon","BookmarkIcon","bookmarkWidget"],"mappings":"2HAWA,MAAMA,EAAYC,EAAU,EAAGC,IAAU,CACrC,UAAW,CACP,OAAQ,OACR,SAAU,WACV,SAAU,SACV,WAAYC,EAAAA,OAAOD,EAAM,QAAQ,UAAU,IAAI,EAAE,MAAM,GAAI,EAAE,YAAW,CAChF,EACI,SAAU,CACN,MAAOC,EAAAA,OAAOD,EAAM,QAAQ,UAAU,IAAI,EAAE,OAAO,EAAG,EAAE,YAAW,CAC3E,EACI,GAAI,CACA,OAAQ,CAChB,CACA,EAAE,EACIE,EAAYC,EAAS,SAAU,CAAE,MAAAC,EAAO,UAAAC,CAAS,EAAK,CACxD,IAAIC,EACJ,KAAM,CAAE,QAAAC,CAAO,EAAKT,EAAS,EACvB,CAACU,EAAMC,CAAO,EAAIC,EAAAA,SAAS,EAAK,EAChCC,EAAWC,EAAAA,OAAO,IAAI,EACtBC,EAAUC,EAAAA,WAAWV,CAAK,EAC1B,CAAE,gBAAAW,CAAe,EAAKF,EACtBG,EAAmB,IAAM,CAC3BZ,EAAM,gBAAgBC,CAAS,CACnC,EACA,SAASY,GAAc,CACnBR,EAAQ,EAAK,CACjB,CACA,MAAMS,EAAaC,GAAM,CACrB,MAAMC,EAAIhB,EAAM,OAAO,CACnB,QAASe,EAAE,QACX,MAAOA,EAAE,KACrB,CAAS,EACKE,EAAIjB,EAAM,OAAO,CACnB,QAASe,EAAE,QACX,MAAOA,EAAE,GACrB,CAAS,EACD,OAAOC,GAAKC,EACN,CACE,MAAO,KAAK,IAAI,KAAK,IAAIA,EAAE,SAAWD,EAAE,QAAQ,EAAG,CAAC,EACpD,KAAM,KAAK,IAAIA,EAAE,SAAUC,EAAE,QAAQ,EAAIjB,EAAM,QAC/D,EACc,MACV,EACMkB,EAAMP,EAAgB,IAAIV,EAAU,YAAY,EAChDkB,EAAIL,EAAU,CAChB,GAAGb,EACH,SAAUC,EAA+CgB,GAAI,oBAAoBjB,EAAU,OAAO,KAAO,MAAQC,IAAO,OAASA,EAAKD,EAAU,OACxJ,CAAK,EACD,OAAOkB,EAAKC,EAAAA,KAAM,MAAO,CAAE,UAAWjB,EAAQ,UAAW,MAAO,CACxD,KAAMgB,EAAE,KACR,MAAOA,EAAE,KACrB,EAAW,SAAU,CAACE,EAAAA,IAAKC,EAAS,CAAE,MAAO,iCAAkC,MAAO,GAAM,SAAUD,EAAAA,IAAKE,EAAY,CAAE,IAAKhB,EAAU,UAAWJ,EAAQ,GAAI,QAAS,IAAM,CACtJE,EAAQ,EAAI,CAChB,EAAG,SAAUgB,EAAAA,IAAKG,EAAU,CAAE,SAAU,QAAS,UAAWrB,EAAQ,SAAU,CAAC,CAAE,CAAC,CAAE,EAAGkB,EAAAA,IAAKI,EAAAA,KAAM,CAAE,SAAUlB,EAAS,QAAS,gBAAiB,CAACmB,EAAQC,IAAa,CACvKA,EAASlB,CAAO,EAChBI,EAAW,CACf,EAAG,KAAMT,EAAM,QAASS,EAAa,UAAW,CAC5C,CACI,MAAO,oBACP,KAAMe,EACN,QAAS,IAAM,CACXhB,EAAgB,CACpB,CACxB,EACoB,CACI,MAAO,8BACP,KAAMiB,EACN,QAAS,IAAM,CACX,IAAIC,EAAiBrB,EAAQ,QAAQ,IAAI,cAAc,EAClDqB,IACDA,EAAiBrB,EAAQ,UAAU,qBAAsB,cAAc,GAE3EqB,EAAe,YAAY7B,CAAS,EACpCW,EAAgB,CACpB,CACxB,CACA,EAAmB,CAAC,CAAC,CAAE,EAAK,IAC5B,CAAC","x_google_ignoreList":[0]}