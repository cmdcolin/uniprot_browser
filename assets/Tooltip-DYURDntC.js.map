{"version":3,"file":"Tooltip-DYURDntC.js","sources":["../../node_modules/@jbrowse/plugin-alignments/esm/LinearSNPCoverageDisplay/components/TooltipContents.js","../../node_modules/@jbrowse/plugin-alignments/esm/LinearSNPCoverageDisplay/components/Tooltip.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef } from 'react';\nimport { toLocale } from '@jbrowse/core/util';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(() => ({\n    td: {\n        whiteSpace: 'nowrap',\n    },\n}));\nconst toP = (s = 0) => +(+s).toFixed(1);\nconst pct = (n, total = 1) => `${toP((n / (total || 1)) * 100)}%`;\nfunction ColorSquare({ base, model, }) {\n    var _a;\n    const { visibleModifications } = model;\n    return base.startsWith('mod_') ? (_jsx(\"div\", { style: {\n            width: 10,\n            height: 10,\n            background: (_a = visibleModifications.get(base.replace('mod_', ''))) === null || _a === void 0 ? void 0 : _a.color,\n        } })) : null;\n}\nconst TooltipContents = forwardRef(function TooltipContents2(props, reactRef) {\n    const { feature, model } = props;\n    const { classes } = useStyles();\n    const start = feature.get('start') + 1;\n    const end = feature.get('end');\n    const name = feature.get('refName');\n    const { refbase, readsCounted, depth, ref, ...info } = feature.get('snpinfo');\n    return (_jsx(\"div\", { ref: reactRef, children: _jsxs(\"table\", { children: [_jsx(\"caption\", { children: [\n                        name,\n                        start === end\n                            ? toLocale(start)\n                            : `${toLocale(start)}..${toLocale(end)}`,\n                    ]\n                        .filter(f => !!f)\n                        .join(':') }), _jsx(\"thead\", { children: _jsxs(\"tr\", { children: [_jsx(\"th\", {}), _jsx(\"th\", { children: \"Base\" }), _jsx(\"th\", { children: \"Count\" }), _jsx(\"th\", { children: \"% of Total\" }), _jsx(\"th\", { children: \"Strands\" })] }) }), _jsxs(\"tbody\", { children: [_jsxs(\"tr\", { children: [_jsx(\"td\", {}), _jsx(\"td\", { children: \"Total\" }), _jsx(\"td\", { children: readsCounted }), _jsx(\"td\", { children: \" \" }), _jsx(\"td\", { children: \" \" })] }), _jsxs(\"tr\", { children: [_jsx(\"td\", {}), _jsxs(\"td\", { children: [\"REF \", refbase ? `(${refbase.toUpperCase()})` : ''] }), _jsx(\"td\", { children: ref.entryDepth }), _jsx(\"td\", { children: pct(ref.entryDepth, readsCounted) }), _jsxs(\"td\", { children: [ref['-1'] ? `${ref['-1']}(-)` : '', ref['1'] ? `${ref['1']}(+)` : ''] })] }), Object.entries(info).map(([key, entry]) => Object.entries(entry).map(([base, score]) => (_jsxs(\"tr\", { children: [_jsx(\"td\", { children: _jsx(ColorSquare, { model: model, base: base }) }), _jsxs(\"td\", { children: [base.toUpperCase(), \" \"] }), _jsx(\"td\", { className: classes.td, children: [\n                                        score.entryDepth,\n                                        score.avgProbability !== undefined\n                                            ? `(avg. ${pct(score.avgProbability)} prob.)`\n                                            : '',\n                                    ]\n                                        .filter(f => !!f)\n                                        .join(' ') }), _jsx(\"td\", { children: base === 'depth' || base === 'skip'\n                                        ? '---'\n                                        : pct(score.entryDepth, readsCounted) }), _jsxs(\"td\", { children: [score['-1'] ? `${score['-1']}(-)` : '', score['1'] ? `${score['1']}(+)` : ''] })] }, `${key}_${base}`))))] })] }) }));\n});\nexport default TooltipContents;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Tooltip } from '@jbrowse/plugin-wiggle';\nimport { observer } from 'mobx-react';\nimport TooltipContents from './TooltipContents';\nconst SNPCoverageTooltip = observer(function (props) {\n    const { model } = props;\n    const { featureUnderMouse: feat } = model;\n    return feat && feat.get('type') === 'skip' ? null : (_jsx(Tooltip, { TooltipContents: TooltipContents, ...props }));\n});\nexport default SNPCoverageTooltip;\n"],"names":["useStyles","makeStyles","toP","s","pct","n","total","ColorSquare","base","model","_a","visibleModifications","_jsx","TooltipContents","forwardRef","props","reactRef","feature","classes","start","end","name","refbase","readsCounted","depth","ref","info","_jsxs","toLocale","f","key","entry","score","SNPCoverageTooltip","observer","feat","Tooltip"],"mappings":"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","x_google_ignoreList":[0,1]}