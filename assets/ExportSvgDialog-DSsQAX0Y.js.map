{"version":3,"file":"ExportSvgDialog-DSsQAX0Y.js","sources":["../../node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/ExportSvgDialog.js"],"sourcesContent":["import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { Dialog, ErrorMessage } from '@jbrowse/core/ui';\nimport { getSession, useLocalStorage } from '@jbrowse/core/util';\nimport { Button, Checkbox, CircularProgress, DialogActions, DialogContent, FormControlLabel, MenuItem, TextField, Typography, } from '@mui/material';\nfunction LoadingMessage() {\n    return (_jsxs(\"div\", { children: [_jsx(CircularProgress, { size: 20, style: { marginRight: 20 } }), _jsx(Typography, { display: \"inline\", children: \"Creating SVG\" })] }));\n}\nfunction TextField2({ children, ...rest }) {\n    return (_jsx(\"div\", { children: _jsx(TextField, { ...rest, children: children }) }));\n}\nfunction useSvgLocal(key, val) {\n    return useLocalStorage(`svg-${key}`, val);\n}\nexport default function ExportSvgDialog({ model, handleClose, }) {\n    const session = getSession(model);\n    const offscreenCanvas = typeof OffscreenCanvas !== 'undefined';\n    const [rasterizeLayers, setRasterizeLayers] = useState(offscreenCanvas);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState();\n    const [filename, setFilename] = useSvgLocal('file', 'jbrowse.svg');\n    const [themeName, setThemeName] = useSvgLocal('theme', session.themeName || 'default');\n    return (_jsxs(Dialog, { open: true, onClose: handleClose, title: \"Export SVG\", children: [_jsxs(DialogContent, { children: [error ? (_jsx(ErrorMessage, { error: error })) : loading ? (_jsx(LoadingMessage, {})) : null, _jsx(TextField2, { helperText: \"filename\", value: filename, onChange: event => {\n                            setFilename(event.target.value);\n                        } }), session.allThemes ? (_jsx(TextField2, { select: true, label: \"Theme\", value: themeName, onChange: event => {\n                            setThemeName(event.target.value);\n                        }, children: Object.entries(session.allThemes()).map(([key, val]) => (_jsx(MenuItem, { value: key, children: val.name || '(Unknown name)' }, key))) })) : null, offscreenCanvas ? (_jsx(FormControlLabel, { control: _jsx(Checkbox, { checked: rasterizeLayers, onChange: () => {\n                                setRasterizeLayers(val => !val);\n                            } }), label: \"Rasterize canvas based tracks? File may be much larger if this is turned off\" })) : (_jsx(Typography, { children: \"Note: rasterizing layers not yet supported in this browser, so SVG size may be large\" }))] }), _jsxs(DialogActions, { children: [_jsx(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                            handleClose();\n                        }, children: \"Cancel\" }), _jsx(Button, { variant: \"contained\", color: \"primary\", type: \"submit\", onClick: async () => {\n                            setLoading(true);\n                            setError(undefined);\n                            try {\n                                await model.exportSvg({\n                                    rasterizeLayers,\n                                    filename,\n                                    themeName,\n                                });\n                                handleClose();\n                            }\n                            catch (e) {\n                                console.error(e);\n                                setError(e);\n                            }\n                            finally {\n                                setLoading(false);\n                            }\n                        }, children: \"Submit\" })] })] }));\n}\n"],"names":["LoadingMessage","_jsxs","_jsx","CircularProgress","Typography","TextField2","children","rest","TextField","useSvgLocal","key","val","useLocalStorage","ExportSvgDialog","model","handleClose","session","getSession","offscreenCanvas","rasterizeLayers","setRasterizeLayers","useState","loading","setLoading","error","setError","filename","setFilename","themeName","setThemeName","Dialog","DialogContent","ErrorMessage","event","MenuItem","FormControlLabel","Checkbox","DialogActions","Button","e"],"mappings":"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","x_google_ignoreList":[0]}