import{o as b,a as u,j as e,d as C,u as y,c as d,m as I,bn as L,P as O,aj as j,f as h,F as A,bo as _,B as w}from"./index-B3kPj2Rj.js";import{M as B}from"./MenuItem-D9_xBR9N.js";import{R as f}from"./RadioGroup-Dc6z2jM9.js";import{R as g}from"./Radio-BrcTy3_C.js";import"./dividerClasses-B-wJULXt.js";const G=b(function({model:t,selectedAssembly:a}){var n;const r=a?t.tracksForAssembly(a):void 0,p=((n=r?.[0])===null||n===void 0?void 0:n.track.trackId)||"",[l,x]=u.useState(p);return u.useEffect(()=>{const o=r?.find(i=>l===i.track.trackId);o&&(t.setFileSource(o.loc),t.setFileType(o.type))},[t,l,r]),e.jsx("div",{children:r?.length?e.jsx(C,{select:!0,label:"Tracks",variant:"outlined",value:l,onChange:o=>{x(o.target.value)},children:r.map(({track:o,label:i})=>e.jsx(B,{value:o.trackId,children:y.coarseStripHTML(i)},o.trackId))}):e.jsx(d.ErrorMessage,{error:`No tracks found for ${a}`})})}),P=I()({container:{margin:"0 auto",maxWidth:"40em",padding:20}}),q=b(function({model:t}){var a;const n=y.getSession(t),{classes:r}=P(),{assemblyNames:p,assemblyManager:l}=n,{loading:x,fileType:o,fileSource:i,isReadyToOpen:S,fileTypes:k,error:F}=t,[c,T]=u.useState(p[0]),[v,E]=u.useState("custom"),m=((a=l.get(c))===null||a===void 0?void 0:a.error)||F,M=L(t);return e.jsxs("div",{children:[m?e.jsx(d.ErrorMessage,{error:m}):null,e.jsxs(O,{className:r.container,children:[x?e.jsx(d.LoadingEllipses,{variant:"h6"}):null,e.jsx("div",{children:e.jsx(j,{component:"fieldset",children:e.jsx(f,{row:!0,"aria-label":"file type",name:"type",value:o,onChange:s=>{E(s.target.value)},children:Object.entries({custom:"Open file from URL or local computer",existing:"Open from track"}).map(([s,R])=>e.jsx(h,{checked:v===s,value:s,control:e.jsx(g,{}),label:R},s))})})}),v==="custom"?e.jsx("div",{children:e.jsx(j,{component:"fieldset",children:e.jsx(A,{children:e.jsx(d.FileSelector,{inline:!0,location:i,rootModel:M,setLocation:s=>{t.setFileSource(s)}})})})}):c?e.jsx(G,{model:t,selectedAssembly:c}):e.jsx("div",{children:"Select assembly"}),e.jsx("div",{children:e.jsxs(j,{component:"fieldset",children:[e.jsx(_,{component:"legend",children:"File Type"}),e.jsx(f,{row:!0,"aria-label":"file type",name:"type",value:o,onChange:s=>{t.setFileType(s.target.value)},children:k.map(s=>e.jsx(h,{checked:o===s,value:s,control:e.jsx(g,{}),label:s},s))})]})}),e.jsx("div",{children:e.jsx(d.AssemblySelector,{session:n,selected:c,onChange:s=>{T(s)}})}),e.jsx("div",{children:e.jsx(w,{disabled:!S||!!m,variant:"contained","data-testid":"open_spreadsheet",color:"primary",onClick:()=>{t.import(c)},children:"Open"})})]})]})});export{q as default};
//# sourceMappingURL=ImportWizard-jVE3ESHN.js.map
