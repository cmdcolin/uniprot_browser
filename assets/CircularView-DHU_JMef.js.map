{"version":3,"file":"CircularView-DHU_JMef.js","sources":["../../node_modules/@mui/icons-material/esm/LockOpen.js","../../node_modules/@mui/icons-material/esm/RotateLeft.js","../../node_modules/@mui/icons-material/esm/RotateRight.js","../../node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/Controls.js","../../node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/ImportForm.js","../../node_modules/@jbrowse/plugin-circular-view/esm/CircularView/components/CircularView.js"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z\"\n}), 'LockOpen');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93\"\n}), 'RotateLeft');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48\"\n}), 'RotateRight');","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { TrackSelector as TrackSelectorIcon } from '@jbrowse/core/ui/Icons';\nimport JBrowseMenu from '@jbrowse/core/ui/Menu';\nimport { getSession } from '@jbrowse/core/util';\nimport LockIcon from '@mui/icons-material/Lock';\nimport LockOpenIcon from '@mui/icons-material/LockOpen';\nimport MoreVert from '@mui/icons-material/MoreVert';\nimport PhotoCamera from '@mui/icons-material/PhotoCamera';\nimport RotateLeftIcon from '@mui/icons-material/RotateLeft';\nimport RotateRightIcon from '@mui/icons-material/RotateRight';\nimport ZoomInIcon from '@mui/icons-material/ZoomIn';\nimport ZoomOutIcon from '@mui/icons-material/ZoomOut';\nimport { IconButton } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nimport ExportSvgDialog from './ExportSvgDialog';\nconst useStyles = makeStyles()(theme => ({\n    controls: {\n        position: 'absolute',\n        borderRight: `1px solid ${theme.palette.divider}`,\n        borderBottom: `1px solid ${theme.palette.divider}`,\n        left: 0,\n        top: 0,\n    },\n}));\nconst Controls = observer(function ({ model }) {\n    const { classes } = useStyles();\n    const [anchorEl, setAnchorEl] = useState(null);\n    return (_jsxs(\"div\", { className: classes.controls, children: [_jsx(IconButton, { onClick: model.zoomOutButton, title: model.lockedFitToWindow ? 'unlock to zoom out' : 'zoom out', disabled: model.atMaxBpPerPx || model.lockedFitToWindow, children: _jsx(ZoomOutIcon, {}) }), _jsx(IconButton, { onClick: model.zoomInButton, disabled: model.atMinBpPerPx, title: \"zoom in\", children: _jsx(ZoomInIcon, {}) }), _jsx(IconButton, { onClick: model.rotateCounterClockwiseButton, title: \"rotate counter-clockwise\", children: _jsx(RotateLeftIcon, {}) }), _jsx(IconButton, { onClick: model.rotateClockwiseButton, title: \"rotate clockwise\", children: _jsx(RotateRightIcon, {}) }), _jsx(IconButton, { onClick: model.toggleFitToWindowLock, title: model.lockedFitToWindow\n                    ? 'locked model to window size'\n                    : 'unlocked model to zoom further', disabled: model.tooSmallToLock, children: model.lockedFitToWindow ? _jsx(LockIcon, {}) : _jsx(LockOpenIcon, {}) }), _jsx(IconButton, { onClick: event => {\n                    setAnchorEl(event.currentTarget);\n                }, children: _jsx(MoreVert, {}) }), model.hideTrackSelectorButton ? null : (_jsx(IconButton, { onClick: model.activateTrackSelector, title: \"Open track selector\", \"data-testid\": \"circular_track_select\", children: _jsx(TrackSelectorIcon, {}) })), anchorEl ? (_jsx(JBrowseMenu, { anchorEl: anchorEl, menuItems: [\n                    {\n                        label: 'Export SVG',\n                        icon: PhotoCamera,\n                        onClick: () => {\n                            getSession(model).queueDialog(handleClose => [\n                                ExportSvgDialog,\n                                { model, handleClose },\n                            ]);\n                        },\n                    },\n                ], onMenuItemClick: (_event, callback) => {\n                    callback();\n                    setAnchorEl(null);\n                }, open: Boolean(anchorEl), onClose: () => {\n                    setAnchorEl(null);\n                } })) : null] }));\n});\nexport default Controls;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState } from 'react';\nimport { AssemblySelector, ErrorMessage } from '@jbrowse/core/ui';\nimport { getSession } from '@jbrowse/core/util';\nimport { Button, Container, Grid } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => ({\n    importFormContainer: {\n        padding: theme.spacing(6),\n    },\n}));\nconst ImportForm = observer(function ({ model }) {\n    const { classes } = useStyles();\n    const session = getSession(model);\n    const { error } = model;\n    const { assemblyNames, assemblyManager } = session;\n    const [selectedAsm, setSelectedAsm] = useState(assemblyNames[0]);\n    const assembly = assemblyManager.get(selectedAsm);\n    const assemblyError = assemblyNames.length\n        ? assembly === null || assembly === void 0 ? void 0 : assembly.error\n        : 'No configured assemblies';\n    const regions = (assembly === null || assembly === void 0 ? void 0 : assembly.regions) || [];\n    const err = assemblyError || error;\n    return (_jsxs(Container, { className: classes.importFormContainer, children: [err ? (_jsx(Grid, { container: true, spacing: 1, justifyContent: \"center\", alignItems: \"center\", children: _jsx(ErrorMessage, { error: err }) })) : null, _jsxs(Grid, { container: true, spacing: 1, justifyContent: \"center\", alignItems: \"center\", children: [_jsx(AssemblySelector, { onChange: val => {\n                            model.setError(undefined);\n                            setSelectedAsm(val);\n                        }, session: session, selected: selectedAsm }), _jsx(Button, { disabled: !regions.length, onClick: () => {\n                            model.setError(undefined);\n                            model.setDisplayedRegions(regions);\n                        }, variant: \"contained\", color: \"primary\", children: regions.length || err ? 'Open' : 'Loading...' })] })] }));\n});\nexport default ImportForm;\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { ResizeHandle } from '@jbrowse/core/ui';\nimport { assembleLocString } from '@jbrowse/core/util';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nimport Controls from './Controls';\nimport ImportForm from './ImportForm';\nimport Ruler from './Ruler';\nconst dragHandleHeight = 3;\nconst useStyles = makeStyles()(theme => ({\n    root: {\n        position: 'relative',\n        marginBottom: theme.spacing(1),\n        overflow: 'hidden',\n    },\n    scroller: {\n        overflow: 'auto',\n    },\n}));\nconst Slices = observer(({ model }) => {\n    return (_jsxs(_Fragment, { children: [model.staticSlices.map(slice => (_jsx(Ruler, { model: model, slice: slice }, assembleLocString(slice.region.elided ? slice.region.regions[0] : slice.region)))), model.tracks.map(track => {\n                const display = track.displays[0];\n                return (_jsx(display.RenderingComponent, { display: display, view: model }, display.id));\n            })] }));\n});\nconst CircularView = observer(({ model }) => {\n    const initialized = !!model.displayedRegions.length &&\n        !!model.figureWidth &&\n        !!model.figureHeight &&\n        model.initialized;\n    const showImportForm = !initialized && !model.disableImportForm;\n    const showFigure = initialized && !showImportForm;\n    return showImportForm || model.error ? (_jsx(ImportForm, { model: model })) : showFigure ? (_jsx(CircularViewLoaded, { model: model })) : null;\n});\nconst CircularViewLoaded = observer(function ({ model, }) {\n    const { width, height, id, offsetRadians, centerXY, figureWidth, figureHeight, hideVerticalResizeHandle, } = model;\n    const { classes } = useStyles();\n    return (_jsxs(\"div\", { className: classes.root, style: { width, height }, \"data-testid\": id, children: [_jsx(\"div\", { className: classes.scroller, style: { width, height }, children: _jsx(\"svg\", { style: {\n                        transform: `rotate(${offsetRadians}rad)`,\n                        transition: 'transform 0.5s',\n                        transformOrigin: centerXY.map(x => `${x}px`).join(' '),\n                        position: 'absolute',\n                        left: 0,\n                        top: 0,\n                    }, width: figureWidth, height: figureHeight, children: _jsx(\"g\", { transform: `translate(${centerXY})`, children: _jsx(Slices, { model: model }) }) }) }), _jsx(Controls, { model: model }), hideVerticalResizeHandle ? null : (_jsx(ResizeHandle, { onDrag: model.resizeHeight, style: {\n                    height: dragHandleHeight,\n                    position: 'absolute',\n                    bottom: 0,\n                    left: 0,\n                    background: '#ccc',\n                    boxSizing: 'border-box',\n                    borderTop: '1px solid #fafafa',\n                } }))] }));\n});\nexport default CircularView;\n"],"names":["LockOpenIcon","createSvgIcon","_jsx","RotateLeftIcon","RotateRightIcon","useStyles","makeStyles","theme","Controls","observer","model","classes","anchorEl","setAnchorEl","useState","_jsxs","IconButton","ZoomOutIcon","ZoomInIcon","LockIcon","event","MoreVert","TrackSelectorIcon","JBrowseMenu","PhotoCamera","getSession","handleClose","ExportSvgDialog","_event","callback","ImportForm","session","error","assemblyNames","assemblyManager","selectedAsm","setSelectedAsm","assembly","assemblyError","regions","err","Container","Grid","ErrorMessage","AssemblySelector","val","Button","dragHandleHeight","Slices","_Fragment","slice","Ruler","assembleLocString","track","display","CircularView","initialized","showImportForm","showFigure","CircularViewLoaded","width","height","id","offsetRadians","centerXY","figureWidth","figureHeight","hideVerticalResizeHandle","x","ResizeHandle"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}