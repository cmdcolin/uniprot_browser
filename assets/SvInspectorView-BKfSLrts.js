import{bN as x,fu as Mt,du as Ct,fv as wt,j as M,fZ as le,cz as U,bM as ce,c as H,bO as z,fw as St,fx as kt,fy as $t,fz as Pt,fA as Dt,fB as Tt,fC as Et,fD as it,eu as Ot,ev as Bt,ew as Lt,ex as Ft,ey as It,ez as Rt,eA as At,db as zt,f_ as Ht,f$ as qt,g0 as lt,fG as Nt,g1 as Vt,o as ct,m as ut,h as Ut,C as Wt}from"./index-CT2bM4yV.js";var Te={},dt={};(function(e){var t=x&&x.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultThemes=void 0,e.createJBrowseBaseTheme=Z,e.createJBrowseTheme=R;const n=wt,r=Ct,a=t(Mt),o=(0,r.createTheme)(),s="#0D233F",_="#721E63",b=o.palette.augmentColor({color:{main:"#135560"}}),C=o.palette.augmentColor({color:{main:"#FFB11D"}}),j=o.palette.augmentColor({color:{main:"#aaa"}}),y={A:o.palette.augmentColor({color:n.green}),C:o.palette.augmentColor({color:n.blue}),G:o.palette.augmentColor({color:n.orange}),T:o.palette.augmentColor({color:n.red})},w=[null,o.palette.augmentColor({color:{main:"#FF8080"}}),o.palette.augmentColor({color:{main:"#80FF80"}}),o.palette.augmentColor({color:{main:"#8080FF"}}),o.palette.augmentColor({color:{main:"#8080FF"}}),o.palette.augmentColor({color:{main:"#80FF80"}}),o.palette.augmentColor({color:{main:"#FF8080"}})],h=[null,o.palette.augmentColor({color:{main:"#8f8f8f"}}),o.palette.augmentColor({color:{main:"#adadad"}}),o.palette.augmentColor({color:{main:"#d8d8d8"}}),o.palette.augmentColor({color:{main:"#d8d8d8"}}),o.palette.augmentColor({color:{main:"#adadad"}}),o.palette.augmentColor({color:{main:"#8f8f8f"}})],S="#e22",k="#3e3",u="#800080",f="#808080",d="#f00",p="#00f",m="#97b8c9",c={quaternary:C,highlight:C,stopCodon:S,startCodon:k,insertion:u,deletion:f,softclip:p,hardclip:d,bases:y,frames:h,framesCDS:w,skip:m};function l(){return{palette:{...c,mode:void 0,primary:{main:s},secondary:{main:_},tertiary:b},components:{MuiLink:{styleOverrides:{root:({theme:v})=>({color:v.palette.tertiary.main})}}}}}function D(){return{...l(),name:"Default (from config)"}}function O(){return{...l(),name:"Light (stock)"}}function i(){return{name:"Dark (stock)",palette:{...c,mode:"dark"},components:{MuiAppBar:{defaultProps:{enableColorOnDark:!0},styleOverrides:{root:({theme:v})=>v.palette.primary.main}}}}}function $(){return{name:"Dark (minimal)",palette:{...c,mode:"dark",primary:{main:n.grey[700]},secondary:{main:n.grey[800]},tertiary:o.palette.augmentColor({color:{main:n.grey[900]}})}}}function I(){return{name:"Light (minimal)",palette:{...c,primary:{main:n.grey[900]},secondary:{main:n.grey[800]},tertiary:o.palette.augmentColor({color:{main:n.grey[900]}})}}}e.defaultThemes={default:D(),lightStock:O(),lightMinimal:I(),darkMinimal:$(),darkStock:i()};function L(v,g){return g}function Z(v){var g,q,Me,Ce,we,Se;const jt={palette:v==null?void 0:v.palette,typography:{fontSize:12},spacing:4,components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:12}}},MuiButton:{defaultProps:{size:"small"},styleOverrides:{root:({theme:F})=>F.palette.mode==="dark"?{color:F.palette.text.primary}:void 0}},MuiAccordion:{defaultProps:{disableGutters:!0,slotProps:{transition:{timeout:150,unmountOnExit:!0}}}},MuiFilledInput:{defaultProps:{margin:"dense"}},MuiFormControl:{defaultProps:{margin:"dense",size:"small"}},MuiFormHelperText:{defaultProps:{margin:"dense"}},MuiIconButton:{defaultProps:{size:"small"}},MuiInputBase:{defaultProps:{margin:"dense"}},MuiAutocomplete:{defaultProps:{size:"small"}},MuiInputLabel:{defaultProps:{margin:"dense"}},MuiToolbar:{defaultProps:{variant:"dense"}},MuiListItem:{defaultProps:{dense:!0}},MuiOutlinedInput:{defaultProps:{margin:"dense"}},MuiFab:{defaultProps:{size:"small"},styleOverrides:{secondary:{backgroundColor:(q=(g=v==null?void 0:v.palette)===null||g===void 0?void 0:g.quaternary)===null||q===void 0?void 0:q.main}}},MuiTable:{defaultProps:{size:"small"}},MuiPopover:{defaultProps:{transitionDuration:0}},MuiMenu:{defaultProps:{transitionDuration:0}},MuiMenuItem:{defaultProps:{dense:!0}},MuiTextField:{defaultProps:{margin:"dense",variant:"standard"}},MuiLink:{styleOverrides:{root:({theme:F})=>({color:F.palette.text.secondary})}},MuiCheckbox:{styleOverrides:{root:({theme:F})=>F.palette.mode==="dark"?{color:F.palette.text.secondary,"&.Mui-checked":{color:F.palette.text.secondary}}:void 0}},MuiRadio:{styleOverrides:{root:({theme:F})=>F.palette.mode==="dark"?{color:F.palette.text.secondary,"&.Mui-checked":{color:F.palette.text.secondary}}:void 0}},MuiFormLabel:{styleOverrides:{root:({theme:F})=>F.palette.mode==="dark"?{color:F.palette.text.secondary,"&.Mui-focused":{color:F.palette.text.secondary}}:void 0}},MuiAccordionSummary:{styleOverrides:{root:{backgroundColor:(Ce=(Me=v==null?void 0:v.palette)===null||Me===void 0?void 0:Me.tertiary)===null||Ce===void 0?void 0:Ce.main},content:{color:(Se=(we=v==null?void 0:v.palette)===null||we===void 0?void 0:we.tertiary)===null||Se===void 0?void 0:Se.contrastText}}},MuiToggleButtonGroup:{defaultProps:{size:"small"}}}};return(0,a.default)(jt,v||{},{arrayMerge:L})}function R(v={},g=e.defaultThemes,q="default"){return(0,r.createTheme)(Z(q==="default"?(0,a.default)(g.default,W(v),{arrayMerge:L}):re(g[q])))}function W(v={}){var g;for(const q of["tertiary","quaternary","highlight"])!((g=v.palette)===null||g===void 0)&&g[q]&&(v=(0,a.default)(v,{palette:{[q]:o.palette.augmentColor("color"in v.palette[q]?v.palette[q]:{color:v.palette[q]})}}));return v}function re(v={}){const{palette:g}=v;return W((0,a.default)(v,{palette:{quaternary:(g==null?void 0:g.quaternary)||j,tertiary:(g==null?void 0:g.tertiary)||j,highlight:(g==null?void 0:g.highlight)||C,insertion:(g==null?void 0:g.insertion)||u,softclip:(g==null?void 0:g.softclip)||p,skip:(g==null?void 0:g.skip)||m,hardclip:(g==null?void 0:g.hardclip)||d,deletion:(g==null?void 0:g.deletion)||f,startCodon:(g==null?void 0:g.startCodon)||k,stopCodon:(g==null?void 0:g.stopCodon)||S}}))}})(dt);var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.Logomark=Jt;ye.LogoFull=Gt;const B=M;function ft(e){return e==="black"?{midnight:"#808080",forrest:"#666666",grape:"#4d4d4d",mandarin:"#333333",gray:"#1a1a1a"}:e==="white"?{midnight:"#ffffff",forrest:"#e6e6e6",grape:"#cccccc",mandarin:"#b3b3b3",gray:"#999999"}:{midnight:"#0d233f",forrest:"#135560",grape:"#721e63",mandarin:"#ffb11d",gray:"#dadada"}}function Jt({variant:e}){return(0,B.jsx)("svg",{viewBox:"0 0 175 175",children:(0,B.jsx)(pt,{variant:e})})}function Gt({variant:e}){return(0,B.jsxs)("svg",{viewBox:"0 0 641 175",children:[(0,B.jsx)(Kt,{variant:e}),(0,B.jsx)(pt,{variant:e})]})}function pt({variant:e}){const t=ft(e);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("path",{style:{fill:t.midnight},d:"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z"}),(0,B.jsx)("path",{style:{fill:t.forrest},d:"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z"}),(0,B.jsx)("path",{style:{fill:t.grape},d:"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z"}),(0,B.jsx)("path",{style:{fill:t.mandarin},d:"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z"}),(0,B.jsx)("path",{style:{fill:t.gray},d:"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z"})]})}function Kt({variant:e}){const t=ft(e);return(0,B.jsxs)("g",{"aria-label":"JBrowse",transform:"translate(213.084 144.241)",style:{fill:t.midnight},children:[(0,B.jsx)("path",{d:"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z"}),(0,B.jsx)("path",{d:"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z"}),(0,B.jsx)("path",{d:"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z"}),(0,B.jsx)("path",{d:"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z"}),(0,B.jsx)("path",{d:"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z"}),(0,B.jsx)("path",{d:"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z"}),(0,B.jsx)("path",{d:"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z"})]})}var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});const Je=M,Ge=H,Ke=z,Zt=ce,Xt=U,Qt=le(),Yt=(0,Xt.makeStyles)()({importFormEntry:{minWidth:180}}),en=(0,Zt.observer)(function({session:e,onChange:t,label:n="Assembly",selected:r,InputProps:a,TextFieldProps:o,localStorageKey:s,helperText:_="Select assembly to view"}){const{classes:b}=Yt(),{assemblyNames:C,assemblyManager:j}=e,y=new URLSearchParams(window.location.search).get("config"),[w,h]=typeof jest>"u"&&s?(0,Qt.useLocalStorage)(`lastAssembly-${[window.location.host+window.location.pathname,y,s].join("-")}`,r):(0,Ge.useState)(r),S=C.includes(w||"")?w:r;(0,Ge.useEffect)(()=>{S&&S!==r&&t(S)},[S,t,r]);const k=C.length?"":"No configured assemblies";return(0,Je.jsx)(Ke.TextField,{select:!0,"data-testid":"assembly-selector-textfield",label:n,variant:"outlined",helperText:k||_,value:S||"",onChange:u=>{h(u.target.value)},error:!!k,disabled:!!k,className:b.importFormEntry,...o,slotProps:{input:a,htmlInput:{"data-testid":"assembly-selector"}},children:C.map(u=>{var f;return(0,Je.jsx)(Ke.MenuItem,{value:u,children:((f=j.get(u))===null||f===void 0?void 0:f.displayName)||u},u)})})});Oe.default=en;var ve={},te={},ue=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(te,"__esModule",{value:!0});te.MenuItemEndDecoration=Ee;const E=M,V=H,tn=ue(St),nn=ue(kt),rn=ue($t),on=ue(Pt),an=ue(Dt),J=z,sn=U,ln=le(),gt=(0,sn.makeStyles)()({paper:{position:"fixed",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",top:0,left:0,outline:0},menuItemEndDecoration:{padding:0,margin:0,height:16}});function Ee(e){const{classes:t}=gt(),{type:n}=e;let r,a;"checked"in e&&({checked:r,disabled:a}=e);let o;switch(n){case"subMenu":{o=(0,E.jsx)(tn.default,{color:"action"});break}case"checkbox":{if(r){const s=a?"inherit":void 0;o=(0,E.jsx)(nn.default,{color:s})}else o=(0,E.jsx)(rn.default,{color:"action"});break}case"radio":{if(r){const s=a?"inherit":void 0;o=(0,E.jsx)(on.default,{color:s})}else o=(0,E.jsx)(an.default,{color:"action"});break}}return(0,E.jsx)("div",{className:t.menuItemEndDecoration,children:o})}function ht(e){return e.type!=="divider"&&e.type!=="subHeader"&&!e.disabled}function cn(e,t){const n=e.slice(t+1).findIndex(ht);return n===-1?n:t+1+n}function un(e,t){return(0,ln.findLastIndex)(e.slice(0,t),ht)}const mt=(0,V.forwardRef)(function(t,n){const[r,a]=(0,V.useState)(),[o,s]=(0,V.useState)(),[_,b]=(0,V.useState)(!1),[C,j]=(0,V.useState)(),[y,w]=(0,V.useState)(),h=(0,V.useRef)(null),{classes:S}=gt(),{menuItems:k,onMenuItemClick:u,open:f,onClose:d,anchorEl:p,top:m=!1}=t;(0,V.useEffect)(()=>{f||(a(void 0),s(void 0))},[f]),(0,V.useEffect)(()=>{const i=f&&!!r;let $;return i&&!_?$=setTimeout(()=>{b(!0)},300):!i&&_&&($=setTimeout(()=>{b(!1)},300)),()=>{clearTimeout($)}},[_,f,r]),(0,V.useEffect)(()=>{if(p){const i=p.getBoundingClientRect();y?(i.top!==y.top||i.left+i.width!==y.left)&&w({top:i.top,left:i.left+i.width}):w({top:i.top,left:i.left+i.width})}else y||w({})},[y,p]);const c=k.some(i=>"icon"in i&&i.icon),l={};function D(i){return $=>{u($,i)}}const O=(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(J.MenuList,{autoFocusItem:f&&!_,dense:!0,children:k.sort((i,$)=>($.priority||0)-(i.priority||0)).map((i,$)=>{if(i.type==="divider")return(0,E.jsx)(J.Divider,{component:"li"},`divider-${JSON.stringify(i)}-${$}`);if(i.type==="subHeader")return(0,E.jsx)(J.ListSubheader,{children:i.label},`subHeader-${i.label}-${$}`);let I=null,L=null;if(i.icon){const R=i.icon;I=(0,E.jsx)(J.ListItemIcon,{children:(0,E.jsx)(R,{})})}"subMenu"in i?L=(0,E.jsx)(Ee,{type:"subMenu"}):(i.type==="checkbox"||i.type==="radio")&&(L=(0,E.jsx)(Ee,{type:i.type,checked:i.checked,disabled:i.disabled}));const Z="onClick"in i?D(i.onClick):void 0;return(0,E.jsxs)(J.MenuItem,{style:l,selected:$===C,onClick:Z,onMouseMove:R=>{R.currentTarget!==document.activeElement&&(R.currentTarget.focus(),j($)),"subMenu"in i?o!==$&&(a(R.currentTarget),s($)):(a(void 0),s(void 0))},onKeyDown:R=>{switch(R.key){case"ArrowLeft":case"Escape":{d==null||d(R,"escapeKeyDown");break}case"ArrowUp":{j(un(k,$));break}case"ArrowDown":{const W=cn(k,$);j(W);break}default:"subMenu"in i&&(R.key==="ArrowRight"||R.key==="Enter")&&(a(R.currentTarget),s($),b(!0))}},disabled:!!i.disabled,children:[I,(0,E.jsx)(J.ListItemText,{primary:i.label,secondary:i.subLabel,inset:c&&!i.icon}),L]},i.id||String(i.label))})}),k.map((i,$)=>{let I=null;return"subMenu"in i&&(I=(0,E.jsx)(mt,{anchorEl:r,open:_&&o===$,onClose:()=>{b(!1),a(void 0)},onMenuItemClick:u,menuItems:i.subMenu},i.id||String(i.label))),I})]});return m?O:(0,E.jsx)(J.Grow,{in:f,style:{transformOrigin:"0 0 0"},ref:n,children:(0,E.jsx)(J.Paper,{elevation:8,ref:h,className:S.paper,style:{...y},children:O})})});function dn(e){const{open:t,onClose:n,menuItems:r,onMenuItemClick:a,...o}=e;return(0,E.jsx)(J.Popover,{open:t,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"right",...o.anchorOrigin},transformOrigin:{vertical:"top",horizontal:"left",...o.transformOrigin},...o,children:(0,E.jsx)(mt,{open:t,onClose:n,menuItems:r,onMenuItemClick:a,top:!0})})}te.default=dn;var _t=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ve,"__esModule",{value:!0});const P=M,Q=H,fn=_t(Tt),G=z,pn=_t(Et),ie=it,Ze=te,ne=(0,Q.createContext)({parentPopupState:null,rootPopupState:null});function gn({onClick:e,closeAfterItemClick:t,...n}){const{rootPopupState:r}=(0,Q.useContext)(ne);if(!r)throw new Error("must be used inside a CascadingMenu");return(0,P.jsx)(G.MenuItem,{...n,onClick:a=>{t&&r.close(),e==null||e(a)}})}function hn({title:e,Icon:t,inset:n,popupId:r,...a}){const{parentPopupState:o}=(0,Q.useContext)(ne),s=(0,ie.usePopupState)({popupId:r,variant:"popover",parentPopupState:o});return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(G.MenuItem,{...(0,ie.bindHover)(s),...(0,ie.bindFocus)(s),children:[t?(0,P.jsx)(G.ListItemIcon,{children:(0,P.jsx)(t,{})}):null,(0,P.jsx)(G.ListItemText,{primary:e,inset:n}),(0,P.jsx)(fn.default,{})]}),(0,P.jsx)(mn,{...a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},popupState:s})]})}function mn({popupState:e,onMenuItemClick:t,menuItems:n,classes:r,...a}){const{rootPopupState:o}=(0,Q.useContext)(ne),s=(0,Q.useMemo)(()=>({rootPopupState:o||e,parentPopupState:e}),[o,e]);return(0,P.jsx)(ne.Provider,{value:s,children:(0,P.jsx)(pn.default,{...a,...(0,ie.bindMenu)(e)})})}function _n({popupState:e,onMenuItemClick:t,menuItems:n,...r}){const{rootPopupState:a}=(0,Q.useContext)(ne),o=(0,Q.useMemo)(()=>({rootPopupState:a||e,parentPopupState:e}),[a,e]);return(0,P.jsx)(ne.Provider,{value:o,children:(0,P.jsx)(G.Menu,{...r,...(0,ie.bindMenu)(e)})})}function yn({item:e}){return"subMenu"in e?(0,P.jsx)(Ze.MenuItemEndDecoration,{type:"subMenu"}):e.type==="checkbox"||e.type==="radio"?(0,P.jsx)(Ze.MenuItemEndDecoration,{type:e.type,checked:e.checked,disabled:e.disabled}):null}function yt({onMenuItemClick:e,closeAfterItemClick:t,menuItems:n,...r}){function a(s){return _=>{e(_,s)}}const o=n.some(s=>"icon"in s&&s.icon);return(0,P.jsx)(P.Fragment,{children:n.sort((s,_)=>(_.priority||0)-(s.priority||0)).map((s,_)=>"subMenu"in s?(0,P.jsx)(hn,{popupId:`subMenu-${s.label}`,title:s.label,Icon:s.icon,inset:o&&!s.icon,onMenuItemClick:e,menuItems:s.subMenu,children:(0,P.jsx)(yt,{...r,closeAfterItemClick:t,onMenuItemClick:e,menuItems:s.subMenu})},`subMenu-${s.label}-${_}`):s.type==="divider"?(0,P.jsx)(G.Divider,{component:"li"},`divider-${JSON.stringify(s)}-${_}`):s.type==="subHeader"?(0,P.jsx)(G.ListSubheader,{children:s.label},`subHeader-${s.label}-${_}`):(0,P.jsxs)(gn,{closeAfterItemClick:t,onClick:"onClick"in s?a(s.onClick):void 0,disabled:!!s.disabled,children:[s.icon?(0,P.jsx)(G.ListItemIcon,{children:(0,P.jsx)(s.icon,{})}):null," ",(0,P.jsx)(G.ListItemText,{primary:s.label,secondary:s.subLabel,inset:o&&!s.icon}),(0,P.jsx)("div",{style:{flexGrow:1,minWidth:10}}),(0,P.jsx)(yn,{item:s})]},`${s.label}-${_}`))})}function vn(e){const{closeAfterItemClick:t=!0,...n}=e;return(0,P.jsx)(_n,{...n,children:(0,P.jsx)(yt,{...n,closeAfterItemClick:t})})}ve.default=vn;var Be={},bn=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Be,"__esModule",{value:!0});const de=M,xn=H,jn=bn(ve),Mn=z,ke=it,Cn=ce,wn=(0,Cn.observer)(function({children:t,menuItems:n,closeAfterItemClick:r=!0,stopPropagation:a,setOpen:o,onClick:s,..._}){const b=(0,ke.usePopupState)({popupId:"viewMenu",variant:"popover"}),{onClick:C,onTouchStart:j,...y}=(0,ke.bindTrigger)(b),{isOpen:w}=b;return(0,xn.useEffect)(()=>{o==null||o(w)},[w,o]),(0,de.jsxs)(de.Fragment,{children:[(0,de.jsx)(Mn.IconButton,{onClick:h=>{a&&h.stopPropagation(),C(h),s==null||s()},onTouchStart:h=>{a&&h.stopPropagation(),j(h),s==null||s()},...y,..._,disabled:n.length===0,children:t}),(0,de.jsx)(jn.default,{...(0,ke.bindPopover)(b),onMenuItemClick:(h,S)=>{S()},menuItems:n,closeAfterItemClick:r,popupState:b})]})});Be.default=wn;var fe={},be={};Object.defineProperty(be,"__esModule",{value:!0});be.ErrorBoundary=void 0;const Sn=M,kn=H;class $n extends kn.Component{constructor(t){super(t),this.state={error:void 0}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t})}render(){return this.state.error?(0,Sn.jsx)(this.props.FallbackComponent,{error:this.state.error}):this.props.children}}be.ErrorBoundary=$n;var pe={},Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.default=En;const Pn=M,Dn=U,Tn=(0,Dn.makeStyles)()(e=>({bg:{padding:4,margin:4,overflow:"auto",maxHeight:200,background:e.palette.mode==="dark"?"#833":"#f88",border:`1px solid ${e.palette.divider}`}}));function En({children:e}){const{classes:t}=Tn();return(0,Pn.jsx)("div",{className:t.bg,children:e})}var ge={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.default=Rn;const On=M,Bn=z,Ln=Ot,Fn=U,In=(0,Fn.makeStyles)()({dots:{"&::after":{display:"inline-block",content:'""',width:"1em",textAlign:"left",animation:`${(0,Ln.keyframes)`
      0% {
        content: '';
      }
      25% {
          content: '.';
      }
      50% {
        content: '..';
      }
      75% {
        content: '...';
      }
      `} 1.2s infinite ease-in-out`}}});function Rn({message:e,variant:t="body2",...n}){const{cx:r,classes:a}=In();return(0,On.jsx)(Bn.Typography,{className:r(a.dots,n.className),...n,variant:t,children:e||"Loading"})}var Xe;function An(){if(Xe)return ge;Xe=1;var e=x&&x.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=m;const t=M,n=H,r=z,a=e(Bt()),o=Lt(),s=U,_=e(Ie()),b=e(xe);function C({href:c,children:l}){return(0,t.jsx)(r.Link,{target:"_blank",href:c,children:l})}async function j(c){const l=await fetch(c);if(!l.ok)throw new Error(`HTTP ${l.status} fetching ${c}: ${await l.text()}`);return l}async function y(c){return(await j(c)).json()}async function w(c){return(await j(c)).text()}const h={};async function S(c){var l;if(h[c]!==void 0)return h[c];const D=new URL(c).search,O=await w(c);let i=((l=new RegExp(/\/\/# sourceMappingURL=(.*)/).exec(O))===null||l===void 0?void 0:l[1])||"";i=new URL(i,c).href+D;const $=await y(i),I=new o.SourceMapConsumer($);return h[c]=I,I}async function k(c){const l=c.split(`
`),D=[];for(const O of l){const i=new RegExp(/(.*)(https?:\/\/.*):(\d+):(\d+)/).exec(O);if(i===null){D.push(O);continue}const $=i[2],L=(await S($)).originalPositionFor({line:Number.parseInt(i[3]),column:Number.parseInt(i[4])});if(!L.source||!L.line||!L.column){D.push(O);continue}D.push(`${L.source}:${L.line}:${L.column+1} (${i[1].trim()})`)}return D.join(`
`)}const u=1e4;function f(c,l){if(c.startsWith("Error:")){const D=`${l}`;return c.slice(D.length)}else return c}const d=(0,s.makeStyles)()(c=>({pre:{background:(0,r.alpha)(c.palette.error.main,.2),border:`1px solid ${c.palette.divider}`,overflow:"auto",margin:20,maxHeight:300}}));function p({text:c,extra:l}){const{classes:D}=d(),O=encodeURIComponent(`${[`I got this error from JBrowse, here is the stack trace:
`,"```",c,"```",l?`supporting data: ${JSON.stringify(l,null,2)}`:""].join(`
`)}
`),i=[c,l?`supporting data: ${JSON.stringify(l,null,2)}`:""].join(`
`),$="jbrowse2@berkeley.edu",I=`https://github.com/GMOD/jbrowse-components/issues/new?labels=bug&title=JBrowse+issue&body=${O}`,L=`mailto:${$}?subject=JBrowse%202%20error&body=${O}`;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Typography,{children:["Post a new issue at ",(0,t.jsx)(C,{href:I,children:"GitHub"})," or send an email to ",(0,t.jsx)(C,{href:L,children:$})," "]}),(0,t.jsx)("pre",{className:D.pre,children:i})]})}function m({error:c,onClose:l,extra:D}){const[O,i]=(0,n.useState)(),[$,I]=(0,n.useState)(),[L,Z]=(0,n.useState)(!1),R=`${typeof c=="object"&&c!==null&&"stack"in c?c.stack:""}`,W=c?`${c}`:"",re=f(R,W);(0,n.useEffect)(()=>{(async()=>{try{const g=await k(re);i(g)}catch(g){console.error(g),i(re),I(g)}})()},[re]);const v=[$?"Error loading source map, showing raw stack trace below:":"",W.length>u?`${W.slice(0,u)}...`:W,O||"No stack trace available",window.JBrowseSession?`JBrowse ${window.JBrowseSession.version}`:""].filter(g=>!!g).join(`
`);return(0,t.jsxs)(_.default,{open:!0,onClose:l,title:"Stack trace",maxWidth:"xl",children:[(0,t.jsx)(r.DialogContent,{children:O===void 0?(0,t.jsx)(b.default,{variant:"h6"}):(0,t.jsx)(p,{text:v,extra:D})}),(0,t.jsxs)(r.DialogActions,{children:[(0,t.jsx)(r.Button,{variant:"contained",color:"secondary",onClick:()=>{(0,a.default)(v),Z(!0),setTimeout(()=>{Z(!1)},1e3)},children:L?"Copied!":"Copy stack trace to clipboard"}),(0,t.jsx)(r.Button,{variant:"contained",color:"primary",onClick:l,children:"Close"})]})]})}return ge}var Qe;function Fe(){if(Qe)return pe;Qe=1;var e=x&&x.__createBinding||(Object.create?function(u,f,d,p){p===void 0&&(p=d);var m=Object.getOwnPropertyDescriptor(f,d);(!m||("get"in m?!f.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(u,p,m)}:function(u,f,d,p){p===void 0&&(p=d),u[p]=f[d]}),t=x&&x.__setModuleDefault||(Object.create?function(u,f){Object.defineProperty(u,"default",{enumerable:!0,value:f})}:function(u,f){u.default=f}),n=x&&x.__importStar||function(){var u=function(f){return u=Object.getOwnPropertyNames||function(d){var p=[];for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(p[p.length]=m);return p},u(f)};return function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var p=u(f),m=0;m<p.length;m++)p[m]!=="default"&&e(d,f,p[m]);return t(d,f),d}}(),r=x&&x.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(pe,"__esModule",{value:!0});const a=M,o=H,s=r(Ft),_=r(It),b=z,C=U,j=r(Le),y=(0,o.lazy)(()=>Promise.resolve().then(()=>n(An()))),w=(0,C.makeStyles)()(u=>({bg:{background:u.palette.divider,border:"1px solid black",margin:20},iconFloat:{float:"right",marginLeft:100}}));function h(u){let f="";const d="is not assignable",p=u.indexOf(d);if(p!==-1){const m=u.slice(0,p+d.length),c=/.*at path "(.*)" snapshot `(.*)` is not assignable/m.exec(m);c&&(u=`Failed to load element at ${c[1]}...Failed element had snapshot`,f=c[2]);const l=/.*snapshot `(.*)` is not assignable/.exec(m);l&&(u="Failed to load element...Failed element had snapshot",f=l[1])}return f}function S({error:u,onReset:f}){const{classes:d}=w(),[p,m]=(0,o.useState)(!1);return(0,a.jsxs)("div",{className:d.iconFloat,children:[typeof u=="object"&&u&&"stack"in u?(0,a.jsx)(b.Tooltip,{title:"Get stack trace",children:(0,a.jsx)(b.IconButton,{onClick:()=>{m(!0)},color:"primary",children:(0,a.jsx)(_.default,{})})}):null,f?(0,a.jsx)(b.Tooltip,{title:"Retry",children:(0,a.jsx)(b.IconButton,{onClick:f,color:"primary",children:(0,a.jsx)(s.default,{})})}):null,p?(0,a.jsx)(o.Suspense,{fallback:null,children:(0,a.jsx)(y,{error:u,onClose:()=>{m(!1)}})}):null]})}function k({error:u,onReset:f}){const{classes:d}=w(),p=`${u}`,m=p.indexOf("expected an instance of"),c=m!==-1?p.slice(0,m):p,l=h(p);return(0,a.jsxs)(j.default,{children:[c.slice(0,1e4),(0,a.jsx)(S,{error:u,onReset:f}),l?(0,a.jsx)("pre",{className:d.bg,children:JSON.stringify(JSON.parse(l),null,2)}):null]})}return pe.default=k,pe}var je={},vt=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(je,"__esModule",{value:!0});je.default=Wn;const zn=M,Ye=vt(Rt),Hn=vt(At),qn=le(),Nn=["a","b","br","code","div","em","h1","h2","h3","h4","h5","h6","i","img","li","p","pre","span","small","strong","table","tbody","sup","sub","td","tfoot","th","thead","tr","u","ul"];let et=!1;const Vn=new RegExp(Nn.map(e=>`<${e}\\b[^>]*>`).join("|"),"i");function Un(e){return Vn.test(e)}function Wn({html:e,className:t}){const n=(0,qn.linkify)(`${e}`),r=Un(n)?n:(0,Hn.default)(n);return et||(et=!0,Ye.default.addHook("afterSanitizeAttributes",a=>{a.tagName==="A"&&(a.setAttribute("rel","noopener noreferrer"),a.setAttribute("target","_blank"))})),(0,zn.jsx)("span",{className:t,dangerouslySetInnerHTML:{__html:Ye.default.sanitize(r)}})}var tt;function Ie(){if(tt)return fe;tt=1;var e=x&&x.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(fe,"__esModule",{value:!0});const t=M,n=H,r=be,a=e(zt),o=z,s=ce,_=U,b=e(Fe()),C=e(je),j=(0,_.makeStyles)()(h=>({closeButton:{position:"absolute",right:h.spacing(1),top:h.spacing(1),color:h.palette.grey[500]}}));function y({error:h}){return(0,t.jsx)("div",{style:{width:800,margin:40},children:(0,t.jsx)(b.default,{error:h})})}const w=(0,s.observer)(function(h){const{classes:S}=j(),{title:k,header:u,children:f,onClose:d}=h,p=(0,o.useTheme)();return(0,t.jsx)(o.Dialog,{...h,children:(0,t.jsxs)(o.ScopedCssBaseline,{children:[(0,n.isValidElement)(u)?u:(0,t.jsxs)(o.DialogTitle,{children:[(0,t.jsx)(C.default,{html:k||""}),d?(0,t.jsx)(o.IconButton,{className:S.closeButton,onClick:()=>{d()},children:(0,t.jsx)(a.default,{})}):null]}),(0,t.jsx)(o.Divider,{}),(0,t.jsx)(r.ErrorBoundary,{FallbackComponent:y,children:(0,t.jsx)(o.ThemeProvider,{theme:(0,o.createTheme)(p,{components:{MuiInputBase:{styleOverrides:{input:{boxSizing:"content-box!important"}}}}}),children:f})})]})})});return fe.default=w,fe}var Re={},Jn=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Re,"__esModule",{value:!0});const he=M,oe=H,Gn=Jn(Ht),$e=z,Kn=U,Zn=(0,Kn.makeStyles)()(e=>({input:{},inputBase:{},typography:{top:6,left:2,position:"absolute",whiteSpace:"nowrap",visibility:"hidden"},inputRoot:{padding:e.spacing(.5)},inputFocused:{borderStyle:"solid",borderWidth:2}})),Xn=(0,oe.forwardRef)(function(t,n){const{value:r,setValue:a,variant:o,...s}=t,[_,{width:b}]=(0,Gn.default)(),[C,j]=(0,oe.useState)(),[y,w]=(0,oe.useState)(null),[h,S]=(0,oe.useState)(!1);(0,oe.useEffect)(()=>{h&&(y==null||y.blur(),S(!1))},[h,y]);const{classes:k}=Zn(t,{props:t}),u=(0,$e.useTheme)(),f=C===void 0?r:C;return(0,he.jsxs)("div",{...s,ref:n,children:[(0,he.jsx)("div",{style:{position:"relative"},children:(0,he.jsx)($e.Typography,{ref:_,component:"span",variant:o,className:k.typography,children:f})}),(0,he.jsx)($e.InputBase,{inputRef:d=>{w(d)},className:k.inputBase,inputProps:{style:{width:b,...o&&o!=="inherit"?u.typography[o]:{}}},classes:{input:k.input,root:k.inputRoot,focused:k.inputFocused},value:f,onChange:d=>{j(d.target.value)},onKeyDown:d=>{d.key==="Enter"?y==null||y.blur():d.key==="Escape"&&(j(void 0),S(!0))},onBlur:()=>{a(C||r||""),j(void 0)}})]})});Re.default=Xn;var Ae={},ze={},Qn=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ze,"__esModule",{value:!0});ze.default=er;const Y=M,Yn=Qn(Ie()),ae=z;function er({onClose:e,open:t,onFactoryReset:n}){function r(a){a==="reset"&&n(),e()}return(0,Y.jsxs)(Yn.default,{title:"Reset",onClose:()=>{r()},open:t,children:[(0,Y.jsx)(ae.DialogContent,{children:(0,Y.jsx)(ae.DialogContentText,{children:"Are you sure you want to reset? This will restore the default configuration."})}),(0,Y.jsxs)(ae.DialogActions,{children:[(0,Y.jsx)(ae.Button,{onClick:()=>{r()},color:"primary",children:"Cancel"}),(0,Y.jsx)(ae.Button,{onClick:()=>{r("reset")},color:"primary",variant:"contained",children:"OK"})]})]})}var bt=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.default=ar;const N=M,tr=H,ee=z,nr=bt(Fe()),rr=bt(ze),or=({onFactoryReset:e,resetButtonText:t})=>{const[n,r]=(0,tr.useState)(!1);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(ee.Button,{"data-testid":"fatal-error",color:"primary",variant:"contained",onClick:()=>{r(!0)},children:t}),(0,N.jsx)(rr.default,{onClose:()=>{r(!1)},open:n,onFactoryReset:e})]})};function ar({componentStack:e,error:t="No error message provided",onFactoryReset:n,resetButtonText:r="Factory Reset"}){return(0,N.jsxs)(ee.Dialog,{maxWidth:"xl",open:!0,children:[(0,N.jsx)(ee.DialogTitle,{children:"Fatal error"}),(0,N.jsxs)(ee.DialogContent,{children:[(0,N.jsx)(nr.default,{error:t}),(0,N.jsx)("pre",{children:e})]}),(0,N.jsxs)(ee.DialogActions,{children:[(0,N.jsx)(ee.Button,{color:"secondary",variant:"contained",onClick:()=>{window.location.reload()},children:"Refresh"}),(0,N.jsx)(or,{onFactoryReset:n,resetButtonText:r})]})]})}var xt={},He={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});const K=M,X=z,sr=U,ir=le(),nt=qt;function lr(e){return"localPath"in e}function rt(e){return"blobId"in e}const cr=(0,sr.makeStyles)()(e=>({filename:{marginLeft:e.spacing(1)}}));function ur({location:e,setLocation:t}){const{classes:n}=cr(),r=e&&(rt(e)&&e.name||lr(e)&&e.localPath),a=e&&rt(e)&&!(0,nt.getBlob)(e.blobId);return(0,K.jsxs)(X.Box,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,K.jsx)(X.Box,{children:(0,K.jsx)(X.FormControl,{fullWidth:!0,children:(0,K.jsxs)(X.Button,{variant:"outlined",component:"label",children:["Choose File",(0,K.jsx)("input",{type:"file",hidden:!0,onChange:({target:o})=>{var s;const _=(s=o.files)===null||s===void 0?void 0:s[0];if(_)if(ir.isElectron){const{webUtils:b}=window.require("electron");t({localPath:b.getPathForFile(_),locationType:"LocalPathLocation"})}else t((0,nt.storeBlobLocation)({blob:_}))}})]})})}),(0,K.jsxs)(X.Box,{children:[(0,K.jsx)(X.Typography,{component:"span",className:n.filename,color:r?"initial":"textSecondary",children:r||"No file chosen"}),a?(0,K.jsx)(X.Typography,{color:"error",children:"(need to reload)"}):null]})]})}qe.default=ur;var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});const dr=M,fr=z,pr=ce,gr=lt(),hr=(0,pr.observer)(function({location:e,label:t,style:n,setLocation:r}){return(0,dr.jsx)(fr.TextField,{variant:"outlined",fullWidth:!0,defaultValue:e&&(0,gr.isUriLocation)(e)?e.uri:"",label:t||"Enter URL",style:n,onChange:a=>{r({uri:a.target.value.trim(),locationType:"UriLocation"})},slotProps:{htmlInput:{"data-testid":"urlInput"}}})});Ne.default=hr;var Ve=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(He,"__esModule",{value:!0});const T=M,me=H,mr=Ve(Nt),A=z,_r=ce,yr=Ve(qe),vr=Ve(Ne),Pe=le(),se=lt(),ot=2;function br(e){const{title:t,children:n,...r}=e;return(0,T.jsx)(A.Tooltip,{title:t||"",children:(0,T.jsx)(A.ToggleButton,{...r,children:n})})}function at(e,t){return typeof e=="string"&&e.length>t?`${e.slice(0,Math.max(0,t))}â€¦`:e}function xr({children:e}){return(0,T.jsx)("div",{style:{display:"flex",gap:4},children:e})}function jr({children:e}){return(0,T.jsx)(A.Box,{display:"flex",flexDirection:"row",children:(0,T.jsx)(A.Box,{children:e})})}function st(e){const{setLocation:t,inline:n,toggleButtonValue:r,selectedAccount:a}=e;return(0,T.jsx)(T.Fragment,{children:a!=null&&a.SelectorComponent?(0,T.jsx)(a.SelectorComponent,{...e,setLocation:t}):r==="url"?(0,T.jsx)(vr.default,{...e,setLocation:t,label:a==null?void 0:a.selectorLabel,style:n?{margin:0}:void 0}):r==="file"?(0,T.jsx)(yr.default,{...e}):null})}const Mr=(0,_r.observer)(function(e){const{inline:t,location:n,name:r,description:a,rootModel:o,setLocation:s}=e,_=!n||(0,se.isUriLocation)(n)?"url":"file",[b,C]=(0,me.useState)(n&&"internetAccountId"in n&&n.internetAccountId?n.internetAccountId:_),j=(0,se.isAppRootModel)(o)?o.internetAccounts.filter(l=>l.type!=="HTTPBasicInternetAccount"):[],[y,w]=(0,Pe.useLocalStorage)("fileSelector-recentlyUsedInternetAccounts",[]),h=Object.fromEntries(j.map(l=>[l.internetAccountId,l])),S=[...new Set(j.map(l=>l.internetAccountId))].sort((l,D)=>y.indexOf(l)-y.indexOf(D)),k=S.slice(0,ot),u=S.slice(ot),[f,d]=(0,me.useState)(null),p=h[b],m=(0,me.useCallback)(l=>{s({...l,...p&&(0,se.isUriLocation)(l)?{internetAccountId:p.internetAccountId}:{}})},[s,p]);(0,me.useEffect)(()=>{p&&(0,se.isUriLocation)(n)&&n.internetAccountId!==p.internetAccountId&&m(n)},[n,p,m]);const c=t?xr:jr;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(A.Box,{display:"flex",children:(0,T.jsx)(A.InputLabel,{shrink:!0,children:r})}),(0,T.jsxs)(A.FormGroup,{children:[(0,T.jsxs)(c,{children:[(0,T.jsxs)(A.ToggleButtonGroup,{value:b,exclusive:!0,size:"small",onChange:(l,D)=>{w([...new Set([D,...y].filter(Pe.notEmpty))]),D&&C(D),(0,se.isUriLocation)(n)&&m(n)},"aria-label":"file, url, or account picker",children:[new URLSearchParams(window.location.search).get("adminKey")?null:(0,T.jsx)(A.ToggleButton,{size:"small",value:"file","aria-label":"local file",children:"File"}),(0,T.jsx)(A.ToggleButton,{size:"small",value:"url","aria-label":"url",children:"URL"}),k.map(l=>{const{internetAccountId:D,name:O,toggleContents:i}=h[l];return(0,T.jsx)(br,{value:D,title:O,children:typeof i=="string"?at(i,5):i||at(O,5)},l)}),u.length>0?(0,T.jsxs)(A.ToggleButton,{onClick:l=>{d(l.target)},selected:!1,children:["More",(0,T.jsx)(mr.default,{})]}):null]}),t?(0,T.jsx)(st,{...e,toggleButtonValue:b,selectedAccount:p,setLocation:m}):null]}),t?null:(0,T.jsx)(st,{...e,toggleButtonValue:b,selectedAccount:p,setLocation:m})]}),(0,T.jsx)(A.FormHelperText,{children:a}),f?(0,T.jsx)(A.Menu,{open:!0,anchorEl:f,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:()=>{d(null)},children:u.map(l=>{const{internetAccountId:D,name:O}=h[l];return(0,T.jsx)(A.MenuItem,{value:D,onClick:()=>{w([...new Set([D,...y].filter(Pe.notEmpty))]),C(D),d(null)},children:O},l)})}):null]})});He.default=Mr;(function(e){var t=x&&x.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=He;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(xt);var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});const Cr=M,De=H,wr=Vt;function Sr(e){const{width:t,height:n,highResolutionScaling:r=1,style:a={},imageData:o,blockKey:s,showSoftClip:_}=e,[b,C]=(0,De.useState)(!1),j=(0,De.useRef)(null);return(0,De.useEffect)(()=>{if(!o)return;const y=j.current;if(!y)return;const w=y.getContext("2d");w&&((0,wr.drawImageOntoCanvasContext)(o,w),C(!0))},[o]),(0,Cr.jsx)("canvas",{"data-testid":["prerendered_canvas",_?"softclipped":"",s,b?"done":""].filter(y=>!!y).join("_"),ref:j,width:t*r,height:n*r,style:{width:t,height:n,...a}})}Ue.default=Sr;var We={};Object.defineProperty(We,"__esModule",{value:!0});const kr=M,_e=H,$r=U,Pr=(0,$r.makeStyles)()({horizontalHandle:{cursor:"row-resize",width:"100%"},verticalHandle:{cursor:"col-resize",height:"100%"},flexbox_verticalHandle:{cursor:"col-resize",alignSelf:"stretch"},flexbox_horizontalHandle:{cursor:"row-resize",alignSelf:"stretch"}});function Dr({onDrag:e,vertical:t=!1,flexbox:n=!1,className:r,onMouseDown:a,...o}){const[s,_]=(0,_e.useState)(!1),b=(0,_e.useRef)(0),C=(0,_e.useRef)(0),{classes:j,cx:y}=Pr();(0,_e.useEffect)(()=>{function h(k){k.preventDefault();const u=t?k.clientX:k.clientY,f=b.current-u,d=u-C.current;C.current=u,e(d,f)}function S(){_(!1)}return s?(window.addEventListener("mousemove",h,!0),window.addEventListener("mouseup",S,!0),()=>{window.removeEventListener("mousemove",h,!0),window.removeEventListener("mouseup",S,!0)}):()=>{}},[s,e,t]);let w;return n?w=t?j.flexbox_verticalHandle:j.flexbox_horizontalHandle:t?w=j.verticalHandle:w=j.horizontalHandle,(0,kr.jsx)("div",{"data-resizer":"true",onMouseDown:h=>{h.preventDefault();const S=t?h.clientX:h.clientY;b.current=S,C.current=S,_(!0),a==null||a(h)},className:y(w,r),...o})}We.default=Dr;(function(e){var t=x&&x.__createBinding||(Object.create?function(d,p,m,c){c===void 0&&(c=m);var l=Object.getOwnPropertyDescriptor(p,m);(!l||("get"in l?!p.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return p[m]}}),Object.defineProperty(d,c,l)}:function(d,p,m,c){c===void 0&&(c=m),d[c]=p[m]}),n=x&&x.__exportStar||function(d,p){for(var m in d)m!=="default"&&!Object.prototype.hasOwnProperty.call(p,m)&&t(p,d,m)},r=x&&x.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.VIEW_HEADER_HEIGHT=e.SanitizedHTML=e.ResizeHandle=e.PrerenderedCanvas=e.Menu=e.LoadingEllipses=e.FileSelector=e.FatalErrorDialog=e.ErrorMessage=e.EditableTypography=e.Dialog=e.CascadingMenuButton=e.CascadingMenu=e.AssemblySelector=e.Logomark=e.LogoFull=void 0,n(dt,e);var a=ye;Object.defineProperty(e,"LogoFull",{enumerable:!0,get:function(){return a.LogoFull}}),Object.defineProperty(e,"Logomark",{enumerable:!0,get:function(){return a.Logomark}});var o=Oe;Object.defineProperty(e,"AssemblySelector",{enumerable:!0,get:function(){return r(o).default}});var s=ve;Object.defineProperty(e,"CascadingMenu",{enumerable:!0,get:function(){return r(s).default}});var _=Be;Object.defineProperty(e,"CascadingMenuButton",{enumerable:!0,get:function(){return r(_).default}});var b=Ie();Object.defineProperty(e,"Dialog",{enumerable:!0,get:function(){return r(b).default}});var C=Re;Object.defineProperty(e,"EditableTypography",{enumerable:!0,get:function(){return r(C).default}});var j=Fe();Object.defineProperty(e,"ErrorMessage",{enumerable:!0,get:function(){return r(j).default}});var y=Ae;Object.defineProperty(e,"FatalErrorDialog",{enumerable:!0,get:function(){return r(y).default}});var w=xt;Object.defineProperty(e,"FileSelector",{enumerable:!0,get:function(){return r(w).default}});var h=xe;Object.defineProperty(e,"LoadingEllipses",{enumerable:!0,get:function(){return r(h).default}});var S=te;Object.defineProperty(e,"Menu",{enumerable:!0,get:function(){return r(S).default}});var k=Ue;Object.defineProperty(e,"PrerenderedCanvas",{enumerable:!0,get:function(){return r(k).default}});var u=We;Object.defineProperty(e,"ResizeHandle",{enumerable:!0,get:function(){return r(u).default}});var f=je;Object.defineProperty(e,"SanitizedHTML",{enumerable:!0,get:function(){return r(f).default}}),n(te,e),e.VIEW_HEADER_HEIGHT=28})(Te);const Tr=ut()(e=>({circularViewOptions:{padding:e.spacing(1)}})),Er=ct(function({svInspector:e}){const{classes:t}=Tr();return M.jsx("div",{className:t.circularViewOptions,style:{height:e.circularViewOptionsBarHeight},children:M.jsx(Ut,{control:M.jsx(Wt,{checked:e.onlyDisplayRelevantRegionsInCircularView,onChange:n=>{e.setOnlyDisplayRelevantRegionsInCircularView(n.target.checked)}}),label:"show only regions with data"})})}),Or=ut()(e=>({resizeHandleVert:{background:e.palette.action.selected,width:4,boxSizing:"border-box",borderTop:"1px solid #fafafa"},resizeHandleHoriz:{background:e.palette.action.selected,height:4,boxSizing:"border-box",borderTop:"1px solid #fafafa"},viewControls:{margin:0},viewsContainer:{display:"flex"},container:{overflow:"hidden"}})),Lr=ct(function({model:e}){const{classes:t}=Or(),{SpreadsheetViewReactComponent:n,CircularViewReactComponent:r,showCircularView:a}=e;return M.jsxs("div",{className:t.container,children:[M.jsxs("div",{className:t.viewsContainer,children:[M.jsx("div",{style:{width:e.spreadsheetView.width},className:t.container,children:M.jsx(n,{model:e.spreadsheetView})}),a?M.jsxs(M.Fragment,{children:[M.jsx(Te.ResizeHandle,{onDrag:o=>{const s=e.circularView.resizeWidth(-o);return e.spreadsheetView.resizeWidth(-s)},vertical:!0,flexbox:!0,className:t.resizeHandleVert}),M.jsxs("div",{style:{width:e.circularView.width},children:[M.jsx(Er,{svInspector:e}),M.jsx(r,{model:e.circularView})]})]}):null]}),M.jsx(Te.ResizeHandle,{onDrag:e.resizeHeight,className:t.resizeHandleHoriz})]})});export{Lr as default};
//# sourceMappingURL=SvInspectorView-BKfSLrts.js.map
