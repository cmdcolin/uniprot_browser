{"version":3,"file":"drawSynteny-BqxSdwOA.js","sources":["../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyDisplay/components/util.js","../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyDisplay/drawSynteny.js"],"sourcesContent":["import { assembleLocString, doesIntersect2, getContainingTrack, getContainingView, getSession, isSessionModelWithWidgets, } from '@jbrowse/core/util';\nimport { MAX_COLOR_RANGE, getId } from '../drawSynteny';\nexport function drawMatchSimple({ feature, ctx, offsets, level, cb, height, drawCurves, oobLimit, viewWidth, hideTiny, }) {\n    const { p11, p12, p21, p22 } = feature;\n    const x11 = p11.offsetPx - offsets[level];\n    const x12 = p12.offsetPx - offsets[level];\n    const x21 = p21.offsetPx - offsets[level + 1];\n    const x22 = p22.offsetPx - offsets[level + 1];\n    const l1 = Math.abs(x12 - x11);\n    const l2 = Math.abs(x22 - x21);\n    const y1 = 0;\n    const y2 = height;\n    const mid = (y2 - y1) / 2;\n    const minX = Math.min(x21, x22);\n    const maxX = Math.max(x21, x22);\n    if (!doesIntersect2(minX, maxX, -oobLimit, viewWidth + oobLimit)) {\n        return;\n    }\n    if (l1 <= 1 && l2 <= 1) {\n        if (!hideTiny) {\n            ctx.beginPath();\n            ctx.moveTo(x11, y1);\n            if (drawCurves) {\n                ctx.bezierCurveTo(x11, mid, x21, mid, x21, y2);\n            }\n            else {\n                ctx.lineTo(x21, y2);\n            }\n            ctx.stroke();\n        }\n    }\n    else {\n        draw(ctx, x11, x12, y1, x22, x21, y2, mid, drawCurves);\n        cb(ctx);\n    }\n}\nexport function draw(ctx, x1, x2, y1, x3, x4, y2, mid, drawCurves) {\n    if (drawCurves) {\n        drawBezierBox(ctx, x1, x2, y1, x3, x4, y2, mid);\n    }\n    else {\n        drawBox(ctx, x1, x2, y1, x3, x4, y2);\n    }\n}\nexport function drawBox(ctx, x1, x2, y1, x3, x4, y2) {\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y1);\n    ctx.lineTo(x3, y2);\n    ctx.lineTo(x4, y2);\n    ctx.closePath();\n}\nexport function drawBezierBox(ctx, x1, x2, y1, x3, x4, y2, mid) {\n    const len1 = Math.abs(x1 - x2);\n    const len2 = Math.abs(x1 - x2);\n    if (len1 < 5 && len2 < 5 && x2 < x1 && Math.abs(x1 - x3) > 100) {\n        const tmp = x1;\n        x1 = x2;\n        x2 = tmp;\n    }\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y1);\n    ctx.bezierCurveTo(x2, mid, x3, mid, x3, y2);\n    ctx.lineTo(x4, y2);\n    ctx.bezierCurveTo(x4, mid, x1, mid, x1, y1);\n    ctx.closePath();\n}\nexport function onSynClick(event, model) {\n    const view = getContainingView(model);\n    const track = getContainingTrack(model);\n    const { featPositions, numFeats, clickMapCanvas: ref1, cigarClickMapCanvas: ref2, level, } = model;\n    if (!ref1 || !ref2) {\n        return;\n    }\n    const rect = ref1.getBoundingClientRect();\n    const ctx1 = ref1.getContext('2d');\n    const ctx2 = ref2.getContext('2d');\n    if (!ctx1 || !ctx2) {\n        return;\n    }\n    const x = event.clientX - rect.left;\n    const y = event.clientY - rect.top;\n    const [r1, g1, b1] = ctx1.getImageData(x, y, 1, 1).data;\n    const unitMultiplier = Math.floor(MAX_COLOR_RANGE / numFeats);\n    const id = getId(r1, g1, b1, unitMultiplier);\n    const feat = featPositions[id];\n    if (feat) {\n        const { f } = feat;\n        model.setClickId(f.id());\n        const session = getSession(model);\n        if (isSessionModelWithWidgets(session)) {\n            session.showWidget(session.addWidget('SyntenyFeatureWidget', 'syntenyFeature', {\n                view,\n                track,\n                featureData: f.toJSON(),\n                level,\n            }));\n        }\n    }\n    return feat;\n}\nexport function onSynContextClick(event, model, setAnchorEl) {\n    event.preventDefault();\n    const ref1 = model.clickMapCanvas;\n    const ref2 = model.cigarClickMapCanvas;\n    if (!ref1 || !ref2) {\n        return;\n    }\n    const rect = ref1.getBoundingClientRect();\n    const ctx1 = ref1.getContext('2d');\n    const ctx2 = ref2.getContext('2d');\n    if (!ctx1 || !ctx2) {\n        return;\n    }\n    const { clientX, clientY } = event;\n    const x = clientX - rect.left;\n    const y = clientY - rect.top;\n    const [r1, g1, b1] = ctx1.getImageData(x, y, 1, 1).data;\n    const unitMultiplier = Math.floor(MAX_COLOR_RANGE / model.numFeats);\n    const id = getId(r1, g1, b1, unitMultiplier);\n    const f = model.featPositions[id];\n    if (f) {\n        model.setClickId(f.f.id());\n        setAnchorEl({ clientX, clientY, feature: f });\n    }\n}\nexport function getTooltip({ feature, cigarOp, cigarOpLen, }) {\n    const f1 = feature.toJSON();\n    const f2 = f1.mate;\n    const l1 = f1.end - f1.start;\n    const l2 = f2.end - f2.start;\n    const identity = f1.identity;\n    const n1 = f1.name;\n    const n2 = f2.name;\n    return [\n        `Loc1: ${assembleLocString(f1)}`,\n        `Loc2: ${assembleLocString(f2)}`,\n        `Inverted: ${f1.strand === -1}`,\n        `Query len: ${l1.toLocaleString('en-US')}`,\n        `Target len: ${l2.toLocaleString('en-US')}`,\n        identity ? `Identity: ${identity.toPrecision(2)}` : '',\n        cigarOp ? `CIGAR operator: ${cigarOp}${cigarOpLen}` : '',\n        n1 ? `Name 1: ${n1}` : '',\n        n2 ? `Name 2: ${n2}` : '',\n    ]\n        .filter(f => !!f)\n        .join('<br/>');\n}\n","import { doesIntersect2, getContainingView } from '@jbrowse/core/util';\nimport { draw, drawMatchSimple } from './components/util';\nexport const MAX_COLOR_RANGE = 255 * 255 * 255;\nfunction makeColor(idx) {\n    const r = Math.floor(idx / (255 * 255)) % 255;\n    const g = Math.floor(idx / 255) % 255;\n    const b = idx % 255;\n    return `rgb(${r},${g},${b})`;\n}\nconst colorMap = {\n    I: '#ff03',\n    N: '#0a03',\n    D: '#00f3',\n    X: 'brown',\n    M: '#f003',\n    '=': '#f003',\n};\nconst lineLimit = 3;\nconst oobLimit = 1600;\nexport function getId(r, g, b, unitMultiplier) {\n    return Math.floor((r * 255 * 255 + g * 255 + b - 1) / unitMultiplier);\n}\nexport function drawRef(model, ctx1, ctx3) {\n    var _a;\n    const view = getContainingView(model);\n    const drawCurves = view.drawCurves;\n    const drawCIGAR = view.drawCIGAR;\n    const drawCIGARMatchesOnly = view.drawCIGARMatchesOnly;\n    const { level, height, featPositions } = model;\n    const width = view.width;\n    const bpPerPxs = view.views.map(v => v.bpPerPx);\n    if (ctx3) {\n        ctx3.imageSmoothingEnabled = false;\n    }\n    ctx1.beginPath();\n    const offsets = view.views.map(v => v.offsetPx);\n    const unitMultiplier = Math.floor(MAX_COLOR_RANGE / featPositions.length);\n    ctx1.fillStyle = colorMap.M;\n    ctx1.strokeStyle = colorMap.M;\n    for (const { p11, p12, p21, p22 } of featPositions) {\n        const x11 = p11.offsetPx - offsets[level];\n        const x12 = p12.offsetPx - offsets[level];\n        const x21 = p21.offsetPx - offsets[level + 1];\n        const x22 = p22.offsetPx - offsets[level + 1];\n        const l1 = Math.abs(x12 - x11);\n        const l2 = Math.abs(x22 - x21);\n        const y1 = 0;\n        const y2 = height;\n        const mid = (y2 - y1) / 2;\n        if (l1 <= lineLimit &&\n            l2 <= lineLimit &&\n            x21 < width + oobLimit &&\n            x21 > -oobLimit) {\n            ctx1.moveTo(x11, y1);\n            if (drawCurves) {\n                ctx1.bezierCurveTo(x11, mid, x21, mid, x21, y2);\n            }\n            else {\n                ctx1.lineTo(x21, y2);\n            }\n        }\n    }\n    ctx1.stroke();\n    ctx1.fillStyle = colorMap.M;\n    ctx1.strokeStyle = colorMap.M;\n    for (const { p11, p12, p21, p22, f, cigar } of featPositions) {\n        const x11 = p11.offsetPx - offsets[level];\n        const x12 = p12.offsetPx - offsets[level];\n        const x21 = p21.offsetPx - offsets[level + 1];\n        const x22 = p22.offsetPx - offsets[level + 1];\n        const l1 = Math.abs(x12 - x11);\n        const l2 = Math.abs(x22 - x21);\n        const minX = Math.min(x21, x22);\n        const maxX = Math.max(x21, x22);\n        const y1 = 0;\n        const y2 = height;\n        const mid = (y2 - y1) / 2;\n        if (!(l1 <= lineLimit && l2 <= lineLimit) &&\n            doesIntersect2(minX, maxX, -oobLimit, view.width + oobLimit)) {\n            const s1 = f.get('strand');\n            const k1 = s1 === -1 ? x12 : x11;\n            const k2 = s1 === -1 ? x11 : x12;\n            const rev1 = k1 < k2 ? 1 : -1;\n            const rev2 = (x21 < x22 ? 1 : -1) * s1;\n            let cx1 = k1;\n            let cx2 = s1 === -1 ? x22 : x21;\n            if (cigar.length && drawCIGAR) {\n                let continuingFlag = false;\n                let px1 = 0;\n                let px2 = 0;\n                const unitMultiplier2 = Math.floor(MAX_COLOR_RANGE / cigar.length);\n                for (let j = 0; j < cigar.length; j += 2) {\n                    const idx = j * unitMultiplier2 + 1;\n                    const len = +cigar[j];\n                    const op = cigar[j + 1];\n                    if (!continuingFlag) {\n                        px1 = cx1;\n                        px2 = cx2;\n                    }\n                    const d1 = len / bpPerPxs[level];\n                    const d2 = len / bpPerPxs[level + 1];\n                    if (op === 'M' || op === '=' || op === 'X') {\n                        cx1 += d1 * rev1;\n                        cx2 += d2 * rev2;\n                    }\n                    else if (op === 'D' || op === 'N') {\n                        cx1 += d1 * rev1;\n                    }\n                    else if (op === 'I') {\n                        cx2 += d2 * rev2;\n                    }\n                    if (!(Math.max(px1, px2, cx1, cx2) < 0 ||\n                        Math.min(px1, px2, cx1, cx2) > width)) {\n                        const isNotLast = j < cigar.length - 2;\n                        if (Math.abs(cx1 - px1) <= 1 &&\n                            Math.abs(cx2 - px2) <= 1 &&\n                            isNotLast) {\n                            continuingFlag = true;\n                        }\n                        else {\n                            const letter = (continuingFlag && d1 > 1) || d2 > 1 ? op : 'M';\n                            ctx1.fillStyle = colorMap[letter];\n                            continuingFlag = false;\n                            if (drawCIGARMatchesOnly) {\n                                if (letter === 'M') {\n                                    draw(ctx1, px1, cx1, y1, cx2, px2, y2, mid, drawCurves);\n                                    ctx1.fill();\n                                }\n                            }\n                            else {\n                                draw(ctx1, px1, cx1, y1, cx2, px2, y2, mid, drawCurves);\n                                ctx1.fill();\n                            }\n                            if (ctx3) {\n                                ctx3.fillStyle = makeColor(idx);\n                                draw(ctx3, px1, cx1, y1, cx2, px2, y2, mid, drawCurves);\n                                ctx3.fill();\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                draw(ctx1, x11, x12, y1, x22, x21, y2, mid, drawCurves);\n                ctx1.fill();\n            }\n        }\n    }\n    const ctx2 = (_a = model.clickMapCanvas) === null || _a === void 0 ? void 0 : _a.getContext('2d');\n    if (!ctx2) {\n        return;\n    }\n    ctx2.imageSmoothingEnabled = false;\n    ctx2.clearRect(0, 0, width, height);\n    for (let i = 0; i < featPositions.length; i++) {\n        const feature = featPositions[i];\n        const idx = i * unitMultiplier + 1;\n        ctx2.fillStyle = makeColor(idx);\n        drawMatchSimple({\n            cb: ctx => {\n                ctx.fill();\n            },\n            feature,\n            ctx: ctx2,\n            drawCurves,\n            level,\n            offsets,\n            oobLimit,\n            viewWidth: view.width,\n            hideTiny: true,\n            height,\n        });\n    }\n}\nexport function drawMouseoverSynteny(model) {\n    var _a;\n    const { level, clickId, mouseoverId } = model;\n    const highResolutionScaling = 1;\n    const view = getContainingView(model);\n    const drawCurves = view.drawCurves;\n    const height = model.height;\n    const width = view.width;\n    const ctx = (_a = model.mouseoverCanvas) === null || _a === void 0 ? void 0 : _a.getContext('2d');\n    const offsets = view.views.map(v => v.offsetPx);\n    if (!ctx) {\n        return;\n    }\n    ctx.resetTransform();\n    ctx.scale(highResolutionScaling, highResolutionScaling);\n    ctx.clearRect(0, 0, width, height);\n    ctx.strokeStyle = 'rgba(0, 0, 0, 0.9)';\n    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';\n    const feature1 = model.featMap[mouseoverId || ''];\n    if (feature1) {\n        drawMatchSimple({\n            cb: ctx => {\n                ctx.fill();\n            },\n            feature: feature1,\n            level,\n            ctx,\n            oobLimit,\n            viewWidth: view.width,\n            drawCurves,\n            offsets,\n            height,\n        });\n    }\n    const feature2 = model.featMap[clickId || ''];\n    if (feature2) {\n        drawMatchSimple({\n            cb: ctx => {\n                ctx.stroke();\n            },\n            feature: feature2,\n            ctx,\n            level,\n            oobLimit,\n            viewWidth: view.width,\n            drawCurves,\n            offsets,\n            height,\n        });\n    }\n}\n"],"names":["drawMatchSimple","feature","ctx","offsets","level","cb","height","drawCurves","oobLimit","viewWidth","hideTiny","p11","p12","p21","p22","x11","x12","x21","x22","l1","l2","y1","y2","mid","minX","maxX","doesIntersect2","draw","x1","x2","x3","x4","drawBezierBox","drawBox","len1","len2","tmp","onSynClick","event","model","view","getContainingView","track","getContainingTrack","featPositions","numFeats","ref1","ref2","rect","ctx1","ctx2","x","y","r1","g1","b1","unitMultiplier","MAX_COLOR_RANGE","id","getId","feat","f","session","getSession","isSessionModelWithWidgets","onSynContextClick","setAnchorEl","clientX","clientY","getTooltip","cigarOp","cigarOpLen","f1","f2","identity","n1","n2","assembleLocString","makeColor","idx","r","g","b","colorMap","lineLimit","drawRef","ctx3","_a","drawCIGAR","drawCIGARMatchesOnly","width","bpPerPxs","v","cigar","s1","k1","rev1","rev2","cx1","cx2","continuingFlag","px1","px2","unitMultiplier2","j","len","op","d1","d2","isNotLast","letter","i","drawMouseoverSynteny","clickId","mouseoverId","highResolutionScaling","feature1","feature2"],"mappings":"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","x_google_ignoreList":[0,1]}