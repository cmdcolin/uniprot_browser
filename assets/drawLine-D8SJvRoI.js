import{y as V,aA as Y,$ as G,u as b}from"./index-B3kPj2Rj.js";const W=.3,v=2;function $(o,w){const{features:y,regions:C,bpPerPx:f,scaleOpts:p,height:S,ticks:{values:M},displayCrossHatches:E,colorCallback:I,config:N,offset:a=0,stopToken:F}=w,l=C[0],H=(l.end-l.start)/f,r=S-a*2,g=V.readConfObject(N,"clipColor"),h=Y({...p,range:[0,r]}),u=h.domain(),j=u[0],A=u[1],s=e=>b.clamp(r-(h(e)||0),0,r)+a;let c,d=Number.NEGATIVE_INFINITY;const T=[];let m=performance.now();for(const e of y.values()){performance.now()-m>400&&(G.checkStopToken(F),m=performance.now());const[t,i]=b.featureSpanPx(e,l,f);(Math.floor(t)!==Math.floor(d)||i-t>1)&&(T.push(e),d=t);const n=e.get("score"),L=n<j,O=n>A,k=i-t+W,R=I(e,n);o.beginPath(),o.strokeStyle=R;const P=c!==void 0?c:n;l.reversed?(o.moveTo(i,s(P)),o.lineTo(i,s(n)),o.lineTo(t,s(n))):(o.moveTo(t,s(P)),o.lineTo(t,s(n)),o.lineTo(i,s(n))),o.stroke(),c=n,O?(o.fillStyle=g,o.fillRect(t,a,k,v)):L&&p.scaleType!=="log"&&(o.fillStyle=g,o.fillRect(t,r-v,k,r))}if(E){o.lineWidth=1,o.strokeStyle="rgba(200,200,200,0.5)";for(const e of M)o.beginPath(),o.moveTo(0,Math.round(s(e))),o.lineTo(H,Math.round(s(e))),o.stroke()}return{reducedFeatures:T}}export{$ as drawLine};
//# sourceMappingURL=drawLine-D8SJvRoI.js.map
