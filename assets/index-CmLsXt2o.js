import{bN as C,fu as it,du as st,fv as ut,j as I,eB as fe,cz as re,bM as pe,c as N,bO as R,fw as ct,fx as dt,fy as ft,fz as pt,fA as gt,fB as ht,fC as mt,fD as Ve,fE as vt,aa as yt,fF as We,fG as _t,fH as bt}from"./index-CGKDrrCR.js";import{r as Ge,a as Je,L as jt,S as xt}from"./Dialog-DMOWZHAH.js";var Mt={},Ke={};(function(e){var t=C&&C.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultThemes=void 0,e.createJBrowseBaseTheme=le,e.createJBrowseTheme=F;const o=ut,n=st,l=t(it),a=(0,n.createTheme)(),r="#0D233F",c="#721E63",g=a.palette.augmentColor({color:{main:"#135560"}}),_=a.palette.augmentColor({color:{main:"#FFB11D"}}),v=a.palette.augmentColor({color:{main:"#aaa"}}),d={A:a.palette.augmentColor({color:o.green}),C:a.palette.augmentColor({color:o.blue}),G:a.palette.augmentColor({color:o.orange}),T:a.palette.augmentColor({color:o.red})},b=[null,a.palette.augmentColor({color:{main:"#FF8080"}}),a.palette.augmentColor({color:{main:"#80FF80"}}),a.palette.augmentColor({color:{main:"#8080FF"}}),a.palette.augmentColor({color:{main:"#8080FF"}}),a.palette.augmentColor({color:{main:"#80FF80"}}),a.palette.augmentColor({color:{main:"#FF8080"}})],h=[null,a.palette.augmentColor({color:{main:"#8f8f8f"}}),a.palette.augmentColor({color:{main:"#adadad"}}),a.palette.augmentColor({color:{main:"#d8d8d8"}}),a.palette.augmentColor({color:{main:"#d8d8d8"}}),a.palette.augmentColor({color:{main:"#adadad"}}),a.palette.augmentColor({color:{main:"#8f8f8f"}})],j="#e22",x="#3e3",P="#800080",k="#808080",p="#f00",M="#00f",$="#97b8c9",L={quaternary:_,highlight:_,stopCodon:j,startCodon:x,insertion:P,deletion:k,softclip:M,hardclip:p,bases:d,frames:h,framesCDS:b,skip:$};function f(){return{palette:{...L,mode:void 0,primary:{main:r},secondary:{main:c},tertiary:g},components:{MuiLink:{styleOverrides:{root:({theme:u})=>({color:u.palette.tertiary.main})}}}}}function O(){return{...f(),name:"Default (from config)"}}function H(){return{...f(),name:"Light (stock)"}}function i(){return{name:"Dark (stock)",palette:{...L,mode:"dark"},components:{MuiAppBar:{defaultProps:{enableColorOnDark:!0},styleOverrides:{root:({theme:u})=>u.palette.primary.main}}}}}function D(){return{name:"Dark (minimal)",palette:{...L,mode:"dark",primary:{main:o.grey[700]},secondary:{main:o.grey[800]},tertiary:a.palette.augmentColor({color:{main:o.grey[900]}})}}}function W(){return{name:"Light (minimal)",palette:{...L,primary:{main:o.grey[900]},secondary:{main:o.grey[800]},tertiary:a.palette.augmentColor({color:{main:o.grey[900]}})}}}e.defaultThemes={default:O(),lightStock:H(),lightMinimal:W(),darkMinimal:D(),darkStock:i()};function K(u,s){return s}function le(u){var s,E,me,ve,ye,_e;const lt={palette:u==null?void 0:u.palette,typography:{fontSize:12},spacing:4,components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:12}}},MuiButton:{defaultProps:{size:"small"},styleOverrides:{root:({theme:T})=>T.palette.mode==="dark"?{color:T.palette.text.primary}:void 0}},MuiAccordion:{defaultProps:{disableGutters:!0,slotProps:{transition:{timeout:150,unmountOnExit:!0}}}},MuiFilledInput:{defaultProps:{margin:"dense"}},MuiFormControl:{defaultProps:{margin:"dense",size:"small"}},MuiFormHelperText:{defaultProps:{margin:"dense"}},MuiIconButton:{defaultProps:{size:"small"}},MuiInputBase:{defaultProps:{margin:"dense"}},MuiAutocomplete:{defaultProps:{size:"small"}},MuiInputLabel:{defaultProps:{margin:"dense"}},MuiToolbar:{defaultProps:{variant:"dense"}},MuiListItem:{defaultProps:{dense:!0}},MuiOutlinedInput:{defaultProps:{margin:"dense"}},MuiFab:{defaultProps:{size:"small"},styleOverrides:{secondary:{backgroundColor:(E=(s=u==null?void 0:u.palette)===null||s===void 0?void 0:s.quaternary)===null||E===void 0?void 0:E.main}}},MuiTable:{defaultProps:{size:"small"}},MuiPopover:{defaultProps:{transitionDuration:0}},MuiMenu:{defaultProps:{transitionDuration:0}},MuiMenuItem:{defaultProps:{dense:!0}},MuiTextField:{defaultProps:{margin:"dense",variant:"standard"}},MuiLink:{styleOverrides:{root:({theme:T})=>({color:T.palette.text.secondary})}},MuiCheckbox:{styleOverrides:{root:({theme:T})=>T.palette.mode==="dark"?{color:T.palette.text.secondary,"&.Mui-checked":{color:T.palette.text.secondary}}:void 0}},MuiRadio:{styleOverrides:{root:({theme:T})=>T.palette.mode==="dark"?{color:T.palette.text.secondary,"&.Mui-checked":{color:T.palette.text.secondary}}:void 0}},MuiFormLabel:{styleOverrides:{root:({theme:T})=>T.palette.mode==="dark"?{color:T.palette.text.secondary,"&.Mui-focused":{color:T.palette.text.secondary}}:void 0}},MuiAccordionSummary:{styleOverrides:{root:{backgroundColor:(ve=(me=u==null?void 0:u.palette)===null||me===void 0?void 0:me.tertiary)===null||ve===void 0?void 0:ve.main},content:{color:(_e=(ye=u==null?void 0:u.palette)===null||ye===void 0?void 0:ye.tertiary)===null||_e===void 0?void 0:_e.contrastText}}},MuiToggleButtonGroup:{defaultProps:{size:"small"}}}};return(0,l.default)(lt,u||{},{arrayMerge:K})}function F(u={},s=e.defaultThemes,E="default"){return(0,n.createTheme)(le(E==="default"?(0,l.default)(s.default,ie(u),{arrayMerge:K}):at(s[E])))}function ie(u={}){var s;for(const E of["tertiary","quaternary","highlight"])!((s=u.palette)===null||s===void 0)&&s[E]&&(u=(0,l.default)(u,{palette:{[E]:a.palette.augmentColor("color"in u.palette[E]?u.palette[E]:{color:u.palette[E]})}}));return u}function at(u={}){const{palette:s}=u;return ie((0,l.default)(u,{palette:{quaternary:(s==null?void 0:s.quaternary)||v,tertiary:(s==null?void 0:s.tertiary)||v,highlight:(s==null?void 0:s.highlight)||_,insertion:(s==null?void 0:s.insertion)||P,softclip:(s==null?void 0:s.softclip)||M,skip:(s==null?void 0:s.skip)||$,hardclip:(s==null?void 0:s.hardclip)||p,deletion:(s==null?void 0:s.deletion)||k,startCodon:(s==null?void 0:s.startCodon)||x,stopCodon:(s==null?void 0:s.stopCodon)||j}}))}})(Ke);var ge={};Object.defineProperty(ge,"__esModule",{value:!0});ge.Logomark=Ct;ge.LogoFull=Pt;const w=I;function Ze(e){return e==="black"?{midnight:"#808080",forrest:"#666666",grape:"#4d4d4d",mandarin:"#333333",gray:"#1a1a1a"}:e==="white"?{midnight:"#ffffff",forrest:"#e6e6e6",grape:"#cccccc",mandarin:"#b3b3b3",gray:"#999999"}:{midnight:"#0d233f",forrest:"#135560",grape:"#721e63",mandarin:"#ffb11d",gray:"#dadada"}}function Ct({variant:e}){return(0,w.jsx)("svg",{viewBox:"0 0 175 175",children:(0,w.jsx)(Xe,{variant:e})})}function Pt({variant:e}){return(0,w.jsxs)("svg",{viewBox:"0 0 641 175",children:[(0,w.jsx)(kt,{variant:e}),(0,w.jsx)(Xe,{variant:e})]})}function Xe({variant:e}){const t=Ze(e);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("path",{style:{fill:t.midnight},d:"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z"}),(0,w.jsx)("path",{style:{fill:t.forrest},d:"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z"}),(0,w.jsx)("path",{style:{fill:t.grape},d:"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z"}),(0,w.jsx)("path",{style:{fill:t.mandarin},d:"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z"}),(0,w.jsx)("path",{style:{fill:t.gray},d:"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z"})]})}function kt({variant:e}){const t=Ze(e);return(0,w.jsxs)("g",{"aria-label":"JBrowse",transform:"translate(213.084 144.241)",style:{fill:t.midnight},children:[(0,w.jsx)("path",{d:"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z"}),(0,w.jsx)("path",{d:"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z"}),(0,w.jsx)("path",{d:"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z"}),(0,w.jsx)("path",{d:"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z"}),(0,w.jsx)("path",{d:"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z"}),(0,w.jsx)("path",{d:"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z"}),(0,w.jsx)("path",{d:"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z"})]})}var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});const Ie=I,Ee=N,Ae=R,St=pe,$t=re,Dt=fe(),wt=(0,$t.makeStyles)()({importFormEntry:{minWidth:180}}),Lt=(0,St.observer)(function({session:e,onChange:t,label:o="Assembly",selected:n,InputProps:l,TextFieldProps:a,localStorageKey:r,helperText:c="Select assembly to view"}){const{classes:g}=wt(),{assemblyNames:_,assemblyManager:v}=e,d=new URLSearchParams(window.location.search).get("config"),[b,h]=typeof jest>"u"&&r?(0,Dt.useLocalStorage)(`lastAssembly-${[window.location.host+window.location.pathname,d,r].join("-")}`,n):(0,Ee.useState)(n),j=_.includes(b||"")?b:n;(0,Ee.useEffect)(()=>{j&&j!==n&&t(j)},[j,t,n]);const x=_.length?"":"No configured assemblies";return(0,Ie.jsx)(Ae.TextField,{select:!0,"data-testid":"assembly-selector-textfield",label:o,variant:"outlined",helperText:x||c,value:j||"",onChange:P=>{h(P.target.value)},error:!!x,disabled:!!x,className:g.importFormEntry,...a,slotProps:{input:l,htmlInput:{"data-testid":"assembly-selector"}},children:_.map(P=>{var k;return(0,Ie.jsx)(Ae.MenuItem,{value:P,children:((k=v.get(P))===null||k===void 0?void 0:k.displayName)||P},P)})})});Pe.default=Lt;var he={},Y={},ae=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Y,"__esModule",{value:!0});Y.MenuItemEndDecoration=Ce;const S=I,z=N,Tt=ae(ct),Ot=ae(dt),Bt=ae(ft),Ft=ae(pt),It=ae(gt),q=R,Et=re,At=fe(),Ye=(0,Et.makeStyles)()({paper:{position:"fixed",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",top:0,left:0,outline:0},menuItemEndDecoration:{padding:0,margin:0,height:16}});function Ce(e){const{classes:t}=Ye(),{type:o}=e;let n,l;"checked"in e&&({checked:n,disabled:l}=e);let a;switch(o){case"subMenu":{a=(0,S.jsx)(Tt.default,{color:"action"});break}case"checkbox":{if(n){const r=l?"inherit":void 0;a=(0,S.jsx)(Ot.default,{color:r})}else a=(0,S.jsx)(Bt.default,{color:"action"});break}case"radio":{if(n){const r=l?"inherit":void 0;a=(0,S.jsx)(Ft.default,{color:r})}else a=(0,S.jsx)(It.default,{color:"action"});break}}return(0,S.jsx)("div",{className:t.menuItemEndDecoration,children:a})}function Qe(e){return e.type!=="divider"&&e.type!=="subHeader"&&!e.disabled}function zt(e,t){const o=e.slice(t+1).findIndex(Qe);return o===-1?o:t+1+o}function Rt(e,t){return(0,At.findLastIndex)(e.slice(0,t),Qe)}const et=(0,z.forwardRef)(function(t,o){const[n,l]=(0,z.useState)(),[a,r]=(0,z.useState)(),[c,g]=(0,z.useState)(!1),[_,v]=(0,z.useState)(),[d,b]=(0,z.useState)(),h=(0,z.useRef)(null),{classes:j}=Ye(),{menuItems:x,onMenuItemClick:P,open:k,onClose:p,anchorEl:M,top:$=!1}=t;(0,z.useEffect)(()=>{k||(l(void 0),r(void 0))},[k]),(0,z.useEffect)(()=>{const i=k&&!!n;let D;return i&&!c?D=setTimeout(()=>{g(!0)},300):!i&&c&&(D=setTimeout(()=>{g(!1)},300)),()=>{clearTimeout(D)}},[c,k,n]),(0,z.useEffect)(()=>{if(M){const i=M.getBoundingClientRect();d?(i.top!==d.top||i.left+i.width!==d.left)&&b({top:i.top,left:i.left+i.width}):b({top:i.top,left:i.left+i.width})}else d||b({})},[d,M]);const L=x.some(i=>"icon"in i&&i.icon),f={};function O(i){return D=>{P(D,i)}}const H=(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(q.MenuList,{autoFocusItem:k&&!c,dense:!0,children:x.sort((i,D)=>(D.priority||0)-(i.priority||0)).map((i,D)=>{if(i.type==="divider")return(0,S.jsx)(q.Divider,{component:"li"},`divider-${JSON.stringify(i)}-${D}`);if(i.type==="subHeader")return(0,S.jsx)(q.ListSubheader,{children:i.label},`subHeader-${i.label}-${D}`);let W=null,K=null;if(i.icon){const F=i.icon;W=(0,S.jsx)(q.ListItemIcon,{children:(0,S.jsx)(F,{})})}"subMenu"in i?K=(0,S.jsx)(Ce,{type:"subMenu"}):(i.type==="checkbox"||i.type==="radio")&&(K=(0,S.jsx)(Ce,{type:i.type,checked:i.checked,disabled:i.disabled}));const le="onClick"in i?O(i.onClick):void 0;return(0,S.jsxs)(q.MenuItem,{style:f,selected:D===_,onClick:le,onMouseMove:F=>{F.currentTarget!==document.activeElement&&(F.currentTarget.focus(),v(D)),"subMenu"in i?a!==D&&(l(F.currentTarget),r(D)):(l(void 0),r(void 0))},onKeyDown:F=>{switch(F.key){case"ArrowLeft":case"Escape":{p==null||p(F,"escapeKeyDown");break}case"ArrowUp":{v(Rt(x,D));break}case"ArrowDown":{const ie=zt(x,D);v(ie);break}default:"subMenu"in i&&(F.key==="ArrowRight"||F.key==="Enter")&&(l(F.currentTarget),r(D),g(!0))}},disabled:!!i.disabled,children:[W,(0,S.jsx)(q.ListItemText,{primary:i.label,secondary:i.subLabel,inset:L&&!i.icon}),K]},i.id||String(i.label))})}),x.map((i,D)=>{let W=null;return"subMenu"in i&&(W=(0,S.jsx)(et,{anchorEl:n,open:c&&a===D,onClose:()=>{g(!1),l(void 0)},onMenuItemClick:P,menuItems:i.subMenu},i.id||String(i.label))),W})]});return $?H:(0,S.jsx)(q.Grow,{in:k,style:{transformOrigin:"0 0 0"},ref:o,children:(0,S.jsx)(q.Paper,{elevation:8,ref:h,className:j.paper,style:{...d},children:H})})});function Ht(e){const{open:t,onClose:o,menuItems:n,onMenuItemClick:l,...a}=e;return(0,S.jsx)(q.Popover,{open:t,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"right",...a.anchorOrigin},transformOrigin:{vertical:"top",horizontal:"left",...a.transformOrigin},...a,children:(0,S.jsx)(et,{open:t,onClose:o,menuItems:n,onMenuItemClick:l,top:!0})})}Y.default=Ht;var tt=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(he,"__esModule",{value:!0});const m=I,J=N,qt=tt(ht),U=R,Ut=tt(mt),oe=Ve,ze=Y,Q=(0,J.createContext)({parentPopupState:null,rootPopupState:null});function Nt({onClick:e,closeAfterItemClick:t,...o}){const{rootPopupState:n}=(0,J.useContext)(Q);if(!n)throw new Error("must be used inside a CascadingMenu");return(0,m.jsx)(U.MenuItem,{...o,onClick:l=>{t&&n.close(),e==null||e(l)}})}function Vt({title:e,Icon:t,inset:o,popupId:n,...l}){const{parentPopupState:a}=(0,J.useContext)(Q),r=(0,oe.usePopupState)({popupId:n,variant:"popover",parentPopupState:a});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(U.MenuItem,{...(0,oe.bindHover)(r),...(0,oe.bindFocus)(r),children:[t?(0,m.jsx)(U.ListItemIcon,{children:(0,m.jsx)(t,{})}):null,(0,m.jsx)(U.ListItemText,{primary:e,inset:o}),(0,m.jsx)(qt.default,{})]}),(0,m.jsx)(Wt,{...l,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},popupState:r})]})}function Wt({popupState:e,onMenuItemClick:t,menuItems:o,classes:n,...l}){const{rootPopupState:a}=(0,J.useContext)(Q),r=(0,J.useMemo)(()=>({rootPopupState:a||e,parentPopupState:e}),[a,e]);return(0,m.jsx)(Q.Provider,{value:r,children:(0,m.jsx)(Ut.default,{...l,...(0,oe.bindMenu)(e)})})}function Gt({popupState:e,onMenuItemClick:t,menuItems:o,...n}){const{rootPopupState:l}=(0,J.useContext)(Q),a=(0,J.useMemo)(()=>({rootPopupState:l||e,parentPopupState:e}),[l,e]);return(0,m.jsx)(Q.Provider,{value:a,children:(0,m.jsx)(U.Menu,{...n,...(0,oe.bindMenu)(e)})})}function Jt({item:e}){return"subMenu"in e?(0,m.jsx)(ze.MenuItemEndDecoration,{type:"subMenu"}):e.type==="checkbox"||e.type==="radio"?(0,m.jsx)(ze.MenuItemEndDecoration,{type:e.type,checked:e.checked,disabled:e.disabled}):null}function nt({onMenuItemClick:e,closeAfterItemClick:t,menuItems:o,...n}){function l(r){return c=>{e(c,r)}}const a=o.some(r=>"icon"in r&&r.icon);return(0,m.jsx)(m.Fragment,{children:o.sort((r,c)=>(c.priority||0)-(r.priority||0)).map((r,c)=>"subMenu"in r?(0,m.jsx)(Vt,{popupId:`subMenu-${r.label}`,title:r.label,Icon:r.icon,inset:a&&!r.icon,onMenuItemClick:e,menuItems:r.subMenu,children:(0,m.jsx)(nt,{...n,closeAfterItemClick:t,onMenuItemClick:e,menuItems:r.subMenu})},`subMenu-${r.label}-${c}`):r.type==="divider"?(0,m.jsx)(U.Divider,{component:"li"},`divider-${JSON.stringify(r)}-${c}`):r.type==="subHeader"?(0,m.jsx)(U.ListSubheader,{children:r.label},`subHeader-${r.label}-${c}`):(0,m.jsxs)(Nt,{closeAfterItemClick:t,onClick:"onClick"in r?l(r.onClick):void 0,disabled:!!r.disabled,children:[r.icon?(0,m.jsx)(U.ListItemIcon,{children:(0,m.jsx)(r.icon,{})}):null," ",(0,m.jsx)(U.ListItemText,{primary:r.label,secondary:r.subLabel,inset:a&&!r.icon}),(0,m.jsx)("div",{style:{flexGrow:1,minWidth:10}}),(0,m.jsx)(Jt,{item:r})]},`${r.label}-${c}`))})}function Kt(e){const{closeAfterItemClick:t=!0,...o}=e;return(0,m.jsx)(Gt,{...o,children:(0,m.jsx)(nt,{...o,closeAfterItemClick:t})})}he.default=Kt;var ke={},Zt=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ke,"__esModule",{value:!0});const se=I,Xt=N,Yt=Zt(he),Qt=R,be=Ve,en=pe,tn=(0,en.observer)(function({children:t,menuItems:o,closeAfterItemClick:n=!0,stopPropagation:l,setOpen:a,onClick:r,...c}){const g=(0,be.usePopupState)({popupId:"viewMenu",variant:"popover"}),{onClick:_,onTouchStart:v,...d}=(0,be.bindTrigger)(g),{isOpen:b}=g;return(0,Xt.useEffect)(()=>{a==null||a(b)},[b,a]),(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Qt.IconButton,{onClick:h=>{l&&h.stopPropagation(),_(h),r==null||r()},onTouchStart:h=>{l&&h.stopPropagation(),v(h),r==null||r()},...d,...c,disabled:o.length===0,children:t}),(0,se.jsx)(Yt.default,{...(0,be.bindPopover)(g),onMenuItemClick:(h,j)=>{j()},menuItems:o,closeAfterItemClick:n,popupState:g})]})});var Un=ke.default=tn,Se={},nn=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Se,"__esModule",{value:!0});const ue=I,ee=N,on=nn(vt),je=R,rn=re,an=(0,rn.makeStyles)()(e=>({input:{},inputBase:{},typography:{top:6,left:2,position:"absolute",whiteSpace:"nowrap",visibility:"hidden"},inputRoot:{padding:e.spacing(.5)},inputFocused:{borderStyle:"solid",borderWidth:2}})),ln=(0,ee.forwardRef)(function(t,o){const{value:n,setValue:l,variant:a,...r}=t,[c,{width:g}]=(0,on.default)(),[_,v]=(0,ee.useState)(),[d,b]=(0,ee.useState)(null),[h,j]=(0,ee.useState)(!1);(0,ee.useEffect)(()=>{h&&(d==null||d.blur(),j(!1))},[h,d]);const{classes:x}=an(t,{props:t}),P=(0,je.useTheme)(),k=_===void 0?n:_;return(0,ue.jsxs)("div",{...r,ref:o,children:[(0,ue.jsx)("div",{style:{position:"relative"},children:(0,ue.jsx)(je.Typography,{ref:c,component:"span",variant:a,className:x.typography,children:k})}),(0,ue.jsx)(je.InputBase,{inputRef:p=>{b(p)},className:x.inputBase,inputProps:{style:{width:g,...a&&a!=="inherit"?P.typography[a]:{}}},classes:{input:x.input,root:x.inputRoot,focused:x.inputFocused},value:k,onChange:p=>{v(p.target.value)},onKeyDown:p=>{p.key==="Enter"?d==null||d.blur():p.key==="Escape"&&(v(void 0),j(!0))},onBlur:()=>{l(_||n||""),v(void 0)}})]})});Se.default=ln;var $e={},De={},sn=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(De,"__esModule",{value:!0});De.default=cn;const Z=I,un=sn(Ge()),te=R;function cn({onClose:e,open:t,onFactoryReset:o}){function n(l){l==="reset"&&o(),e()}return(0,Z.jsxs)(un.default,{title:"Reset",onClose:()=>{n()},open:t,children:[(0,Z.jsx)(te.DialogContent,{children:(0,Z.jsx)(te.DialogContentText,{children:"Are you sure you want to reset? This will restore the default configuration."})}),(0,Z.jsxs)(te.DialogActions,{children:[(0,Z.jsx)(te.Button,{onClick:()=>{n()},color:"primary",children:"Cancel"}),(0,Z.jsx)(te.Button,{onClick:()=>{n("reset")},color:"primary",variant:"contained",children:"OK"})]})]})}var ot=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($e,"__esModule",{value:!0});$e.default=hn;const A=I,dn=N,X=R,fn=ot(Je()),pn=ot(De),gn=({onFactoryReset:e,resetButtonText:t})=>{const[o,n]=(0,dn.useState)(!1);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(X.Button,{"data-testid":"fatal-error",color:"primary",variant:"contained",onClick:()=>{n(!0)},children:t}),(0,A.jsx)(pn.default,{onClose:()=>{n(!1)},open:o,onFactoryReset:e})]})};function hn({componentStack:e,error:t="No error message provided",onFactoryReset:o,resetButtonText:n="Factory Reset"}){return(0,A.jsxs)(X.Dialog,{maxWidth:"xl",open:!0,children:[(0,A.jsx)(X.DialogTitle,{children:"Fatal error"}),(0,A.jsxs)(X.DialogContent,{children:[(0,A.jsx)(fn.default,{error:t}),(0,A.jsx)("pre",{children:e})]}),(0,A.jsxs)(X.DialogActions,{children:[(0,A.jsx)(X.Button,{color:"secondary",variant:"contained",onClick:()=>{window.location.reload()},children:"Refresh"}),(0,A.jsx)(gn,{onFactoryReset:o,resetButtonText:n})]})]})}var rt={},we={},Le={};Object.defineProperty(Le,"__esModule",{value:!0});const V=I,G=R,mn=re,vn=fe(),Re=yt;function yn(e){return"localPath"in e}function He(e){return"blobId"in e}const _n=(0,mn.makeStyles)()(e=>({filename:{marginLeft:e.spacing(1)}}));function bn({location:e,setLocation:t}){const{classes:o}=_n(),n=e&&(He(e)&&e.name||yn(e)&&e.localPath),l=e&&He(e)&&!(0,Re.getBlob)(e.blobId);return(0,V.jsxs)(G.Box,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,V.jsx)(G.Box,{children:(0,V.jsx)(G.FormControl,{fullWidth:!0,children:(0,V.jsxs)(G.Button,{variant:"outlined",component:"label",children:["Choose File",(0,V.jsx)("input",{type:"file",hidden:!0,onChange:({target:a})=>{var r;const c=(r=a.files)===null||r===void 0?void 0:r[0];if(c)if(vn.isElectron){const{webUtils:g}=window.require("electron");t({localPath:g.getPathForFile(c),locationType:"LocalPathLocation"})}else t((0,Re.storeBlobLocation)({blob:c}))}})]})})}),(0,V.jsxs)(G.Box,{children:[(0,V.jsx)(G.Typography,{component:"span",className:o.filename,color:n?"initial":"textSecondary",children:n||"No file chosen"}),l?(0,V.jsx)(G.Typography,{color:"error",children:"(need to reload)"}):null]})]})}Le.default=bn;var Te={};Object.defineProperty(Te,"__esModule",{value:!0});const jn=I,xn=R,Mn=pe,Cn=We(),Pn=(0,Mn.observer)(function({location:e,label:t,style:o,setLocation:n}){return(0,jn.jsx)(xn.TextField,{variant:"outlined",fullWidth:!0,defaultValue:e&&(0,Cn.isUriLocation)(e)?e.uri:"",label:t||"Enter URL",style:o,onChange:l=>{n({uri:l.target.value.trim(),locationType:"UriLocation"})},slotProps:{htmlInput:{"data-testid":"urlInput"}}})});Te.default=Pn;var Oe=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(we,"__esModule",{value:!0});const y=I,ce=N,kn=Oe(_t),B=R,Sn=pe,$n=Oe(Le),Dn=Oe(Te),xe=fe(),ne=We(),qe=2;function wn(e){const{title:t,children:o,...n}=e;return(0,y.jsx)(B.Tooltip,{title:t||"",children:(0,y.jsx)(B.ToggleButton,{...n,children:o})})}function Ue(e,t){return typeof e=="string"&&e.length>t?`${e.slice(0,Math.max(0,t))}â€¦`:e}function Ln({children:e}){return(0,y.jsx)("div",{style:{display:"flex",gap:4},children:e})}function Tn({children:e}){return(0,y.jsx)(B.Box,{display:"flex",flexDirection:"row",children:(0,y.jsx)(B.Box,{children:e})})}function Ne(e){const{setLocation:t,inline:o,toggleButtonValue:n,selectedAccount:l}=e;return(0,y.jsx)(y.Fragment,{children:l!=null&&l.SelectorComponent?(0,y.jsx)(l.SelectorComponent,{...e,setLocation:t}):n==="url"?(0,y.jsx)(Dn.default,{...e,setLocation:t,label:l==null?void 0:l.selectorLabel,style:o?{margin:0}:void 0}):n==="file"?(0,y.jsx)($n.default,{...e}):null})}const On=(0,Sn.observer)(function(e){const{inline:t,location:o,name:n,description:l,rootModel:a,setLocation:r}=e,c=!o||(0,ne.isUriLocation)(o)?"url":"file",[g,_]=(0,ce.useState)(o&&"internetAccountId"in o&&o.internetAccountId?o.internetAccountId:c),v=(0,ne.isAppRootModel)(a)?a.internetAccounts.filter(f=>f.type!=="HTTPBasicInternetAccount"):[],[d,b]=(0,xe.useLocalStorage)("fileSelector-recentlyUsedInternetAccounts",[]),h=Object.fromEntries(v.map(f=>[f.internetAccountId,f])),j=[...new Set(v.map(f=>f.internetAccountId))].sort((f,O)=>d.indexOf(f)-d.indexOf(O)),x=j.slice(0,qe),P=j.slice(qe),[k,p]=(0,ce.useState)(null),M=h[g],$=(0,ce.useCallback)(f=>{r({...f,...M&&(0,ne.isUriLocation)(f)?{internetAccountId:M.internetAccountId}:{}})},[r,M]);(0,ce.useEffect)(()=>{M&&(0,ne.isUriLocation)(o)&&o.internetAccountId!==M.internetAccountId&&$(o)},[o,M,$]);const L=t?Ln:Tn;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(B.Box,{display:"flex",children:(0,y.jsx)(B.InputLabel,{shrink:!0,children:n})}),(0,y.jsxs)(B.FormGroup,{children:[(0,y.jsxs)(L,{children:[(0,y.jsxs)(B.ToggleButtonGroup,{value:g,exclusive:!0,size:"small",onChange:(f,O)=>{b([...new Set([O,...d].filter(xe.notEmpty))]),O&&_(O),(0,ne.isUriLocation)(o)&&$(o)},"aria-label":"file, url, or account picker",children:[new URLSearchParams(window.location.search).get("adminKey")?null:(0,y.jsx)(B.ToggleButton,{size:"small",value:"file","aria-label":"local file",children:"File"}),(0,y.jsx)(B.ToggleButton,{size:"small",value:"url","aria-label":"url",children:"URL"}),x.map(f=>{const{internetAccountId:O,name:H,toggleContents:i}=h[f];return(0,y.jsx)(wn,{value:O,title:H,children:typeof i=="string"?Ue(i,5):i||Ue(H,5)},f)}),P.length>0?(0,y.jsxs)(B.ToggleButton,{onClick:f=>{p(f.target)},selected:!1,children:["More",(0,y.jsx)(kn.default,{})]}):null]}),t?(0,y.jsx)(Ne,{...e,toggleButtonValue:g,selectedAccount:M,setLocation:$}):null]}),t?null:(0,y.jsx)(Ne,{...e,toggleButtonValue:g,selectedAccount:M,setLocation:$})]}),(0,y.jsx)(B.FormHelperText,{children:l}),k?(0,y.jsx)(B.Menu,{open:!0,anchorEl:k,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:()=>{p(null)},children:P.map(f=>{const{internetAccountId:O,name:H}=h[f];return(0,y.jsx)(B.MenuItem,{value:O,onClick:()=>{b([...new Set([O,...d].filter(xe.notEmpty))]),_(O),p(null)},children:H},f)})}):null]})});we.default=On;(function(e){var t=C&&C.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=we;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(o).default}})})(rt);var Be={};Object.defineProperty(Be,"__esModule",{value:!0});const Bn=I,Me=N,Fn=bt;function In(e){const{width:t,height:o,highResolutionScaling:n=1,style:l={},imageData:a,blockKey:r,showSoftClip:c}=e,[g,_]=(0,Me.useState)(!1),v=(0,Me.useRef)(null);return(0,Me.useEffect)(()=>{if(!a)return;const d=v.current;if(!d)return;const b=d.getContext("2d");b&&((0,Fn.drawImageOntoCanvasContext)(a,b),_(!0))},[a]),(0,Bn.jsx)("canvas",{"data-testid":["prerendered_canvas",c?"softclipped":"",r,g?"done":""].filter(d=>!!d).join("_"),ref:v,width:t*n,height:o*n,style:{width:t,height:o,...l}})}Be.default=In;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});const En=I,de=N,An=re,zn=(0,An.makeStyles)()({horizontalHandle:{cursor:"row-resize",width:"100%"},verticalHandle:{cursor:"col-resize",height:"100%"},flexbox_verticalHandle:{cursor:"col-resize",alignSelf:"stretch"},flexbox_horizontalHandle:{cursor:"row-resize",alignSelf:"stretch"}});function Rn({onDrag:e,vertical:t=!1,flexbox:o=!1,className:n,onMouseDown:l,...a}){const[r,c]=(0,de.useState)(!1),g=(0,de.useRef)(0),_=(0,de.useRef)(0),{classes:v,cx:d}=zn();(0,de.useEffect)(()=>{function h(x){x.preventDefault();const P=t?x.clientX:x.clientY,k=g.current-P,p=P-_.current;_.current=P,e(p,k)}function j(){c(!1)}return r?(window.addEventListener("mousemove",h,!0),window.addEventListener("mouseup",j,!0),()=>{window.removeEventListener("mousemove",h,!0),window.removeEventListener("mouseup",j,!0)}):()=>{}},[r,e,t]);let b;return o?b=t?v.flexbox_verticalHandle:v.flexbox_horizontalHandle:t?b=v.verticalHandle:b=v.horizontalHandle,(0,En.jsx)("div",{"data-resizer":"true",onMouseDown:h=>{h.preventDefault();const j=t?h.clientX:h.clientY;g.current=j,_.current=j,c(!0),l==null||l(h)},className:d(b,n),...a})}Fe.default=Rn;(function(e){var t=C&&C.__createBinding||(Object.create?function(p,M,$,L){L===void 0&&(L=$);var f=Object.getOwnPropertyDescriptor(M,$);(!f||("get"in f?!M.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return M[$]}}),Object.defineProperty(p,L,f)}:function(p,M,$,L){L===void 0&&(L=$),p[L]=M[$]}),o=C&&C.__exportStar||function(p,M){for(var $ in p)$!=="default"&&!Object.prototype.hasOwnProperty.call(M,$)&&t(M,p,$)},n=C&&C.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.VIEW_HEADER_HEIGHT=e.SanitizedHTML=e.ResizeHandle=e.PrerenderedCanvas=e.Menu=e.LoadingEllipses=e.FileSelector=e.FatalErrorDialog=e.ErrorMessage=e.EditableTypography=e.Dialog=e.CascadingMenuButton=e.CascadingMenu=e.AssemblySelector=e.Logomark=e.LogoFull=void 0,o(Ke,e);var l=ge;Object.defineProperty(e,"LogoFull",{enumerable:!0,get:function(){return l.LogoFull}}),Object.defineProperty(e,"Logomark",{enumerable:!0,get:function(){return l.Logomark}});var a=Pe;Object.defineProperty(e,"AssemblySelector",{enumerable:!0,get:function(){return n(a).default}});var r=he;Object.defineProperty(e,"CascadingMenu",{enumerable:!0,get:function(){return n(r).default}});var c=ke;Object.defineProperty(e,"CascadingMenuButton",{enumerable:!0,get:function(){return n(c).default}});var g=Ge();Object.defineProperty(e,"Dialog",{enumerable:!0,get:function(){return n(g).default}});var _=Se;Object.defineProperty(e,"EditableTypography",{enumerable:!0,get:function(){return n(_).default}});var v=Je();Object.defineProperty(e,"ErrorMessage",{enumerable:!0,get:function(){return n(v).default}});var d=$e;Object.defineProperty(e,"FatalErrorDialog",{enumerable:!0,get:function(){return n(d).default}});var b=rt;Object.defineProperty(e,"FileSelector",{enumerable:!0,get:function(){return n(b).default}});var h=jt;Object.defineProperty(e,"LoadingEllipses",{enumerable:!0,get:function(){return n(h).default}});var j=Y;Object.defineProperty(e,"Menu",{enumerable:!0,get:function(){return n(j).default}});var x=Be;Object.defineProperty(e,"PrerenderedCanvas",{enumerable:!0,get:function(){return n(x).default}});var P=Fe;Object.defineProperty(e,"ResizeHandle",{enumerable:!0,get:function(){return n(P).default}});var k=xt;Object.defineProperty(e,"SanitizedHTML",{enumerable:!0,get:function(){return n(k).default}}),o(Y,e),e.VIEW_HEADER_HEIGHT=28})(Mt);export{ke as C,Un as _,Mt as u};
//# sourceMappingURL=index-CmLsXt2o.js.map
