import{u as f,y as i,ah as l}from"./index-B3kPj2Rj.js";function r(o,s){if(typeof o=="object"&&o!==null)for(const e of Object.keys(o))typeof o[e]=="object"&&o[e]!==null?r(o[e],s):e==="uri"&&(o.baseUri=s.href)}function u(o,s){return new URL(o,s).href}async function d(o){var s;const e=f.getSession(o);try{const n=i.getConf(o,"configJsonLocation"),t=JSON.parse(await l.openLocation(n).readFile("utf8")),c=u(n.uri,n.baseUri);if(r(t,new URL(c)),t.assemblies)for(const a of t.assemblies)e.assemblyManager.get(a.name)||e.addSessionAssembly(a);t.tracks&&o.addTrackConfs(t.tracks),e.notify("Successfully loaded","success")}catch(n){console.error(n),e.notifyError(`${i.getConf(o,"name")}: "${n}"`,n),(s=e.breakConnection)===null||s===void 0||s.call(e,o.configuration)}}export{d as doConnect};
//# sourceMappingURL=doConnect-CZjmCbMy.js.map
