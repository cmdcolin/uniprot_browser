import{u as L,ag as y}from"./index-DPMJgfAS.js";import{p as b}from"./parseLineByLine-Cz_4ZyEp.js";import q from"./PAFAdapter-nBgCWaS3.js";import"./index-D3TbvS_u.js";import"./rxjs-DiVqhxS9.js";import"./index-usVTM9_X.js";import"./util-66Cgxenk.js";function A(c,e,l,p,u,a,i,r,s){return{qname:c,qstart:e,qend:l,tname:u,tstart:a,tend:i,strand:p==="-"?-1:1,extra:{numMatches:s,blockLen:Math.max(l-e,i-a),mappingQual:0,cg:r}}}function C(c,e){const{statusCallback:l=()=>{}}=e||{};let p="",u=0,a=0,i="",r="",s="",f=0,m=0,_=0,n="";const g=[];return b.parseLineByLine(c,d=>{if(!d||d.startsWith("#"))return!0;const t=d.split(/[ \t]+/);if(t[0]==="chain"){if(n&&g.push(A(i,f,m,s,p,u,a,n,_)),p=t[2],u=+t[5],a=+t[6],i=t[7],r=t[8],s=t[9],f=+t[10],m=+t[11],s==="-"){const o=f;f=+r-m,m=+r-o}_=0,n=""}else{const o=+t[0]||0,h=t.length>1?+t[1]:0,x=t.length>2?+t[2]:0;o!==0&&(_+=+o,n+=`${o}M`),x!==0&&(n+=`${x}I`),h!==0&&(n+=`${h}D`)}return!0},e?.statusCallback),l(""),g}class P extends q{async setupPre(e){return C(await L.fetchAndMaybeUnzip(y.openLocation(this.getConf("chainLocation"),this.pluginManager),e),e)}}export{P as default};
//# sourceMappingURL=ChainAdapter-DvMPSJ8T.js.map
