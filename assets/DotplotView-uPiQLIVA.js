const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./WarningDialog-uM-w7dhT.js","./index-B3kPj2Rj.js","./index-DzaTm5oQ.css","./DialogContentText-BJzbeSoo.js","./DataGrid-Dgd1aEF_.js","./index-DqkJqhbV.js","./utils-BwPRrx3T.js","./getThemeProps-BbKRYxDH.js","./MenuItem-D9_xBR9N.js","./dividerClasses-B-wJULXt.js","./Divider-DCzRIyLN.js","./Badge-CuqxGOPa.js","./TableCell-AIVdwsWn.js","./DotplotTooltipClick-D3Yph5F5.js","./DotplotTooltipMouseover-Bwh3Iynn.js"])))=>i.map(i=>d[i]);
import{aa as B,j as e,c$ as se,o as g,an as k,cx as ne,cy as oe,ap as re,ci as de,co as pe,a as i,aM as he,B as q,_ as Y,m as D,P as O,d9 as me,T as _,u as A,am as fe,cZ as xe,c as w,f as $,ak as ye,t as je,y as ge,aj as ie,bo as ve,cA as ae,c_ as we}from"./index-B3kPj2Rj.js";import{a as be,b as Ce,c as Se}from"./Grid-C0lheur5.js";import{A as ke}from"./ArrowRight-D4T4CREt.js";import{R as ce}from"./RadioGroup-Dc6z2jM9.js";import{G as X}from"./Grid-Gln3XP22.js";import{R as W}from"./Radio-BrcTy3_C.js";import{M as Le}from"./MenuItem-D9_xBR9N.js";import{C as Me}from"./Container-Dz_A6leC.js";import"./getThemeProps-BbKRYxDH.js";import"./useThemeProps-B1T1idtA.js";import"./dividerClasses-B-wJULXt.js";const Ae=B(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14z"})),ze=B(e.jsx("path",{d:"M19 5H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 12H5V7h14z"})),Ee=B(e.jsx("path",{d:"M12.01 5.5 10 8h4zM18 10v4l2.5-1.99zM6 10l-2.5 2.01L6 14zm8 6h-4l2.01 2.5zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16.01H3V4.99h18z"}));function Ie(t){return e.jsx(se,{...t,children:e.jsx("path",{fill:"currentColor",d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"})})}function Te(t){return e.jsx(se,{...t,children:e.jsx("path",{fill:"currentColor",d:"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"})})}const Ne=g(function({model:t}){return e.jsxs("div",{children:[e.jsx(k,{onClick:()=>{t.zoomOut()},children:e.jsx(ne,{})}),e.jsx(k,{onClick:()=>{t.zoomIn()},children:e.jsx(oe,{})}),e.jsx(k,{onClick:()=>t.activateTrackSelector(),title:"Open track selector",children:e.jsx(re.TrackSelector,{})}),e.jsx(de,{menuItems:[{label:"Square view - same bp per pixel",icon:Ae,onClick:()=>{t.squareView()}},{label:"Rectangular view - same total bp",icon:ze,onClick:()=>{t.squareViewProportional()}},{label:"Show all regions",icon:Ee,onClick:()=>{t.showAllRegions()}},{type:"checkbox",label:"Draw CIGAR",checked:t.drawCigar,onClick:()=>{t.setDrawCigar(!t.drawCigar)}},{label:"Show pan buttons",type:"checkbox",checked:t.showPanButtons,onClick:()=>{t.setShowPanButtons(!t.showPanButtons)}},{label:"Click and drag mode",subMenu:[{label:"Pan by default, select region when ctrl/cmd key is held",icon:Ie,type:"radio",checked:t.cursorMode==="move",onClick:()=>{t.setCursorMode("move")}},{label:"Select region by default, pan when ctrl/cmd key is held",icon:Te,type:"radio",checked:t.cursorMode==="crosshair",onClick:()=>{t.setCursorMode("crosshair")}}]},{label:"Wheel scroll mode",subMenu:[{label:"Pans view",type:"radio",checked:t.wheelMode==="pan",onClick:()=>{t.setWheelMode("pan")}},{label:"Zooms view",type:"radio",checked:t.wheelMode==="zoom",onClick:()=>{t.setWheelMode("zoom")}},{label:"Disable",type:"radio",checked:t.wheelMode==="none",onClick:()=>{t.setWheelMode("none")}}]}],children:e.jsx(pe,{})})]})}),Pe=i.lazy(()=>Y(()=>import("./WarningDialog-uM-w7dhT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url)),De=g(function({model:t}){const n=t.tracks.filter(c=>{var l;return(l=c.displays[0].warnings)===null||l===void 0?void 0:l.length}),[s,o]=i.useState(!1),[r,a]=i.useState(!1);return n.length&&!r?e.jsxs(he,{severity:"warning",children:["Warnings during render"," ",e.jsx(q,{onClick:()=>{o(!0)},children:"More info"}),s?e.jsx(Pe,{trackWarnings:n,handleClose:()=>{o(!1)}}):null,e.jsx(q,{variant:"contained",onClick:()=>{a(!0)},children:"Dismiss"})]}):null}),Fe=B(e.jsx("path",{d:"m7 14 5-5 5 5z"})),Ve=B(e.jsx("path",{d:"m14 7-5 5 5 5z"})),Re=D()({dpad:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",margin:0,position:"absolute",right:50,zIndex:500,top:50},icon:{padding:0,margin:0}}),_e=g(function({model:n}){const{classes:s}=Re();return e.jsxs(O,{className:s.dpad,elevation:6,children:[e.jsx("div",{}),e.jsx(k,{className:s.icon,onClick:()=>{n.vview.scroll(100)},children:e.jsx(Fe,{})}),e.jsx("div",{}),e.jsx(k,{className:s.icon,onClick:()=>{n.hview.scroll(-100)},children:e.jsx(Ve,{})}),e.jsx("div",{}),e.jsx(k,{className:s.icon,onClick:()=>{n.hview.scroll(100)},children:e.jsx(ke,{})}),e.jsx("div",{}),e.jsx(k,{className:s.icon,onClick:()=>{n.vview.scroll(-100)},children:e.jsx(me,{})}),e.jsx("div",{}),e.jsx(k,{className:s.icon,onClick:()=>{n.zoomIn()},children:e.jsx(oe,{})}),e.jsx("div",{}),e.jsx(k,{className:s.icon,onClick:()=>{n.zoomOut()},children:e.jsx(ne,{})})]})}),Be=D()({bp:{display:"flex",alignItems:"center",marginLeft:10},spacer:{flexGrow:1},headerBar:{display:"flex",position:"relative"}}),He=g(function({model:t,selection:n}){const{classes:s}=Be(),{hview:o,vview:r,showPanButtons:a}=t;return e.jsxs("div",{className:s.headerBar,children:[e.jsx(Ne,{model:t}),e.jsxs(_,{className:s.bp,variant:"body2",color:"textSecondary",children:["x: ",o.assemblyNames.join(",")," ",A.getBpDisplayStr(o.currBp),e.jsx("br",{}),"y: ",r.assemblyNames.join(",")," ",A.getBpDisplayStr(r.currBp)]}),n?e.jsxs(_,{className:s.bp,variant:"body2",color:"textSecondary",children:[`width:${A.getBpDisplayStr(o.bpPerPx*n.width)}`," ",e.jsx("br",{}),`height:${A.getBpDisplayStr(r.bpPerPx*n.height)}`]}):null,e.jsx("div",{className:s.spacer}),e.jsx(De,{model:t}),a?e.jsx(_e,{model:t}):null]})});function $e({radioOption:t,assembly1:n,assembly2:s,fileLocation:o,indexFileLocation:r,bed1Location:a,bed2Location:c}){if(t===".paf")return{type:"PAFAdapter",pafLocation:o,queryAssembly:n,targetAssembly:s};if(t===".out")return{type:"MashMapAdapter",outLocation:o,queryAssembly:n,targetAssembly:s};if(t===".delta")return{type:"DeltaAdapter",deltaLocation:o,queryAssembly:n,targetAssembly:s};if(t===".chain")return{type:"ChainAdapter",chainLocation:o,queryAssembly:n,targetAssembly:s};if(t===".anchors")return{type:"MCScanAnchorsAdapter",mcscanAnchorsLocation:o,bed1Location:a,bed2Location:c,assemblyNames:[n,s]};if(t===".anchors.simple")return{type:"MCScanSimpleAnchorsAdapter",mcscanSimpleAnchorsLocation:o,bed1Location:a,bed2Location:c,assemblyNames:[n,s]};if(t===".pif.gz")return{type:"PairwiseIndexedPAFAdapter",pifGzLocation:o,index:{location:r},assemblyNames:[n,s]};throw new Error(`Unknown to detect type ${t} from filename (select radio button to clarify)`)}const We={".paf":"minimap2 target.fa query.fa",".pif.gz":"minimap2 target.fa query.fa",".out":"mashmap target.fa query.fa",".delta":"mummer target.fa query.fa",".chain":"e.g. queryToTarget.chain"},qe=D()({row:{display:"flex",gap:20},swap:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:4,alignItems:"center"}}),J=g(function({assembly1:t,assembly2:n,swap:s,setSwap:o,radioOption:r,helpContent:a,text1:c,text2:l}){const{classes:m}=qe();return e.jsxs("div",{children:[e.jsxs("div",{children:["Verify or click swap",e.jsx(fe,{title:a||e.jsx("code",{children:We[r]}),children:e.jsx(xe,{})})]}),e.jsxs("div",{className:m.row,children:[e.jsxs("div",{className:m.swap,children:[e.jsx("div",{children:e.jsx("i",{children:s?n:t})}),e.jsx("div",{children:c}),e.jsx("div",{children:e.jsx("i",{children:s?t:n})}),e.jsx("div",{children:l})]}),e.jsx(q,{variant:"contained",onClick:()=>{o&&o(!s)},children:"Swap?"})]})]})}),Oe=g(function({assembly1:t,assembly2:n,swap:s,setSwap:o,fileLocation:r,setFileLocation:a,bed1Location:c,setBed1Location:l,bed2Location:m,setBed2Location:d,radioOption:p}){return e.jsxs("div",{children:[e.jsxs("div",{style:{margin:20},children:["Open the ",p," and .bed files for both genome assemblies from the MCScan (Python version) pipeline"," ",e.jsx("a",{href:"https://github.com/tanghaibao/jcvi/wiki/MCscan-(Python-version)",children:"(more info)"})]}),e.jsxs("div",{children:[e.jsx(w.FileSelector,{inline:!0,name:p,location:r,setLocation:u=>{a(u)}}),e.jsx(w.FileSelector,{inline:!0,name:"genome 1 .bed (left column of anchors file)",description:"",location:c,setLocation:u=>{l&&l(u)}}),e.jsx(w.FileSelector,{inline:!0,name:"genome 2 .bed (right column of anchors file)",description:"",location:m,setLocation:u=>{d&&d(u)}})]}),e.jsx(J,{swap:s,radioOption:p,assembly1:t,assembly2:n,setSwap:o,text1:"bed 1 assembly",text2:"bed 2 assembly"})]})}),Ke=g(function({assembly1:t,assembly2:n,swap:s,setSwap:o,fileLocation:r,setFileLocation:a,indexFileLocation:c=void 0,setIndexFileLocation:l=()=>{},radioOption:m}){return e.jsxs("div",{children:[e.jsxs("div",{style:{margin:20},children:["Open the ",m," and .pif.gz and index file (.pif.gz.tbi or .pif.gz.csi) files for created by `jbrowse make-pif`"]}),e.jsxs("div",{style:{maxWidth:400,margin:"0 auto"},children:[e.jsx(w.FileSelector,{name:`${m} location`,inline:!0,description:"",location:r,setLocation:a}),e.jsx(w.FileSelector,{name:`${m} index location (.tbi or .csi)`,inline:!0,description:"",location:c,setLocation:l}),e.jsx(J,{swap:s,radioOption:m,assembly1:t,assembly2:n,setSwap:o,text1:"query assembly",text2:"target assembly"})]})]})}),Ge=D()({container:{display:"flex",flexDirection:"column",gap:10}}),Ue=g(function({assembly1:t,assembly2:n,swap:s,setSwap:o,fileLocation:r,setFileLocation:a,radioOption:c}){const{classes:l}=Ge();return e.jsxs("div",{className:l.container,children:[e.jsx(w.FileSelector,{name:`${c} location`,inline:!0,description:"",location:r,setLocation:m=>{a(m)}}),e.jsx(J,{assembly1:t,assembly2:n,swap:s,setSwap:o,radioOption:c,text1:"query assembly",text2:"target assembly"})]})});function Ze(t){return t?t.uri||t.localPath||t.name:void 0}function Xe(t){return t.endsWith(".gz")?t.slice(0,-3):t}function Ye(t){return t.split("#")[0].split("?")[0].split("/").pop()}function Je(t){const n=t.split(".").pop();return n?`.${n}`:""}const Qe=g(function({model:t,assembly1:n,assembly2:s}){const[o,r]=i.useState(!1),[a,c]=i.useState(),[l,m]=i.useState(),[d,p]=i.useState(),[u,x]=i.useState(),[K,z]=i.useState(""),[L,E]=i.useState(),C=Ze(d),y=K||(C?Je(Xe(C)):"");return i.useEffect(()=>{try{if(d){const v=C?Ye(C):"MyTrack",H=`${v}-${Date.now()}-sessionTrack`;E(void 0),t.setImportFormSyntenyTrack(0,{type:"userOpened",value:{trackId:H,name:v,assemblyNames:[s,n],type:"SyntenyTrack",adapter:$e({radioOption:y,assembly1:o?s:n,assembly2:o?n:s,fileLocation:d,indexFileLocation:u,bed1Location:l,bed2Location:a})}})}}catch(v){console.error(v),E(v)}},[o,t,C,n,s,l,a,d,u,y]),e.jsxs(O,{style:{padding:12},children:[L?e.jsx(w.ErrorMessage,{error:L}):null,e.jsx(_,{style:{textAlign:"center"},children:"Add a .paf (minimap2), .delta (Mummer), .chain (UCSC liftover), .anchors or .anchors.simple (MCScan), or .pif.gz (jbrowse CLI make-pif) file to view. These file types can also be gzipped."}),e.jsx(ce,{value:y,onChange:v=>{z(v.target.value)},children:e.jsx(X,{container:!0,justifyContent:"center",children:[".paf",".delta",".out",".chain",".anchors",".anchors.simple",".pif.gz"].map(v=>e.jsx($,{value:v,control:e.jsx(W,{}),label:v},v))})}),e.jsx(X,{container:!0,justifyContent:"center",children:y===".paf"||y===".out"||y===".delta"||y===".chain"?e.jsx(Ue,{radioOption:y,fileLocation:d,setFileLocation:p,assembly1:n,assembly2:s,swap:o,setSwap:r}):y===".anchors"||y===".anchors.simple"?e.jsx(Oe,{radioOption:y,fileLocation:d,setFileLocation:p,assembly1:n,assembly2:s,swap:o,setSwap:r,bed1Location:l,setBed1Location:m,bed2Location:a,setBed2Location:c}):y===".pif.gz"?e.jsx(Ke,{radioOption:y,fileLocation:d,setFileLocation:p,assembly1:n,assembly2:s,swap:o,setSwap:r,indexFileLocation:u,setIndexFileLocation:x}):null})]})});function et(t,n,s){const o=ge.readConfObject(t,"assemblyNames");return o.includes(n)&&o.includes(s)&&t.type.includes("Synteny")}const tt=g(function({model:t,assembly1:n,assembly2:s}){var o;const r=A.getSession(t),{tracks:a,sessionTracks:c}=r,m=[...a,...c||[]].filter(x=>et(x,s,n)),d=((o=m[0])===null||o===void 0?void 0:o.trackId)||"",[p,u]=i.useState(d);return i.useEffect(()=>{u(d)},[d]),i.useEffect(()=>{t.setImportFormSyntenyTrack(0,{type:"preConfigured",value:p})},[t,p]),e.jsxs(O,{style:{padding:12},children:[e.jsxs(_,{children:['Select a track from the select box below, the track will be shown when you hit "Launch". Note: there is a track selector ',e.jsx("i",{children:"inside"})," the DotplotView, which can turn on one or more SyntenyTracks (more than one can be displayed at once). Look for the track selector icon"," ",e.jsx(re.TrackSelector,{})]}),m.length?e.jsx(ye,{value:p,onChange:x=>{u(x.target.value)},children:m.map(x=>e.jsx(Le,{value:x.trackId,children:je.getTrackName(x,r)},x.trackId))}):e.jsx(w.ErrorMessage,{error:`No synteny tracks found for ${n},${s}`})]})}),st=g(function({assembly1:t,assembly2:n,model:s}){const[o,r]=i.useState("tracklist");return i.useEffect(()=>{o==="none"&&s.setImportFormSyntenyTrack(0,{type:"none"})},[s,o]),e.jsxs(e.Fragment,{children:[e.jsxs(ie,{children:[e.jsx(ve,{id:"group-label",children:"(Optional) Select or add a synteny track"}),e.jsxs(ce,{row:!0,value:o,onChange:a=>{r(a.target.value)},"aria-labelledby":"group-label",children:[e.jsx($,{value:"none",control:e.jsx(W,{}),label:"None"}),e.jsx($,{value:"tracklist",control:e.jsx(W,{}),label:"Existing track"}),e.jsx($,{value:"custom",control:e.jsx(W,{}),label:"New track"})]})]}),o==="custom"?e.jsx(Qe,{model:s,assembly2:n,assembly1:t}):null,o==="tracklist"?e.jsx(tt,{model:s,assembly1:t,assembly2:n}):null]})}),nt=D()(t=>({importFormContainer:{padding:t.spacing(4),margin:"0 auto"},assemblySelector:{width:"75%",margin:"0 auto"}}));function ot({model:t,assembly1:n,assembly2:s}){const o=A.getSession(t),{importFormSyntenyTrackSelections:r}=t;t.setError(void 0),ae(()=>{A.isSessionWithAddTracks(o)&&we(r).map((a,c)=>{var l;a.type==="userOpened"?(o.addTrackConf(a.value),t.toggleTrack((l=a.value)===null||l===void 0?void 0:l.trackId)):a.type==="preConfigured"&&t.showTrack(a.value,c)}),t.showAllRegions(),t.setAssemblyNames(s,n)})}const rt=g(function({model:t}){const{classes:n}=nt(),s=A.getSession(t),{assemblyNames:o}=s,[r,a]=i.useState(o[0]||""),[c,l]=i.useState(o[0]||""),[m,d]=i.useState(),p=m||t.error;return e.jsxs(Me,{className:n.importFormContainer,children:[p?e.jsx(w.ErrorMessage,{error:p}):null,e.jsxs(O,{style:{padding:12},children:[e.jsx(_,{style:{textAlign:"center"},children:"Select assemblies for dotplot view"}),e.jsxs(X,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[e.jsx(w.AssemblySelector,{helperText:"x-axis assembly",selected:r,session:s,onChange:u=>{a(u)}}),e.jsx(w.AssemblySelector,{helperText:"y-axis assembly",selected:c,session:s,onChange:u=>{l(u)}}),e.jsx(ie,{children:e.jsx(q,{onClick:()=>{(async()=>{try{d(void 0),ot({assembly1:c,assembly2:r,model:t})}catch(u){console.error(u),d(u)}})()},variant:"contained",color:"primary",children:"Launch"})})]}),e.jsx(st,{assembly2:r,assembly1:c,model:t})]})]})}),it=i.lazy(()=>Y(()=>import("./DotplotTooltipClick-D3Yph5F5.js"),__vite__mapDeps([13,1,2]),import.meta.url)),at=i.lazy(()=>Y(()=>import("./DotplotTooltipMouseover-Bwh3Iynn.js"),__vite__mapDeps([14,1,2]),import.meta.url)),te={left:0,top:0,height:0},le=D()(t=>({spacer:{gridColumn:"1/2",gridRow:"2/2"},root:{position:"relative",marginBottom:t.spacing(1),overflow:"hidden"},container:{display:"grid",padding:5,position:"relative"},overlay:{pointerEvents:"none",overflow:"hidden",display:"flex",width:"100%",gridRow:"1/2",gridColumn:"2/2",zIndex:100,"& path":{cursor:"crosshair",fill:"none"}},content:{position:"relative",gridColumn:"2/2",gridRow:"1/2"},resizeHandle:{height:4,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}));function Z(t,n){return t&&[t[0]-n.left,t[1]-n.top]}const ct=g(({model:t})=>{const{classes:n}=le();return e.jsx("div",{className:n.overlay,children:t.tracks.map(s=>{const[o]=s.displays,{RenderingComponent:r}=o;return r?e.jsx(r,{model:o},s.configuration.trackId):null})})}),lt=g(function({model:t}){var n,s;const{classes:o}=le(),[r,a]=i.useState(),[c,l]=i.useState(),[m,d]=i.useState(!1),[p,u]=i.useState(),x=i.useRef(null),K=i.useRef(null),z=i.useRef(0),L=i.useRef(0),E=i.useRef(!1),[C,y]=i.useState(!1),[v,H]=i.useState(!1),G=((n=x.current)===null||n===void 0?void 0:n.getBoundingClientRect())||te,Q=((s=x.current)===null||s===void 0?void 0:s.getBoundingClientRect())||te,j=Z(c,G),F=Z(r,G),M=Z(p,G),S=M||F,ue=p||r,I=j&&S?S[0]-j[0]:0,V=j&&S?S[1]-j[1]:0,{hview:T,vview:N,wheelMode:U,cursorMode:R}=t,ee=R==="move"&&!C||R==="crosshair"&&C,P=R==="move"&&C||R==="crosshair"&&!C;return i.useEffect(()=>{function f(h){h.preventDefault(),z.current+=h.deltaX,L.current-=h.deltaY,E.current||(E.current=!0,window.requestAnimationFrame(()=>{ae(()=>{if(U==="pan")T.scroll(z.current/3),N.scroll(L.current/10);else if(U==="zoom"&&Math.abs(L.current)>Math.abs(z.current)*2&&F){const b=L.current<0?1.1:.9;T.zoomTo(T.bpPerPx*b,F[0]),N.zoomTo(N.bpPerPx*b,Q.height-F[1])}}),E.current=!1,z.current=0,L.current=0}))}if(x.current){const h=x.current;return h.addEventListener("wheel",f),()=>{h.removeEventListener("wheel",f)}}return()=>{}},[T,N,U,F,Q.height]),i.useEffect(()=>{function f(h){a([h.clientX,h.clientY]),r&&c&&ee&&!p&&(T.scroll(-h.clientX+r[0]),N.scroll(h.clientY-r[1]))}return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}},[ee,r,c,p,T,N]),i.useEffect(()=>{function f(b){(b.metaKey||b.ctrlKey)&&H(!0)}function h(b){!b.metaKey&&!b.ctrlKey&&H(!1)}return window.addEventListener("keydown",f),window.addEventListener("keyup",h),()=>{window.removeEventListener("keydown",f),window.addEventListener("keyup",h)}},[]),i.useEffect(()=>{function f(h){Math.abs(I)>3&&Math.abs(V)>3&&P?u([h.clientX,h.clientY]):l(void 0)}return j&&!M?(window.addEventListener("mouseup",f,!0),()=>{window.removeEventListener("mouseup",f,!0)}):()=>{}},[P,j,M,I,V]),e.jsxs("div",{children:[e.jsx(He,{model:t,selection:!P||!(j&&S)?void 0:{width:Math.abs(I),height:Math.abs(V)}}),e.jsxs("div",{ref:K,className:o.root,onMouseLeave:()=>{d(!1)},onMouseEnter:()=>{d(!0)},children:[e.jsxs("div",{className:o.container,children:[e.jsx(be,{model:t}),e.jsx(Ce,{model:t}),e.jsxs("div",{ref:x,className:o.content,children:[m&&P?e.jsx(i.Suspense,{fallback:null,children:e.jsx(at,{model:t,mouserect:S,mouserectClient:ue,xdistance:I})}):null,P?e.jsx(i.Suspense,{fallback:null,children:e.jsx(it,{model:t,mousedown:j,mousedownClient:c,xdistance:I,ydistance:V})}):null,e.jsx("div",{style:{cursor:v?"pointer":R},onMouseDown:f=>{if(f.button===0){const{clientX:h,clientY:b}=f;l([h,b]),a([h,b]),y(v)}},children:e.jsx(Se,{model:t,children:P&&j&&S?e.jsx("rect",{fill:"rgba(255,0,0,0.3)",x:Math.min(S[0],j[0]),y:Math.min(S[1],j[1]),width:Math.abs(I),height:Math.abs(V)}):null})}),e.jsx("div",{className:o.spacer})]}),e.jsx(ct,{model:t}),e.jsx(w.Menu,{open:!!M,onMenuItemClick:(f,h)=>{h(),u(void 0),l(void 0)},onClose:()=>{u(void 0),l(void 0)},anchorReference:"anchorPosition",anchorPosition:p?{top:p[1]+50,left:p[0]+50}:void 0,style:{zIndex:800},menuItems:[{label:"Zoom in",onClick:()=>{j&&M&&t.zoomInToMouseCoords(j,M),d(!1)}},{label:"Open linear synteny view",onClick:()=>{j&&M&&t.onDotplotView(j,M),d(!1)}}]})]}),e.jsx(w.ResizeHandle,{onDrag:f=>t.setHeight(t.height+f),className:o.resizeHandle})]})]})}),wt=g(function({model:t}){const{initialized:n,loading:s,error:o}=t;return!n&&!s||o?e.jsx(rt,{model:t}):s?e.jsx(w.LoadingEllipses,{variant:"h6"}):e.jsx(lt,{model:t})});export{wt as default};
//# sourceMappingURL=DotplotView-uPiQLIVA.js.map
