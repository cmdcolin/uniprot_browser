{"version":3,"mappings":"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","names":["useStyles","makeStyles","BlockError","error","classes","_jsx","theme","bg","BlockMessage","messageText","SyntenyContextMenu","model","onClose","anchorEl","view","getContainingView","clientX","clientY","feature","Menu","event","callback","x","y","f","start","end","refName","mate","l1","l2","l1asm","l2asm","e","err","getSession","SyntenyTooltip","lazy","__vitePreload","LinearSyntenyRendering","observer","mouseoverId","height","xOffset","useRef","width","delta","scheduled","timeout","setAnchorEl","useState","tooltip","setTooltip","currX","setCurrX","mouseCurrDownX","setMouseCurrDownX","mouseInitialDownX","setMouseInitialDownX","currY","setCurrY","mainSyntenyCanvasRefp","mouseoverDetectionCanvasRef","useCallback","ref","mainSyntenyCanvasRef","useEffect","_a","onWheel","v","transaction","clickMapCanvasRef","cigarClickMapCanvasRef","_jsxs","ref1","ref2","rect","ctx1","ctx2","r1","g1","b1","r2","g2","b2","unitMultiplier","MAX_COLOR_RANGE","id","getId","cigar","unitMultiplier2","cigarIdx","getTooltip","evt","onSynClick","onSynContextClick","LoadingMessage","message","LoadingEllipses","ServerSideRenderedBlockContent"],"ignoreList":[0,1,2,3,4,5],"sources":["../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyDisplay/components/BlockError.js","../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyDisplay/components/BlockMessage.js","../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyDisplay/components/SyntenyContextMenu.js","../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyDisplay/components/LinearSyntenyRendering.js","../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyDisplay/components/LoadingMessage.js","../../node_modules/@jbrowse/plugin-linear-comparative-view/esm/LinearSyntenyDisplay/components/Component.js"],"sourcesContent":["import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()({\n    blockError: {\n        background: '#f1f1f1',\n        padding: 10,\n        color: 'red',\n    },\n});\nexport default function BlockError({ error }) {\n    const { classes } = useStyles();\n    return _jsx(\"div\", { className: classes.blockError, children: `${error}` });\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => {\n    const bg = theme.palette.action.disabledBackground;\n    return {\n        loading: {\n            paddingLeft: '0.6em',\n            backgroundColor: theme.palette.background.default,\n            backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 5px, ${bg} 5px, ${bg} 10px)`,\n            textAlign: 'center',\n        },\n        blockMessage: {\n            background: '#f1f1f1',\n            padding: 10,\n        },\n    };\n});\nexport default function BlockMessage({ messageText }) {\n    const { classes } = useStyles();\n    return _jsx(\"div\", { className: classes.blockMessage, children: messageText });\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Menu } from '@jbrowse/core/ui';\nimport { getContainingView, getSession } from '@jbrowse/core/util';\nexport default function SyntenyContextMenu({ model, onClose, anchorEl, }) {\n    const view = getContainingView(model);\n    const { clientX, clientY, feature } = anchorEl;\n    return (_jsx(Menu, { onMenuItemClick: (event, callback) => {\n            callback(event);\n            onClose();\n        }, anchorEl: {\n            nodeType: 1,\n            getBoundingClientRect: () => {\n                const x = clientX;\n                const y = clientY;\n                return {\n                    top: y,\n                    left: x,\n                    bottom: y,\n                    right: x,\n                    width: 0,\n                    height: 0,\n                    x,\n                    y,\n                    toJSON() { },\n                };\n            },\n        }, onClose: onClose, open: Boolean(anchorEl), menuItems: [\n            {\n                label: 'Center on feature',\n                onClick: () => {\n                    const { f } = feature;\n                    const start = f.get('start');\n                    const end = f.get('end');\n                    const refName = f.get('refName');\n                    const mate = f.get('mate');\n                    const l1 = view.views[model.level];\n                    const l2 = view.views[model.level + 1];\n                    const l1asm = l1.assemblyNames[0];\n                    const l2asm = l2.assemblyNames[0];\n                    l1.navToLocString(`${refName}:${start}-${end}`).catch((e) => {\n                        const err = `${l1asm}:${e}`;\n                        console.error(l1asm, err);\n                        getSession(model).notifyError(err, e);\n                    });\n                    l2.navToLocString(`${mate.refName}:${mate.start}-${mate.end}`).catch((e) => {\n                        const err = `${l2asm}:${e}`;\n                        console.error(l2asm, err);\n                        getSession(model).notifyError(err, e);\n                    });\n                },\n            },\n        ] }));\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { lazy, useCallback, useEffect, useRef, useState } from 'react';\nimport { getContainingView } from '@jbrowse/core/util';\nimport { transaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nimport { MAX_COLOR_RANGE, getId } from '../drawSynteny';\nimport SyntenyContextMenu from './SyntenyContextMenu';\nimport { getTooltip, onSynClick, onSynContextClick } from './util';\nconst SyntenyTooltip = lazy(() => import('./SyntenyTooltip'));\nconst useStyles = makeStyles()({\n    pix: {\n        imageRendering: 'pixelated',\n        pointerEvents: 'none',\n        visibility: 'hidden',\n        position: 'absolute',\n    },\n    rel: {\n        position: 'relative',\n    },\n    mouseoverCanvas: {\n        position: 'absolute',\n        pointEvents: 'none',\n    },\n    mainCanvas: {\n        position: 'absolute',\n    },\n});\nconst LinearSyntenyRendering = observer(function ({ model, }) {\n    const { classes } = useStyles();\n    const { mouseoverId, height } = model;\n    const xOffset = useRef(0);\n    const view = getContainingView(model);\n    const width = view.width;\n    const delta = useRef(0);\n    const scheduled = useRef(false);\n    const timeout = useRef(null);\n    const [anchorEl, setAnchorEl] = useState();\n    const [tooltip, setTooltip] = useState('');\n    const [currX, setCurrX] = useState();\n    const [mouseCurrDownX, setMouseCurrDownX] = useState();\n    const [mouseInitialDownX, setMouseInitialDownX] = useState();\n    const [currY, setCurrY] = useState();\n    const mainSyntenyCanvasRefp = useRef(null);\n    const mouseoverDetectionCanvasRef = useCallback((ref) => {\n        model.setMouseoverCanvasRef(ref);\n    }, [model, height, width]);\n    const mainSyntenyCanvasRef = useCallback((ref) => {\n        model.setMainCanvasRef(ref);\n        mainSyntenyCanvasRefp.current = ref;\n    }, [model, height, width]);\n    useEffect(() => {\n        var _a;\n        function onWheel(event) {\n            event.preventDefault();\n            if (event.ctrlKey) {\n                delta.current += event.deltaY / 500;\n                for (const v of view.views) {\n                    v.setScaleFactor(delta.current < 0 ? 1 - delta.current : 1 / (1 + delta.current));\n                }\n                if (timeout.current) {\n                    clearTimeout(timeout.current);\n                }\n                timeout.current = setTimeout(() => {\n                    var _a;\n                    for (const v of view.views) {\n                        v.setScaleFactor(1);\n                        v.zoomTo(delta.current > 0\n                            ? v.bpPerPx * (1 + delta.current)\n                            : v.bpPerPx / (1 - delta.current), event.clientX -\n                            (((_a = mainSyntenyCanvasRefp.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect().left) ||\n                                0));\n                    }\n                    delta.current = 0;\n                }, 300);\n            }\n            else {\n                if (Math.abs(event.deltaY) < Math.abs(event.deltaX)) {\n                    xOffset.current += event.deltaX / 2;\n                }\n                if (!scheduled.current) {\n                    scheduled.current = true;\n                    window.requestAnimationFrame(() => {\n                        transaction(() => {\n                            for (const v of view.views) {\n                                v.horizontalScroll(xOffset.current);\n                            }\n                            xOffset.current = 0;\n                            scheduled.current = false;\n                        });\n                    });\n                }\n            }\n        }\n        (_a = mainSyntenyCanvasRefp.current) === null || _a === void 0 ? void 0 : _a.addEventListener('wheel', onWheel);\n        return () => {\n            var _a;\n            (_a = mainSyntenyCanvasRefp.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('wheel', onWheel);\n        };\n    }, [model, height, width]);\n    const clickMapCanvasRef = useCallback((ref) => {\n        model.setClickMapCanvasRef(ref);\n    }, [model, height, width]);\n    const cigarClickMapCanvasRef = useCallback((ref) => {\n        model.setCigarClickMapCanvasRef(ref);\n    }, [model, height, width]);\n    return (_jsxs(\"div\", { className: classes.rel, children: [_jsx(\"canvas\", { ref: mouseoverDetectionCanvasRef, width: width, height: height, className: classes.mouseoverCanvas }), _jsx(\"canvas\", { ref: mainSyntenyCanvasRef, onMouseMove: event => {\n                    var _a;\n                    if (mouseCurrDownX !== undefined) {\n                        xOffset.current += mouseCurrDownX - event.clientX;\n                        setMouseCurrDownX(event.clientX);\n                        if (!scheduled.current) {\n                            scheduled.current = true;\n                            window.requestAnimationFrame(() => {\n                                transaction(() => {\n                                    for (const v of view.views) {\n                                        v.horizontalScroll(xOffset.current);\n                                    }\n                                    xOffset.current = 0;\n                                    scheduled.current = false;\n                                });\n                            });\n                        }\n                    }\n                    else {\n                        const ref1 = model.clickMapCanvas;\n                        const ref2 = model.cigarClickMapCanvas;\n                        if (!ref1 || !ref2) {\n                            return;\n                        }\n                        const rect = ref1.getBoundingClientRect();\n                        const ctx1 = ref1.getContext('2d');\n                        const ctx2 = ref2.getContext('2d');\n                        if (!ctx1 || !ctx2) {\n                            return;\n                        }\n                        const { clientX, clientY } = event;\n                        const x = clientX - rect.left;\n                        const y = clientY - rect.top;\n                        setCurrX(clientX);\n                        setCurrY(clientY);\n                        const [r1, g1, b1] = ctx1.getImageData(x, y, 1, 1).data;\n                        const [r2, g2, b2] = ctx2.getImageData(x, y, 1, 1).data;\n                        const unitMultiplier = Math.floor(MAX_COLOR_RANGE / model.numFeats);\n                        const id = getId(r1, g1, b1, unitMultiplier);\n                        model.setMouseoverId((_a = model.featPositions[id]) === null || _a === void 0 ? void 0 : _a.f.id());\n                        if (id === -1) {\n                            setTooltip('');\n                        }\n                        else if (model.featPositions[id]) {\n                            const { f, cigar } = model.featPositions[id];\n                            const unitMultiplier2 = Math.floor(MAX_COLOR_RANGE / cigar.length);\n                            const cigarIdx = getId(r2, g2, b2, unitMultiplier2);\n                            setTooltip(getTooltip({\n                                feature: f,\n                                cigarOp: cigar[cigarIdx],\n                                cigarOpLen: cigar[cigarIdx + 1],\n                            }));\n                        }\n                    }\n                }, onMouseLeave: () => {\n                    model.setMouseoverId(undefined);\n                    setMouseInitialDownX(undefined);\n                    setMouseCurrDownX(undefined);\n                }, onMouseDown: evt => {\n                    setMouseCurrDownX(evt.clientX);\n                    setMouseInitialDownX(evt.clientX);\n                }, onMouseUp: evt => {\n                    setMouseCurrDownX(undefined);\n                    if (mouseInitialDownX !== undefined &&\n                        Math.abs(evt.clientX - mouseInitialDownX) < 5) {\n                        onSynClick(evt, model);\n                    }\n                }, onContextMenu: evt => {\n                    onSynContextClick(evt, model, setAnchorEl);\n                }, \"data-testid\": \"synteny_canvas\", className: classes.mainCanvas, width: width, height: height }), _jsx(\"canvas\", { ref: clickMapCanvasRef, className: classes.pix, width: width, height: height }), _jsx(\"canvas\", { ref: cigarClickMapCanvasRef, className: classes.pix, width: width, height: height }), mouseoverId && tooltip && currX && currY ? (_jsx(SyntenyTooltip, { title: tooltip })) : null, anchorEl ? (_jsx(SyntenyContextMenu, { model: model, anchorEl: anchorEl, onClose: () => {\n                    setAnchorEl(undefined);\n                } })) : null] }));\n});\nexport default LinearSyntenyRendering;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { LoadingEllipses } from '@jbrowse/core/ui';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => {\n    const bg = theme.palette.action.disabledBackground;\n    return {\n        loading: {\n            paddingLeft: '0.6em',\n            backgroundColor: theme.palette.background.default,\n            backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 5px, ${bg} 5px, ${bg} 10px)`,\n            textAlign: 'center',\n        },\n    };\n});\nexport default function LoadingMessage({ message }) {\n    const { classes } = useStyles();\n    return (_jsx(\"div\", { className: classes.loading, children: _jsx(LoadingEllipses, { message: message }) }));\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { observer } from 'mobx-react';\nimport BlockError from './BlockError';\nimport BlockMessage from './BlockMessage';\nimport LinearSyntenyRendering from './LinearSyntenyRendering';\nimport LoadingMessage from './LoadingMessage';\nconst ServerSideRenderedBlockContent = observer(function ({ model, }) {\n    if (model.error) {\n        return _jsx(BlockError, { error: model.error });\n    }\n    else if (model.message) {\n        return _jsx(BlockMessage, { messageText: model.message });\n    }\n    else if (!model.features) {\n        return _jsx(LoadingMessage, { message: model.loadingStatus });\n    }\n    else {\n        return _jsx(LinearSyntenyRendering, { model: model });\n    }\n});\nexport default ServerSideRenderedBlockContent;\n"],"file":"assets/Component-Do6Jh71x.js"}