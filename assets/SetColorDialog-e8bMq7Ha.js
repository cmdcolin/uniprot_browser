import{m as k,a as h,j as e,B as n,aV as E,aW as H,aX as A,aY as L,u,c as N,D as W,e as I}from"./index-DPMJgfAS.js";import{D as T}from"./DraggableDialog-wvM6D-PO.js";import{C as U,a as G}from"./ColorPicker-DOkiVKNe.js";import{m as C,a as S}from"./util-ji0G19n0.js";import{D as K}from"./DataGrid-BbeQwLC2.js";import"./index-BHGTJiUw.js";import"./utils-DSyQ0Yxy.js";import"./getThemeProps-D2Hd2SEb.js";import"./MenuItem-BZgCoK98.js";import"./dividerClasses-CRpWzjDJ.js";import"./Divider-BsNHrm83.js";import"./Badge-HDwRQZRU.js";import"./TableCell-CTZZHzq1.js";const R=k()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});function O({rows:t,onChange:s,showTips:a}){const{classes:x}=R(),[m,d]=h.useState(null),[l,p]=h.useState([]),{name:_,color:B,baseUri:$,...v}=t[0],[y,w]=h.useState("blue"),[j,D]=h.useState({idx:0,field:null});return e.jsxs("div",{children:[e.jsx(n,{disabled:!l.length,onClick:o=>{d(o.currentTarget)},children:"Change color of selected items"}),e.jsxs(n,{disabled:!l.length,onClick:()=>{s(C([...t],l))},children:[e.jsx(E,{}),a?"Move selected items up":null]}),e.jsxs(n,{disabled:!l.length,onClick:()=>{s(S([...t],l))},children:[e.jsx(H,{}),a?"Move selected items down":null]}),e.jsxs(n,{disabled:!l.length,onClick:()=>{s(C([...t],l,t.length))},children:[e.jsx(A,{}),a?"Move selected items to top":null]}),e.jsxs(n,{disabled:!l.length,onClick:()=>{s(S([...t],l,t.length))},children:[e.jsx(L,{}),a?"Move selected items to bottom":null]}),e.jsx(U.ColorPopover,{anchorEl:m,color:y,onChange:o=>{w(o);for(const i of l){const c=t.find(r=>r.name===i);c&&(c.color=o)}s([...t])},onClose:()=>{d(null)}}),e.jsx("div",{style:{height:400,width:"100%"},children:e.jsx(K,{disableRowSelectionOnClick:!0,getRowId:o=>o.name,checkboxSelection:!0,onRowSelectionModelChange:o=>{p([...o.ids])},rows:t,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:({value:o,id:i})=>e.jsx(G,{color:o||"blue",onChange:c=>{const r=t.find(g=>g.name===i);r&&(r.color=c),s([...t])}})},{field:"name",headerName:"Name",width:u.measureGridWidth(t.map(o=>o.name))},...Object.keys(v).map(o=>({field:o,renderCell:({value:i})=>e.jsx("div",{className:x.cell,children:e.jsx(N.SanitizedHTML,{html:u.getStr(i)})}),width:u.measureGridWidth(t.map(i=>`${i[o]}`))}))],sortModel:[],onSortModelChange:o=>{const i=o[0],c=(j.idx+1)%2,r=i.field||j.field;D({idx:c,field:r}),s(r?[...t].sort((g,M)=>{const b=u.getStr(g[r]),f=u.getStr(M[r]);return c===1?b.localeCompare(f):f.localeCompare(b)}):t)}})})]})}const P=k()({content:{minWidth:800},float:{float:"right"}});function Y(){return e.jsxs(e.Fragment,{children:["Helpful tips",e.jsxs("ul",{children:[e.jsx("li",{children:"You can select rows in the table with the checkboxes"}),e.jsx("li",{children:"Multi-select is enabled with shift-click and control-click"}),e.jsx("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),e.jsx("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),e.jsx("li",{children:"Changes are applied when you hit Submit"}),e.jsx("li",{children:"You can click and drag the dialog box to move it on the screen"}),e.jsx("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]})}function ie({model:t,handleClose:s}){const{classes:a}=P(),{sources:x}=t,[m,d]=h.useState(structuredClone(x||[])),[l,p]=u.useLocalStorage("multiwiggle-showTips",!1);return e.jsxs(T,{open:!0,onClose:s,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[e.jsxs(W,{className:a.content,children:[e.jsx(n,{variant:"contained",className:a.float,onClick:()=>{p(!l)},children:l?"Hide tips":"Show tips"}),e.jsx("br",{}),l?e.jsx(Y,{}):null,e.jsx(O,{rows:m,onChange:d,showTips:l})]}),e.jsxs(I,{children:[e.jsx(n,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{t.clearLayout(),d(t.sources||[])},children:"Clear custom settings"}),e.jsx(n,{variant:"contained",color:"secondary",onClick:()=>{s(),d([...t.sources||[]])},children:"Cancel"}),e.jsx(n,{variant:"contained",color:"primary",type:"submit",onClick:()=>{t.setLayout(m),s()},children:"Submit"})]})]})}export{ie as default};
//# sourceMappingURL=SetColorDialog-e8bMq7Ha.js.map
