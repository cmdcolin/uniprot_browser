import{t as s,u as o,q as c}from"./index-B3kPj2Rj.js";async function g(t){const e=s.getRpcSessionId(t),{rpcManager:r}=o.getSession(t),n=o.getContainingView(t);if(!n.initialized||t.error||!t.statsReadyAndRegionNotTooLarge)return;t.setLoading(!0);const a=await r.call(e,"PileupGetReducedFeatures",{sessionId:e,regions:n.staticBlocks.contentBlocks,filterBy:t.filterBy,adapterConfig:t.adapterConfig});t.setChainData(a),t.setLoading(!1)}function u(t,e){c(t,async()=>{await g(t)},{delay:1e3});function r(n){const a=t.ref;if(!a)return;const i=a.getContext("2d");i&&t.chainData&&(i.clearRect(0,0,a.width,t.height*2),i.resetTransform(),i.scale(2,2),e(t,i,a.width,t.height),t.setLastDrawnOffsetPx(n.offsetPx),t.setLastDrawnBpPerPx(n.bpPerPx))}c(t,async()=>{const n=o.getContainingView(t);n.bpPerPx!==t.lastDrawnBpPerPx&&r(n)}),c(t,async()=>{const n=o.getContainingView(t);r(n)},{delay:1e3})}export{u as doAfterAttach};
//# sourceMappingURL=afterAttach-Sn7M2Rms.js.map
